===================== 2013-08-12 Version 3.3.5 Released =====================

===================== Changes Since Version 3.3.4 ===========================

commit b68c8e9a5b9f6dc3538c97e78f4779a77550a39e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 12 16:51:39 2013 +0200

    Makefile.defs: version set to 3.3.5

commit f2b89129941c93ffae99c2d2b35990333b339eb0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 31 13:51:34 2013 +0200

    perl: push the sip msg structure to perl after initializing it
    
    - reported by David Cunningham
    - backport from amster commit 341f810dca0cc0596e22f2ac1bca86de0b8d142d

commit fe571b1cc75132994fb94879e294dfc79c2e2787
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jul 25 11:47:12 2013 +0200

    perl: move initialization of SIP message var after initialization of temporary environment
    
    - upon a report by David Cunningham of a leak in operating system
      memory
    - backport from master commit 6ff74701652a11497bd82ee3ba2ac7547d1ce666

commit 211ef44012b744f05db1ff17cf23f824727ee6da
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jul 12 00:44:51 2013 +0200

    core: avoid doing dns srv again after naptr function that includes srv lookup
    
    (cherry picked from commit 80935f9e8bbe20e5c320828183999b5d395ec34c)

commit dabdfd48f3961d10d83c296066c04f30d4d2e303
Author: Victor Seva <linuxmaniac@torreviejawireless.org>
Date:   Thu Jul 11 16:13:09 2013 +0200

    modules/uac: use the proper parameter name on error message. (Closes: FS#239)

commit 8e98fd0a708f96c98b942b1fcfa77a5b6e45496d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 15 22:45:18 2013 +0200

    pv: clone result of several string transformations
    
    - it is safer for assigning back to the same variable on which the
      transformation was applied
    - reported by Martin Mikkelsen
    (cherry picked from commit fe7e4a5152674aa9c81c09dd2fc9938d9e9e762e)
    
    Conflicts:
    	modules_k/pv/pv_trans.c

commit cd97c66880bc1597d64dd7e075428fcc25a537ee
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun May 26 16:14:51 2013 +0200

    topoh: safety check for SIP messages
    
    - received callback can be executed for non-sip messages
    - reported by Julia
    (cherry picked from commit 352a7dccf2570af857d7e2e50fed600c4762278d)
    (cherry picked from commit 533f2238d9d14ed8ef0a367ce574aef8052c0452)

commit 1c0dbfdc4e2288896b7c533dfbc3275afb910869
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 24 22:01:59 2013 +0100

    modules/presence_xml: fixed issue with parsing some pres-rules documents
    
    - pres-rules that contain external links in a <conditions /> node don't
      have to have <identity /> nodes in the <conditions /> node.
    - Kamailio returns an error when it finds a <conditions /> node with
      no <identity /> node inside it.
    - Kamailio doesn't support external links, but it should skip over
      the <conditions /> nodes that contain them rather than return
      an error as later <conditions /> nodes may contain entries it can
      work with.
    (cherry picked from commit ac99219b0a850e0305eaf661b028536cfc28e2cb)

commit bcc0888bea5b5e0d105de7e5ebcedc8e1b8836ae
Author: Henning Westerholt <hw@kamailio.org>
Date:   Fri Apr 19 11:04:39 2013 +0200

    rr: use port.len to check for buffer overflow instead of max port len
    
        - reported by Kevin Wojtysiak
        (from commit 28a8b87885e373bee8cc81985277ae718973fdfd)

commit 0e9eafc25ca3240f690469116cee8ff3708eeee7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 9 00:18:35 2013 +0200

    parser: safety check for max port length in URI
    
    - can't be longer than 5, a port being 16b value
    - reported by Kevin Wojtysiak
    (cherry picked from commit 13fd48f89555f5421e8285669e303bcefe44f149)

commit a3a61d084fa03206cf447f6bd9ae9c8c3d81c8c6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 10 23:53:26 2013 +0100

    core: try to detect ipv6 addresses only when USE_IPV6 is used
    
    - reported by Juha Heinanen
    (cherry picked from commit b035aa9f2cc19d387b1b8f33a7888ffee27a4138)

commit 38556ad62e91467e563df2b7c5a6365297359a61
Author: Henning Westerholt <hw@kamailio.org>
Date:   Tue Mar 19 15:32:25 2013 +0100

    rtpproxy: fix spelling error in docs, reported from Victor V. Kustov, coyote at bks dot tv
    (cherry picked from commit a0b01f77de163cf7ea9d71d5293a1bfa20d31fa6)

commit 04e4eb6f67df41bdac3ff62a45f7b9266dac43b5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 5 15:55:11 2013 +0000

    pkg/kamailio/(centos|fedora): updated ver in .spec

commit f8c8f281e53d8dc2f94c2db4155bbb147e67b15e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:19:34 2013 +0100

    ChangeLog: updated for release of v3.3.4

commit be7cd45df003462a74e5cc1e0ca092dbfc0a6617
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:16:12 2013 +0100

    Makefile.defs: version set to 3.3.4

commit 8f9d90abddb19fe7fe97ee42d2cf653dfaa4b7e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:15:51 2013 +0100

    pkg: version set to 3.3.4 in deb specs

commit b923fb0385dd86fd77edda524de0456a670b648b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:12:27 2013 +0100

    pkg: version set to 3.3.4 for rpm specs

commit fdf285621eee4f5c78def8ca824a9f8d53dd286b
Author: Konstantin Mosesov <ez@voipgroup.org.ua>
Date:   Mon Feb 25 15:35:19 2013 +0200

    app_python: Bugfix for rewrite_ruri (backport from 4.x)
    
    *) Fixed a bug in msg_rewrite_ruri discovered by "V Tone" <vtone001@gmail.com>.
    *) Removed 'python exception' when do_action returns error. Reason: it is not an exception.
    *) Removed abort() if first_line type is invalid.

commit bb01d3161f45e071ff0035968d91dd007b7207c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 14:04:37 2013 +0100

    kamailio.cfg: fixed typos to speeddial
    
    - backport of 0fd954bc6a8f94ac5e8087f6b8abdba372505c6e

commit 3c8ed67cffe5ea1a73cd6f8f1c35be24cade46cd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 21 10:40:07 2013 +0100

    core: dns - prevent queries for IPv4/6 address literals
    
    - prevent A queries for IPv6 address literals or AAAA queries for IPv4
      address literals
    - patch by Simon Perreault
    (cherry picked from commit 9e6f0268097d81c0e06c7fe33599d0763ed38179)

commit b4861e720ba432addd5c197c9994181168d292c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 11 23:40:53 2013 +0100

    msrp: return proper value for $msrp(code)
    
    - internally there is an offset of 10000 to the value in the msrp reply
    - reported by Peter Dunkley
    (cherry picked from commit 1690eafbb599842f0507ad41c1590fcbba8c7630)

commit bc157c710d740715e78a26ac7299b2e6bb616cae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:58:55 2013 +0100

    msilo: safety check for freeing tmp_extra_headers
    
    - it can be a static empty buffer
    - reported by Stoyan Mihaylov
    - backport of 23b84739a72c5cca1fd397fbe1a7468a621cc2e6

commit 5e26e688af8967fdcb4daf218432e8d569eeade6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:15:22 2013 +0100

    pua_reginfo: fix setting lengths of contact attributes
    
    - fix also for warning from FS#255 reported by Ovidiu Sas
    - backport from f76bd09d4800ea63552c11002d7f6f72569e78ed

commit 2475a1beb3f9feb47dfa742c186baa329cb81241
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:10:59 2013 +0100

    modules/sqlops: Check if pv_spec is available before trying to use it.
    
    Instead of segfaulting when the script writer has not specified enough PV
    specs to hold all the query's result columns, bail out with an error message.
    - backport of a21750ff6fcf87d8e3f54597bdd3f1171846e6cb

commit 8d93eea7c92b797caae8ce9817e90ecb7d9e3d31
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 25 11:38:38 2013 +0100

    core: end simple pv name (e.g., $xy) at end of line
    
    - cfg parser was throwing error if last token in a line was $xy as pv
      with \n was not found
    (cherry picked from commit d2d6b4b932c7df6e6620a256692be5ef049356a3)

commit 7fab57ff91fc395c1450503706b3f734fb9473c3
Author: Richard Brady <rnbrady@gmail.com>
Date:   Tue Jan 22 17:19:31 2013 +0100

    json: proper handling of empty values for json documents
    (cherry picked from commit 15e1ae6720136a698326a0b53f6db8eef73e3e5a)

commit 08b5506618b1b4e590c55e89eea7bd2f0abcd796
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:03:34 2013 +0100

    siputils: fix decode2format fuction to handle ; in userpart
    
    - backported from ff22a1cbc2b817d63611b3da967d8245e11cb84c

commit 514f6cc66e5220779188aad15f3b3eeeace7aabf
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Jan 20 14:18:55 2013 +0000

    core: fixed bug in PV caching that broke the use of the $$ symbol
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit c059041a71a1b7175243c366316108ce370fffa7)

commit a1502e5ca1470276ca6d7c82956fee9a5390348b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 16 22:37:08 2013 +0100

    dialog: fix for is_in_profile()
    
    - function was broken, reported by Klaus Darilion
    (cherry picked from commit 83eafc8d8f767f4705d5f76ad0ffd4349a06c927)

commit 3e497b15bbcc2587736ae0f817deec1d913b26c0
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Fri Jan 18 10:21:50 2013 -0500

    tmrec: fix example given in docs

commit b1398b2faa5a01b652a8c265b93c4846e35f97d9
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Jan 11 11:07:45 2013 +0200

    dialog: fix bug when detect_spirals enabled
    
    If detect_spirals enabled and the caller sent an Invite which received a
    negative response and then immediately sent another Invite with the
    same callid and tag, the module did not create a dialog record for the
    second Invite. It wrongly concluded that the Invite is spiraled. This
    resulted in missing CDR for that call.
    Behavior observed if the first Invite has a small Session-Timer interval
    and receives a 422 reply. When the phone sent the second Invite with a
    larger Session-Timer, which could have been successful, it was not recorded
    by the dialog module.
    (cherry picked from commit 5a78a8b8ec104550a37d8e2ae9005bf87d21e00f)

commit a650507c5e9c7abb1ebdf8f60768a9fbdd23c189
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Jan 9 12:34:27 2013 -0500

    pv(k): Remove read-only empty strings that might be attempted to be written to

commit 6dda5c447f656c99cc84956b161cc9c977b06dd3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 6 15:24:39 2013 +0100

    dialog: fixed ka_timer linking
    
    - patch by Rinor Hoxha
    (cherry picked from commit ddcef074088df261ce3fb98adfbb1b76b73c30a6)

commit 76ea03ceb485f09d1ba1b9091e95ffdeba3616df
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Dec 19 01:48:17 2012 +0000

    pkg/kamailio/fedora/17: Updated boxgrinder appliance
    (cherry picked from commit 70b3ea024d9eb42f974b4de37a555bcb384405e9)


===================== 2013-02-25 Version 3.3.4 Released =====================

===================== Changes Since Version 3.3.3 ===========================

commit be7cd45df003462a74e5cc1e0ca092dbfc0a6617
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:16:12 2013 +0100

    Makefile.defs: version set to 3.3.4

commit 8f9d90abddb19fe7fe97ee42d2cf653dfaa4b7e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:15:51 2013 +0100

    pkg: version set to 3.3.4 in deb specs

commit b923fb0385dd86fd77edda524de0456a670b648b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 18:12:27 2013 +0100

    pkg: version set to 3.3.4 for rpm specs

commit fdf285621eee4f5c78def8ca824a9f8d53dd286b
Author: Konstantin Mosesov <ez@voipgroup.org.ua>
Date:   Mon Feb 25 15:35:19 2013 +0200

    app_python: Bugfix for rewrite_ruri (backport from 4.x)
    
    *) Fixed a bug in msg_rewrite_ruri discovered by "V Tone" <vtone001@gmail.com>.
    *) Removed 'python exception' when do_action returns error. Reason: it is not an exception.
    *) Removed abort() if first_line type is invalid.

commit bb01d3161f45e071ff0035968d91dd007b7207c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 14:04:37 2013 +0100

    kamailio.cfg: fixed typos to speeddial
    
    - backport of 0fd954bc6a8f94ac5e8087f6b8abdba372505c6e

commit 3c8ed67cffe5ea1a73cd6f8f1c35be24cade46cd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 21 10:40:07 2013 +0100

    core: dns - prevent queries for IPv4/6 address literals
    
    - prevent A queries for IPv6 address literals or AAAA queries for IPv4
      address literals
    - patch by Simon Perreault
    (cherry picked from commit 9e6f0268097d81c0e06c7fe33599d0763ed38179)

commit b4861e720ba432addd5c197c9994181168d292c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 11 23:40:53 2013 +0100

    msrp: return proper value for $msrp(code)
    
    - internally there is an offset of 10000 to the value in the msrp reply
    - reported by Peter Dunkley
    (cherry picked from commit 1690eafbb599842f0507ad41c1590fcbba8c7630)

commit bc157c710d740715e78a26ac7299b2e6bb616cae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:58:55 2013 +0100

    msilo: safety check for freeing tmp_extra_headers
    
    - it can be a static empty buffer
    - reported by Stoyan Mihaylov
    - backport of 23b84739a72c5cca1fd397fbe1a7468a621cc2e6

commit 5e26e688af8967fdcb4daf218432e8d569eeade6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:15:22 2013 +0100

    pua_reginfo: fix setting lengths of contact attributes
    
    - fix also for warning from FS#255 reported by Ovidiu Sas
    - backport from f76bd09d4800ea63552c11002d7f6f72569e78ed

commit 2475a1beb3f9feb47dfa742c186baa329cb81241
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:10:59 2013 +0100

    modules/sqlops: Check if pv_spec is available before trying to use it.
    
    Instead of segfaulting when the script writer has not specified enough PV
    specs to hold all the query's result columns, bail out with an error message.
    - backport of a21750ff6fcf87d8e3f54597bdd3f1171846e6cb

commit 8d93eea7c92b797caae8ce9817e90ecb7d9e3d31
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 25 11:38:38 2013 +0100

    core: end simple pv name (e.g., $xy) at end of line
    
    - cfg parser was throwing error if last token in a line was $xy as pv
      with \n was not found
    (cherry picked from commit d2d6b4b932c7df6e6620a256692be5ef049356a3)

commit 7fab57ff91fc395c1450503706b3f734fb9473c3
Author: Richard Brady <rnbrady@gmail.com>
Date:   Tue Jan 22 17:19:31 2013 +0100

    json: proper handling of empty values for json documents
    (cherry picked from commit 15e1ae6720136a698326a0b53f6db8eef73e3e5a)

commit 08b5506618b1b4e590c55e89eea7bd2f0abcd796
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 25 13:03:34 2013 +0100

    siputils: fix decode2format fuction to handle ; in userpart
    
    - backported from ff22a1cbc2b817d63611b3da967d8245e11cb84c

commit 514f6cc66e5220779188aad15f3b3eeeace7aabf
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Jan 20 14:18:55 2013 +0000

    core: fixed bug in PV caching that broke the use of the $$ symbol
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit c059041a71a1b7175243c366316108ce370fffa7)

commit a1502e5ca1470276ca6d7c82956fee9a5390348b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 16 22:37:08 2013 +0100

    dialog: fix for is_in_profile()
    
    - function was broken, reported by Klaus Darilion
    (cherry picked from commit 83eafc8d8f767f4705d5f76ad0ffd4349a06c927)

commit 3e497b15bbcc2587736ae0f817deec1d913b26c0
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Fri Jan 18 10:21:50 2013 -0500

    tmrec: fix example given in docs

commit b1398b2faa5a01b652a8c265b93c4846e35f97d9
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Jan 11 11:07:45 2013 +0200

    dialog: fix bug when detect_spirals enabled
    
    If detect_spirals enabled and the caller sent an Invite which received a
    negative response and then immediately sent another Invite with the
    same callid and tag, the module did not create a dialog record for the
    second Invite. It wrongly concluded that the Invite is spiraled. This
    resulted in missing CDR for that call.
    Behavior observed if the first Invite has a small Session-Timer interval
    and receives a 422 reply. When the phone sent the second Invite with a
    larger Session-Timer, which could have been successful, it was not recorded
    by the dialog module.
    (cherry picked from commit 5a78a8b8ec104550a37d8e2ae9005bf87d21e00f)

commit a650507c5e9c7abb1ebdf8f60768a9fbdd23c189
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Jan 9 12:34:27 2013 -0500

    pv(k): Remove read-only empty strings that might be attempted to be written to

commit 6dda5c447f656c99cc84956b161cc9c977b06dd3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Jan 6 15:24:39 2013 +0100

    dialog: fixed ka_timer linking
    
    - patch by Rinor Hoxha
    (cherry picked from commit ddcef074088df261ce3fb98adfbb1b76b73c30a6)

commit 76ea03ceb485f09d1ba1b9091e95ffdeba3616df
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Dec 19 01:48:17 2012 +0000

    pkg/kamailio/fedora/17: Updated boxgrinder appliance
    (cherry picked from commit 70b3ea024d9eb42f974b4de37a555bcb384405e9)


===================== 2012-12-18 Version 3.3.3 Released =====================

===================== Changes Since Version 3.3.2 ===========================

commit bbe8d44acc43038dac4c538067c7fe9917ca3e61
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 18 15:56:55 2012 +0100

    Makefile.defs: version set to 3.3.3

commit a2d326d47b9b7b3d3b68238e38852b0b742c265a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 18 15:53:45 2012 +0100

    pkg: version set to 3.3.3 to rpm specs

commit bbc0e8c5d4da01a16b932952abb32e92f2422ac2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 18 15:52:03 2012 +0100

    pkg: version set to 3.3.3 in deb specs

commit e2d68fd5a6d99c010b91f5730701bb705c1791b3
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Sat Dec 8 14:19:30 2012 +0100

    dispatcher(k): use the right pointer to rpc context
    (cherry picked from commit 6904d8c80b2089d01a69c3c0217c76c8e0132bac)

commit 5e6bc230d385f489284b4833370badb3facb492f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 19 10:45:41 2012 +0100

    core: handle '\r' as end of included file name
    
    - reported by Pirjo Ahvenainen
    (cherry picked from commit dc0bc9de9528e80cd8bc61201ce82db1a785baf4)

commit 42f2244abefcb157249e2311914a6d0f47396b5e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 9 11:03:46 2012 +0100

    core: tcp - proper handling of '\n-' sequence for detecting end of MSRP frame
    
    - in some cases it could go in wrong reading MSRP state
    - reported by Gavin Llewellyn
    (cherry picked from commit b255c406ba09ff229361a3bc14cc1c9fd076b52e)

commit 2200f31149fb994e4aaaa78d4ddce14ad0939f29
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 23 16:17:24 2012 +0200

    core: print modparam type id in log when parameter not found
    (cherry picked from commit 22dd8d6524a95b8bf0246adca99f0049c16fb76f)

commit 3d7623ecb9533c7f66053e871c13b50ecce59855
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 18 09:54:53 2012 +0200

    dialog(k): run event route after setting cfg dlg vars
    
    - in this way they (e.g., $DLG_lifetime) should be accessible in event
      route
    (cherry picked from commit 2cdded28d9968a0b78f5ec8329ae6983d9ea77a9)

commit 8b703e0e8b5c01ac315819b12bdbe35a657bb5f1
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Mon Dec 17 11:56:24 2012 -0500

    parser/digest: use next_sibling_hdr() instead of hand-rolling it

commit 74460a7e75fe6c8be1dee475b93e1765f5c72a3e
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Sun Dec 16 15:06:32 2012 -0500

    parser/digest: Fix hunting for Auth header in rare cases
    
    Fix a bug where find_credentials() would fail to find the correct
    Auth header when multiple headers are present, the one being looked
    for isn't the first and the full message had been parsed already.

commit dedbc8cfbada44ee394ea60e49c5cd54b411dc63
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Dec 13 13:57:46 2012 +0200

    modules/mediaproxy: restrict opening of dispatcher connection
    
    - restrict opening of dispatcher connection to sub-processes (patch
      provided by Emil Kroymann)
    (cherry picked from commit 3198beccbc2ce350bb0af2a1cedec72ccb7c9277)

commit 7d822fcbd1f26b5da5a45abc2c7bb7aae72cb487
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 14 00:43:04 2012 +0100

    dialog(k): reset default value for optional parameter
    
    - some rpc transports set a static string for missing optional
      parameters, causing invalid value
    - dlg.bridge_dlg proper handling of optional parameters return code
    (cherry picked from commit 7fc74e46a5d5b4e2b0cbbe5bdc1627e672867164)

commit ccb3a52a11394dc88010aa41465d062e8490564a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 14 00:20:08 2012 +0100

    dialog(k): fixed dlg.end_dlg rpc command
    
    - missing of the optional paramter causes negative return code
    (cherry picked from commit 840d23197e91c70f7b02072e144ec396f5f8f386)

commit 2f73a35b5fc2b3cc66f6a1a860ff6c6e47f9963c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Dec 12 17:44:24 2012 +0000

    pkg/kamailio/(centos|fedora): Updated .spec in preparation for 3.3.3 release

commit ff0417d4957daffff3a0ca063f07159908058515
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Dec 12 15:24:38 2012 +0000

    parser/sdp: Fixed double free
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit 8ec30688617a260d478402e59ef465c69e8247d9)

commit 835db0ecde6f401bd77b55e3499fa7cfe452b7ea
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Nov 25 21:54:32 2012 +0100

    dialog(k): safety check for callid parameter in mi commands
    
    - if not provided properly, it may result in crash
    - reported by Ricardo Martinez
    (cherry picked from commit 8acb59ee4de31ab76763a021acaf7b5a13e02f23)

commit a91b2bfedba95bfff756ce35f192afc657050c83
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 21 17:22:31 2012 +0100

    lib/kcore: reset time value for faked msg
    
    - reported by Uri Shacked
    (cherry picked from commit a708dcb5ad90ec517db481fea0570ec53863b471)

commit bab07e07858464d50d310bbb52431a0b171ee771
Author: Timo TerÃ¤s <timo.teras@iki.fi>
Date:   Thu Nov 15 16:11:41 2012 +0200

    modules_k/db_sqlite: fix crash with computed fields in custom queries
    
    Computed fields do not have decltype available, so guess the proper
    field type based on the result type of the first row. This does not
    work if the first row has null type as result, but is the best we can
    do easily and fixes gives right result in most cases.
    
    Reported-by: Pedro Antonio Vico Solano <pvsolano@amper.es>
    (cherry picked from commit 09205865f98136e0354539f09f4961ca016a915b)

commit 8198f2dcc92127bc15ac13f71372f016b8c982d9
Author: Timo TerÃ¤s <timo.teras@iki.fi>
Date:   Wed Oct 17 09:00:14 2012 +0300

    modules_k/db_sqlite: fix memory leak in sqlops query
    
    Seems that most other database drivers release the database
    resource only at free_result time, which I some how missed.
    
    Since we are doing a deep copy in store_result(), we can
    just release the sqlite resources immediately raw_query().
    
    Reported-by: Pedro Antonio Vico Solano <pvsolano@amper.es>
    (cherry picked from commit ecf95eb0ada8bfacb93af7b82f39347c841229e4)

commit 78d4b145c57e5e93b70f7441ec2c7e63a2f9f2c0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 9 08:41:55 2012 +0100

    dialog(k): use proper scan string for optional headers parameter in rpc commands
    
    - credits to Kristofer Signer for report and troubleshooting
    (cherry picked from commit d5120187eb41e709c840b3cfbb0dc1803f61b036)

commit f860ed61a19a1119ff6612fa6b3ebdfa6dc2f0bd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 9 08:07:42 2012 +0100

    Makefile.defs: arm compiler flags update
    
    - patch by Matthias Klose <doko@debian.org>,
      http://bugs.debian.org/cgi-bin/bugreport.cgi?msg=5;bug=690388
    (cherry picked from commit e916a4680d37f481167770fff27a710088cb5d3d)

commit 858e4148f222e9f448d54c6bee45a53a8def7062
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Nov 7 09:12:33 2012 -0500

    modules_k/siputils: Fix memory leak in uri_param() function

commit 020acff35f8e9dfa62aba8678a781a0f7bbb110b
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Nov 7 13:55:55 2012 +0000

    allow freeing of NULL pointer to behave like standard free() function
    
    The memory functions provided to openssl needs to behave like standard
    memory functions, i.e. free(). Therefore, ser_free must accept NULL
    pointers, see: http://openssl.6102.n7.nabble.com/Custom-free-routine-is-invoked-with-NULL-argument-in-openssl-1-0-1-td25937.html
    As shm_free() aborts on null pointers, we have to check for null pointer
    here in the wrapper function.
    (cherry picked from commit 7c37f8d4dc311c64c12e0b03b5e312892f9d886c)

commit 0575f951e3b99e1524347a9c3ebd337fe8b1dcc3
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Thu Nov 1 21:00:05 2012 +0100

    Revert "New Option: "x" for automatic bridging between IPv4 and IPv6."
    (Not a Bug-Fix)
    
    This reverts commit 2750e03d4977d4a8f59ca0d2d0f59e1caec96b2d.

commit 97d882a722d933f509565b7a2c578cac8b3ea5f9
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Thu Nov 1 20:59:40 2012 +0100

    Revert "Minor bug-fix: Need to update length."
    (Not a Bug-Fix)
    
    This reverts commit 942229d809e715ae330894b20d099f38b616c044.

commit ea5608548508f72f765e6f9590b1e1e2a23fe665
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Tue Sep 18 20:42:55 2012 +0200

    Minor bug-fix: Need to update length.

commit cd1c367218cdcd5f0867af2234f6080e8e6622a6
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Mon Sep 17 17:25:38 2012 +0200

    New Option: "x" for automatic bridging between IPv4 and IPv6.
    Based on the following assumption: "i" is the IPv4 interface
    and "e" is the IPv6 interface on the RTPProxy (tested with both
    RTPProxy and Sipwise's ngcp-mediaproxy-ng).
    
    Mechanism is as follows:
    - IP in SDP is IPv4: Do bridging "ie"
    - IP in SDP is IPv6: Do bridging "ei"
    
    Not a big deal, but makes the configuration much more easier.

commit 890f785bc05f137af624306f51874c17bef10d30
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 25 09:25:17 2012 +0200

    core: use cloned value to parse pv name for caching
    
    - patch by Hugh Waite
    (cherry picked from commit 22f9a675863f85d934afa5e7c09061c66497042b)

commit 66d81cb1a5c11c41a1b5a21a33ab750159403af6
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Oct 20 04:06:17 2012 +0100

    pkg/kamailio/fedora/16: merged latest fixes to .spec from master into 3.3 branch

commit 1e8b69569f810aa7e91c2b0f12948db82fd2d145
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Oct 20 01:23:51 2012 +0100

    Makefiles: Updated Makefiles to use db2x_docbook2man when docbook2x-man is not installed
    
    - db2x_docbook2man is what Fedora contains
    (cherry picked from commit c9088190cf29b7d561ca2bded6266b3e21d51d8b)

commit d1a8ba7f07c19bece6423b6a0cef63d7b284b5cd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Oct 20 00:29:07 2012 +0100

    pkg/kamailio/fedora/16: Updated .spec to set ownership of /etc/kamailio to kamailio.kamailio
    
    - Means that file-based DB (e.g. sqlite) files kept in /etc/kamailio can be
      written to by processes (including kamailio itself) run by the kamailio user.
    (cherry picked from commit eb45b8ccb4d859e7726889a4fae50941bd6c8e43)

commit c1e99154fb6ce8ad0edaab27084219f652f12c8b
Author: Claudio Furrer <elcaio@gmail.com>
Date:   Wed Oct 17 14:38:52 2012 -0300

    pkg/gentoo: Added ebuild for v3.3.2
    (cherry picked from commit 131e70db763aec71670466cc399e088bf96561f7)

commit b93559ffd4aea7eeb39029ceb85a4582fe3e0c38
Author: Claudio Furrer <elcaio@gmail.com>
Date:   Fri Oct 5 03:32:16 2012 -0300

    pkg/gentoo: version bump, added ebuild for v3.3.1
    (cherry picked from commit 83e31eaadd549132103899a201cdf100ab669b6e)

commit 94f198821628de8b2f44dc21a8f6cecb2d87ed84
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Oct 16 21:24:43 2012 +0100

    pkg/kamailio/(centos|fedora): Updated Boxgrinder appliances to match latest definition
    
    - also fixed typo in README

===================== 2012-10-16 Version 3.3.2 Released =====================

===================== Changes Since Version 3.3.1 ===========================

commit f707dcf308ea5166a7a8f6454103871b2f328311
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 16 16:22:39 2012 +0200

    Makefile.defs: version set to 3.3.2

commit a956fe20290a8da8049df0f11f18f8207f83e58e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 16 16:19:23 2012 +0200

    pkg/rpm: version set to 3.3.2 for rpm specs

commit 48eb53ee1eae2cc5c2dad61350941e45f500f219
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 16 16:17:38 2012 +0200

    pkg/deb: version set to 3.3.2 for deb specs

commit 47b544d4e0fe40c683566d9ffce54cc761a1eee1
Author: Dragos Dinu <dragos.dinu@1and1.ro>
Date:   Mon Oct 15 18:29:48 2012 +0300

    modules_k/siptrace Fixed crash when using HEP v2
    (cherry picked from commit 5d9d4d017d79d4e9269bbeb019460b3c8d8695d0)

commit 35c1a5fb75c52f1adcdf4c3938530751b63a2007
Author: Olle E. Johansson <oej@edvina.net>
Date:   Mon Oct 15 14:35:10 2012 +0200

    INSTALL - Fixing spelling error

commit d75cb5fab10efdedbe9ec3aeaaafc84c1c6b051e
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Wed Oct 10 10:02:00 2012 +0200

    tcp: fix connection alias replacing
    
    When the TCP_ALIAS_REPLACE is set and an alias has to be added to
    a connection that had 0 aliases (it can happen due to
    TCP_ALIAS_REPLACE flag), the connection aliases count was wrongly
    forced to 1.
    For more details see:
    http://lists.sip-router.org/pipermail/sr-users/2012-October/074932.html
    
    Patch-by Jijo
    (cherry picked from commit e71435b0276c89ef756fecf1bbd5e339b80e804c)

commit 5f505e26b92380b08ec2bb2865f2c1b212d2b054
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 9 16:30:24 2012 +0200

    core: reset params pointers if there is a failure in parse_params()
    
    - patch by Jijo
    (cherry picked from commit b12c2df6ccb903e2ca22d34bb968f3ebc2712b89)

commit 14f091d03fc3d58cd5753719eb909d2e84aac6bf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 9 12:29:09 2012 +0200

    tm: set log level to debug for negative return code of run_top_route()
    
    - it returns the code of last execution action, negative return is not
      necessary an error
    (cherry picked from commit 038780fdf40c8d5d3694538f199411810fad7a0e)

commit 94affa45a18c4c6b34341808011952b5e71d9438
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 9 11:39:16 2012 +0200

    rtpproxy: safety check for rtp stats pv
    
    - if the rtpproxy is not responding, there is no returned value and
      could cause crash when doing strlen(NULL)
    - return $null in case of various errors, being safer to check returned
      PV value in the script against $null, rather than having undefined
      value
    - reported by J. Gallart
    (cherry picked from commit 753f511f281b0f4406908086547225c5c0bc0d23)

commit 57005251e00d3b2e44fdba2dd1018c2b9780461d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 9 09:13:15 2012 +0200

    msrp: fixed copy&paste issue for getting To-Path size
    
    - the parsing of From-Path was used instead
    - reported by Peter Dunkley
    (cherry picked from commit 146873cf2b101d6363bb20c235b7dcdb8bb54134)

commit c6f98a04cde334f5f73bd2ee69c2d696c6a09df9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 3 14:20:27 2012 +0200

    mem: fixed MDBG() parameters
    
    - log level is not necessary for this macro
    (cherry picked from commit 0193d296e39a9fc095e90682f5335a2907403474)

commit 0d5c3543eea3e48ce4f7fb92e99d3262fddef180
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Oct 3 09:27:38 2012 +0300

    mem/f_malloc.c: downgraded print free(0) warning from LOG to MDBG.
    (cherry picked from commit 7b6234a3e8d0427c767942327aff57ade676eb5e)

commit 35fa70d06b08d2e11fcd4b208d741310f6b60c89
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 2 21:24:09 2012 +0200

    mem: enhanced the warning message for free(0) of QM in debug mode
    (cherry picked from commit 41fa8653157a989ed1a77f72b25a20fd984b999d)

commit 074faa8da935de1977b504e7d052fdfe0030fc0f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 28 14:38:42 2012 +0200

    app_mono: fixed c&p typo names in examples
    (cherry picked from commit f71d76c0f39f2c6b0e070e1246f371f17b45b2dd)

commit 444cb9836725441dc7245310d52898c0965deeba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Sep 27 14:57:51 2012 +0200

    core/mem: moved safety check for null before range check in *free()
    
    - affects only when memory debug is enabled at compilation
    - apparently libssl has some free(0) which makes it not possible to work
      with memory debugging (reported on irc channel)
    (cherry picked from commit 927a8a1aa705438d210fc244066a8c5a5b84a746)

commit b36939476280d38464a4c0ff234a4d26fdd0306c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 26 00:18:49 2012 +0200

    registrar(k): some contact attributes were not in $ulc(...)
    
    - ruid, reg-id and instance were not returned by $ulc(...)
    (cherry picked from commit 20c436df0c81b38777052b4ba6fb425577f5c707)

commit bae37685f2d145f86f1387eb4777ad38e86d188d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 25 13:52:05 2012 +0200

    utils/misc: few updates to vim syntax highlighting
    (cherry picked from commit 7943249ea75d8103d1364bcb4b6a63a2e685e88a)

commit f2ba2bfe5721060221e71294728a0921d65db53e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 25 11:31:17 2012 +0200

    sanity: fix to parameter type in example
    (cherry picked from commit 779addb9df44434448f78ab17d2daa756d31d3c0)

commit 33e935c378a0ce3c09df22611ffbf0460e154471
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 21 09:44:21 2012 +0200

    topoh: use L_DBG instead of L_ERR for some debugging messages
    
    - reported by Miguel Baptista
    (cherry picked from commit e8501b8eb592fa799af1fd1cfba8fa628cbfa800)

commit 929cd2e0dbd542d0eff63ad7179e438cd53bc45c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 18 09:27:38 2012 +0200

    pkg/kamailio/rpm: fixed copy&paste error for PKG_MEMORY size
    (cherry picked from commit 9430ee8d313ece9c97384868ee7623c0979028f5)

commit 5c313f701968b328adc6b7d76a14b78446dc2986
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 18 09:18:52 2012 +0200

    pkg/kamailio/rpm: added option to set pkg memory size for init.d script
    
    - split of MEMORY parameter to SHM_MEMORY and PKG_MEMORY
    - EXTRA_OPTIONS variable to add other command line parameters
    (cherry picked from commit 9430290ad91ca775bb18f54e70308917ce1e790a)

commit f5df3a25096d01ac36eec77e61af958e9d33b3d2
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Sep 17 17:34:57 2012 +0300

    core:parser fix possible bug in msg_parser
    
    If buffer was NULL, tmp was returned uninitialized, thus possible to cause problems
    (cherry picked from commit cccdaead04411175c46dd660c91c037c45f80c33)

commit dc4b47f8ef20e3ee6e3d16809ca76261bc96966d
Author: Jason Penton <jason.penton@smilecoms.com>
Date:   Mon Sep 17 10:55:48 2012 +0200

    benchmark: fixed bug/typo in calculating time diff ;)
    (cherry picked from commit d9b009ef3c430f6ea064b4a72d5b94ce842ede1d)

commit 37e67bec10e872fec3cc0dc4ef73b7f100d9f77a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Sep 11 08:52:53 2012 +0200

    kex: documented mi statistics commands
    
    - reported by David at lublink
    (cherry picked from commit 6b7a27e81cc838de6af9a1c55edb937d1094ce98)

commit e7572ade2f0d17239999ccb60b744cfd241afe9b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 31 10:29:45 2012 +0200

    auth: print return code in log when nonce is invalid
    
    - it will give a clue about why nonce is considered invalid
    (cherry picked from commit 494b383edde7a2d193c220f3117506e4cc95932f)

commit 756b1cdab5cac039fd958c2f3909a313a1baf3ab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 30 10:15:26 2012 +0200

    db_cluster: safety check for existence of several DB API members
    (cherry picked from commit 21583d47751fc7f684dac41a3bfbfc3b2c0bf3a3)

commit e4bfc9c353fd46a6b5ab726b48eaa18b35b284f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Aug 27 10:37:50 2012 +0200

    db_cluster: more verbosity when building cluster structures
    (cherry picked from commit b53ca97379e1b4aeae80b794f23e25e9150a0e58)

commit e6a8291381ccf9773198a6c338449571ba122417
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 24 09:14:28 2012 +0200

    db_cluster: use connection from write structure for db updates
    
    - could be related to an issue reported by Ãyvind Kolbu
    (cherry picked from commit 4d15ba97bab58108cfedc45158d90583f67cdadf)

commit b5719b81e8f79c40963d3bb9d7954732273d4a18
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Aug 19 21:29:06 2012 +0200

    core: rephrased debug message about no 2nd via in reply
    (cherry picked from commit 8bc7114c6a915985ca2f4e9ab50ea608437c7256)

commit 26ecb4932f1a265b87e6fa077c61b4feb6123262
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 15 13:01:43 2012 +0200

    dispatcher(k): corrected setid_pvname parameter name
    
    - readme listed it as setid_pvar, the source code expected setid_pvname
    - reported by Dan B.
    (cherry picked from commit e1149b05868b918d0bc52b2d46bb02f7799358db)

commit 90a50be6fe74e521bffcde6f8ec73467cb31d163
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Aug 15 12:48:32 2012 +0200

    dispatcher(k): corrected the variable which is set by ds_is_from_list()
    
    - setid_pvar is used instead of grp_avp
    - reported by Dan B.
    (cherry picked from commit be05dfc0f4af62f9c368960fe75a810548be8b87)

commit 6c7ecd4ffaaffd78458dc1b277dd85b5debb587b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 14 22:18:50 2012 +0200

    acc(k): added notes about dynamic table name for db acc to docs
    (cherry picked from commit 91d6d3c8a1484b23ff74f0cfd6356447985455a5)

commit 7287933b07dcaf6d3bfae8d482ef0c681b8ed697
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 12 14:52:07 2010 +0200

    acc(k): table name for db acc can be dynamic
    
    - you can include variables in table name and will be evaluated at
      runtime:
        modparam("acc", "db_table_acc", "acc_$time(year)_$time(mon)")
      will write now to table acc_2010_10
    - same can be done for missed_calls table name
    - second parameter of acc_db_request() supports as well config variables
    (cherry picked from commit e8f6a95d43b6a4340cf7e97213af5c71fa2a69e9)
    (cherry picked from commit 95ee0a3ee75556a25f3a9286837a57decf6c3c91)

commit 940047788e683f88d1f72cce257e3bcb68bff782
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Aug 14 11:19:08 2012 +0200

    pkg/kamailio/rpm: execute 'success' for start operation
    
    - reported by Andre
    (cherry picked from commit f9c5c389b2412d23f1fdd35c6e97dfe7dbe44811)

commit d94df595f837bb3682162a900b3e29203e8656c5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 9 16:14:43 2012 +0200

    usrloc(k): safety check for raw_query
    
    - db get all contacts functions requires raw_query, but not all db
      modules implement it
    (cherry picked from commit f61295a91bb92645ea46dea5f6101232afeb720d)

commit 2f6b9bc710acff53dea899236a81a6f9d33ec4ff
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 10 10:49:16 2012 +0100

    modules_k/xcap_server: Fixed small mistake in last xcap_server fix
    (cherry picked from commit 10dafd75873f9f58037680e4d72cafc4c877583f)

commit c210532ce7a2c26f8c09257d1d46ee2a641bdfb6
Merge: 587d29a befbee0
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 10 10:50:32 2012 +0100

    Merge branch '3.3' of ssh://git.sip-router.org/sip-router into 3.3
    
    * '3.3' of ssh://git.sip-router.org/sip-router:
      core: Fix parser sdp bug. Reset connection IP for each stream.
      tcp: fix _wbufq_insert bug
      nathelper(k): nicer handling of no sdp in sdp_1918(...)

commit 587d29a574d1898b761a590ee59bc8c06b403cd9
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Oct 9 21:07:10 2012 +0100

    modules_k/xcap_server: Fixed segmentation fault
    
    - Occurs when attempting to do an etag compare when there is no document/etag
      in the database.
    (cherry picked from commit d29cfab1584b8bc2672b4242a2626d9dc90c77a2)

commit befbee07c453dfb3364e33b6587efa8d57bf2ea5
Author: Vicente Hernando <vhernando@systemonenoc.com>
Date:   Fri Sep 7 07:01:11 2012 -0400

    core: Fix parser sdp bug. Reset connection IP for each stream.
    
    If connection IP is not reset, then when a stream has no IP connection,
    it uses former stream one instead of session default one.
    (cherry picked from commit 971386c346d72a016d00c8808059bd4f0a050059)

commit 8732b63bf5371914ba0267a22f45aacefe062ad4
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Mon Oct 1 11:55:16 2012 +0200

    tcp: fix _wbufq_insert bug
    
    When _wbufq_insert was called on a connection that had already
    some data added to the write buffer (another process was faster
    and added some data before the process that created the connection
    had a chance to do it), a wrong size was used in a memmove.
    This could lead either to corrupted messages or even crashes (if
     the messages were big enough to cause a buffer overflow).
    
    Many thanks to Jijo for debugging it.
    
    Reported-by: Jijo
    (cherry picked from commit 745e30c92336bfc3f8682b2c23e02862db688d9e)

commit 7881d44ce92c953e77305545b8773d3e056ea80e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Oct 5 14:34:13 2012 +0200

    nathelper(k): nicer handling of no sdp in sdp_1918(...)
    
    - don't print error message if there is no sdp body
    (cherry picked from commit 019bcdc56533e7ccd0e1cc7d45b1d2d8ebc868ae)

commit 3d195f2675569954a1f74128508db07cbc604ed9
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Thu Sep 20 12:08:03 2012 -0400

    modules/ctl: remove limitation on number of message chunks
    
    binrpc uses an iovec to send out replies, which is limited in size and so
    severely limits the number of elements that can be returned. This patch adds
    a callback function to send out and empty the iovec array every time it gets
    full while it's being populated.

commit e9ccba247a1262c7b183fb66933d5ee06b765968
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Sep 16 23:46:07 2012 +0100

    modules_k/rls: Fixed race-condition on multi-server systems that can cause different NOTIFYs with the same CSeq
    
    - Found by Hugh Waite @ Crocodile RCS and fixed by Peter Dunkley @ Crocodile RCS
    (cherry picked from commit 67df57c984e040a948d01d2c6bf1a9461d271f8e)

commit d81bb6501c6b4de517a44af8fe9005dd128d0066
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Sep 16 23:47:20 2012 +0100

    modules_k/rls: Fixed segmentation fault in RLS when a resource-list is updated
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit bde7e9465db9e7c9ecb485c57edabbd032f3b770)

commit edad1981336f706c0ee7f1b724439adba72a9c71
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Sep 16 17:20:38 2012 +0300

    modules_k/usrloc: modified syslog messages on bad and non-local sockets
    - Changed syslog message on non-local socket from warning to debug,
      because non-local socket is ok when nathelper obtains the contacts and
      overrides the socket.
    - Corrected syslog messages on bad and non-local sockets.
    (cherry picked from commit 424d2cabbe2e20c7ed134f6c9bd463811f2de63f)

commit 7b40fba5cfc04781c60a849bcb0e240c4e34413a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Sep 14 13:02:01 2012 +0200

    kamctl: regeneration of sql creation scripts for pua table updates

commit 91e8cb4bf7456eeebefa96269887f6aae46626d3
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:23:23 2012 +0100

    modules_k/pua: Adjusted locking for dialog insertion.  Candidate fix for "temporary dialog" error reported by Juha
    (cherry picked from commit b0d642016cca83c519ea9aa0e04aa9bf353e07e4)

commit 28aec07bcf81ab83d9b7af03de792cb66cf0ca3f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:10:08 2012 +0100

    modules_k/rls: Fixed segmentation fault when uploading new contact lists for a logged in subscriber
    
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 6924912be955b9f7ba47fd57b22ffe0c01eb68b2)

commit 3f540459b566641200e129c0c03ab26e6944fbdf
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:09:22 2012 +0100

    modules_k/rls: Improved check for expired subscriptions in DB only mode
    (cherry picked from commit af8230b1ac6a88dfb10d567e784a3c39a8f1b863)

commit 0c5d596371712e98b2b59fe6b3b0911f2252fcd0
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:08:38 2012 +0100

    modules_k/rls: Fixed issues with for() loops in DB only mode
    
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 7b64e538b350ebd520b80f668045b9f3c7d68fb9)

commit 1fe1770aa372b6d22554428fb7172215e502b20c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:06:54 2012 +0100

    modules_k/rls: core_hash() not used correctly to distribute notifier traffic
    
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 5235a1d6218e0bb16f6c9998789864635f54d03e)

commit 0d1af7d98cd4053b839556cfa07c9f71874fd02e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:59:08 2012 +0100

    modules_k/pua_db: If PUA finds more than one matching dialog (when there should only be one) delete them all
    
    - A timing difference on multiple-servers can sometimes cause this,
      and (if it happens, it doesn't when the clocks are synced) you can
      end up with the same error coming out lots because the DB is not
      cleaned up.
    (cherry picked from commit 20475258957cbf3183e5e771e9fd41dc69336096)

commit 831b80f9aecabfdfa37bcb806bc1192e46681869
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:03:32 2012 +0100

    modules_k/rls: Added missing lock_release()
    
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 725020f91493d33c5fa86828a421ed465731658e)

commit 64f64efb49782bb74080193863ac2d4775816add
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:58:13 2012 +0100

    modules_k/pua: Fixed incorrect check/use of update_period modparam
    (cherry picked from commit ef7d43fc614276b75c560660c7e4368fd18d574d)

commit 2778f4126fdd48f4573f008726b3a3868c3d69c1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 13:05:15 2012 +0100

    modules_k/rls: Fixed issues to do with expiry and rls_expires_offset
    
    - These cause particular problems on multi-server systems.
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 6eccc8b61e848977012d6efa1fb5aae61f8d441e)

commit c2616fb78a9828203fbc9e885d96f07364df5000
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:55:49 2012 +0100

    modules_k/presence: Fixed some problems with for() loops in DB only mode
    
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit cd6415240ff243842b4e11b095103f00fd64d0d9)

commit 42a123c416d5906bfefd7eaae8ef81cacda80a41
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:56:52 2012 +0100

    modules_k/presence: Improved check for expired dialogs in DB only mode with notifier tasks
    (cherry picked from commit d9087dbbf411f71486a4ce765aa5d6dfeb531f9c)

commit 262982b13c887c15e4c5a4d667530aad3fb8801c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:53:58 2012 +0100

    modules_k/presence: core_hash not used correctly to distribute notifier traffic
    
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 4b9aa7f144b8cf3e6da775563528913ed79e0553)

commit b4c70bca1cb3f0dc722bd89933fa566e790837a1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:51:33 2012 +0100

    modules_k/presence: Fixed inconsistencies in use of expires_offset for removing subcriptions
    
    - These caused particular problems on mulit-server, DB only, systems
    - Found and fixed by Hugh Waite @ Crocodile RCS Ltd.
    (cherry picked from commit a29a2a81bc541af020955dbda0d352445fef5788)

commit ed672fdde6d6adbe7066162a6b1cbae8cc3948a8
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Sep 11 12:54:51 2012 +0100

    modules_k/presence: Fixed level of a diagnostic message
    (cherry picked from commit 3635a0d920f0d03e85b8b97a44d878f0f8d13931)

commit 82ca28c8a523c015b69a3c56d02983356faefc54
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Sep 7 19:16:37 2012 +0300

    db schema: removed unique requirement from pua expires_idx
    
    - TODO: change also other than mysql table structures
    (cherry picked from commit bedb7fdc6d02e92fbf52ad4acb6dfcbb49f0bc49)

commit 4f34d95ebc689702376bfdeb63be65d1e774455a
Author: Vicente Hernando <vhernando@systemonenoc.com>
Date:   Wed Sep 5 06:44:39 2012 -0400

    sdpops: Fix memory leakage in w_get_sdp function.
    (cherry picked from commit d1d2494c966d65828d1920296056da840a11efd9)

commit e663ddd6e3ff55cd43f1a21561f7c60a94420d36
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Sep 5 08:58:18 2012 +0200

    dialog(k): fixed the name of event route
    
    - it is 'dialog:failed' instead of 'dialog:failure'
    - reported by Uri Shacked
    (cherry picked from commit 163f860ef7c0ed9a720207499d054e7f68b139df)

commit 5771e1ed6c7b92ebab9e2da0251315498a5190e1
Author: Michal Karas <largon@largon.net>
Date:   Thu Jul 12 17:38:15 2012 +0200

    parser/sdp: prevent manipulation with freed structure
    
    - FS#244

commit f5997ba82e066d667d8fdf48a0eb8f284abe70be
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Mon Sep 3 21:31:58 2012 +0200

    b/f: In case of IPv6 Option in the RTP-Command, the pointers and the length need to be updated.

commit d7452228134c42522ef84c1dbdcdc2cfd0bbf331
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 2 10:16:31 2012 +0200

    core: added md5 wrapper functions to build with Colin Plumb's md5 code
    
    Author: Tzafrir Cohen <tzafrir@debian.org>
    (cherry picked from commit bcff862df5b937e3a6ff87e4415e0039fd989908)

commit fbd4acae2d732908a9624c727b8b0306e1c166cd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 2 10:13:00 2012 +0200

    core: Use Colin Plumb's MD5 implementation
    
    Origin: http://anonscm.debian.org/gitweb/?p=dpkg/dpkg.git;a=summary
    Author: Tzafrir Cohen <tzafrir@debian.org>
    
    Borrowed the md5 code from dpkg instead of the existing md5.[ch]
    
    This makes the code compatible with Debian packing rules and
    restrictions regarding license for distribution
    (cherry picked from commit e6d912ad036aa92604ba3f2bf65cc4c4ba3e4d2f)

commit 20dacf5225e63fc8ff573272f41572f452272c7d
Author: IÃ±aki Baz Castillo <ibc@aliax.net>
Date:   Thu Aug 16 16:17:51 2012 +0200

    Process CANCEL before in-dialog requests. This prevents issues with some devices sending buggy CANCEL with To-tag when cancelling an initial INVITE.
    (cherry picked from commit 8a7a06f4d9c78f6da0558806d988c817fd6d0018)

commit cd1e3909f03f837a583b9ea30ffd6089b8ba8db2
Author: IÃ±aki Baz Castillo <ibc@aliax.net>
Date:   Thu Aug 16 16:13:50 2012 +0200

    Add Record-Route for in-dialog NOTIFY as per RFC 6665.
    (cherry picked from commit d661028060369e702f5882b6492040bd71fb900a)

commit 80e5d5689963ab01a9ab3b3ba7d39f08df59b213
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 29 16:06:42 2012 +0200

    kamailio.cfg: use add_contact_alias()/handle_uri_alias() for NATed calls
    (cherry picked from commit 9d720b83c9dd27e927627132ec052b15efeba518)

commit 5c217004880461e5d121a4b9640539e6bb5bc8bb
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Sep 1 13:32:18 2012 +0300

    modules/dialplan: always set type of attrs pvar value
    
    - Type of attrs pvar value was not set when dp_translate didn't result
      in any change.
    (cherry picked from commit 28a7300cd83e135b1c0d5488cb289fc7415fbd8c)

commit 2665ef8706201ba0e98344fd0e9b455a275a8c53
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Aug 30 17:39:47 2012 +0300

    modules/db_cassandra Updated in doc location table schema
    (cherry picked from commit 82bb7a8b67e488e7089d194fa5f96e9ae61dfb03)

commit 26d2413bba1c7b9fbc5bfa84acc3499bf08c5cd6
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Aug 30 17:21:29 2012 +0300

    modules/db_cassandra: Fixed segmentation fault in case of bad table schema
    
    Reported by Boudewyn Ligthart.
    (cherry picked from commit 0f8f21e390e8442cf1f527d3654dedc5a40bfcea)

commit 8ad086aa81bc6ca4fb762264ffcc5e53be819ec2
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Jul 13 16:50:07 2012 +0300

    lib/srdb1 : put pooling constans into separate header file to reduce
    include dependancy
    (cherry picked from commit f3ff581dbd0a53c4c5eafdf829bef0c25e8e8f28)

commit bb0b3b1e3218a2ad919b590ed6961f021fc72857
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Aug 30 12:24:24 2012 +0300

    modules/db_cassandra: Updated replace function to the new signature
    (cherry picked from commit 512013f324dd6faa37e26302a267afb07252812a)

commit c79aef1753fb02a35f299fd0fb861d82c34226e7
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Aug 29 15:47:10 2012 -0400

    modules_k/nathelper: fix a= lines inserted out of order
    
    RFC 4566 dictates a particular order of fields in the SDP body, in particular
    media-specific a= lines must be last fields within an m= block. Inserting
    them right after the m= lines violates this order if other fields (such as
    c=) are present, causing parse errors in some clients. So instead, insert
    them at the end of each m= block.

commit 12c25ac2a5dbc77b4f025f81a18eb4b07cfccee7
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Aug 29 19:33:51 2012 +0300

    kamctl/dbcassandra: Updated schema for cassandra location table
    (cherry picked from commit ae7047e05a7ff05a1707446286e2837fa49671dc)

commit db68eb7863263785f1fbf13be092f05f484c9171
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Mon Aug 27 12:26:59 2012 +0200

    pkg/deb: Wrap and sort
    
    Use wrap-and-sort command
    
    Credits to Michael Prokop <mprokop@sipwise.com>

commit 8604b9b40464793153f871e3334da7c81589de44
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Mon Aug 27 11:38:47 2012 +0200

    pkg/deb Don't conflict with -dbg any more

commit aae4e4537eefa525d03874aaf165048a09d1febf
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 21 15:21:54 2012 +0100

    modules_k/rls: Some incorrect pkg_free() calls in DB only code
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit 9b77e69de0953f9f6f48d4c1cf06f7e593469912)

commit 9de930d083af681fc85fc4cee90dfadbbaadb89c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 21 15:21:03 2012 +0100

    modules_k/pua: transaction not ended before calling send_publish() from TM call-back
    
    - Found by Hugh Waite @ Crocodile RCS and fixed by Peter Dunkley
      @ Crocodile RCS
    (cherry picked from commit b9e77beaee850303ffa736cb4043d21a1806fa4f)

commit fb51d3815292c27245b26d1f4a4f6c9b190f9200
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 21 15:19:51 2012 +0100

    modules/db_postgres: libpq requires null terminated string, but Kamailio internal str type is not (necessarily) null-terminated
    
    - Found and fixed by Paul Pankhurst @ Crocodile RCS
    (cherry picked from commit f20713462410211370e762abb463f0ceafd36d8d)

commit 92254d15ebf880fee454e73a8b1d3b2fa9966180
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Thu Aug 16 09:24:47 2012 +0200

    pkg/deb Build kamailio-dbg package
    (cherry picked from commit 79e99ae5cbe7016f22454faf4f9e9f5a463a4f7d)

commit 985f9382703a0f5a493f8a4594220304276c2bd4
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 14 15:53:07 2012 +0100

    modules_k/rls: Fixed incorrect table version check
    
    - Found by Hugh Waite @ Crocodile RCS
    (cherry picked from commit e22e5f83115d9f1e33c27ae437d93d7701330a8c)

commit d94040eca0a9900fcf0b9f1140e3afeb38c9fcba
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Aug 14 15:52:37 2012 +0100

    modules_k/rls: Fixed memory leak in rls under some error conditions
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit de8b241ea39284cce4c7e1850fcf3cef4c4c4a0a)

commit ff72de945a70b9eedb6eca08677b93e618faeb94
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Mon Aug 13 13:10:37 2012 -0400

    modules/lcr, modules_k/regex: Fix stack overflow from pcre_fullinfo(PCRE_INFO_SIZE)
    
    Fix instances where pcre_fullinfo(PCRE_INFO_SIZE) was given only an "int"
    argument, which results in stack overflow on some 64-bit platforms where
    an "int" is only 32 bits long. It expects a "size_t" argument, which is
    64 bits long.

commit dd26ed0cc3233fcf64635a8d2ee27361352b711a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Aug 13 15:48:18 2012 +0100

    modules_k/pua: Fixed double-free in pua
    (cherry picked from commit 5387288eac896a0710fb1c55cc4837e973e04946)

commit 03f8f4d9c4304ac0a8f629e1c94230ab70b58917
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Aug 13 15:50:05 2012 +0100

    modules_k/rls: Added DB transaction code around rls_presentity insert/replace
    (cherry picked from commit 65dcb2d0e72757d51b0ee51c457c5440278444bc)

commit 52f1ea5eb0067e94207dcfaa461260d96b2635bc
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Aug 13 15:49:09 2012 +0100

    modules_k/rls: Fixed memory leak in rls
    
    - Issue fixed by Paul Pankhurst and Peter Dunkley @ Crocodile RCS
    (cherry picked from commit c9628aa038ad7099a72af67f9284e5d0a9b78173)

commit 8db3e9c29b2cf1ff5c6f93411d3e9a90f7eb82ef
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 9 08:50:20 2012 +0200

    rr(k): fixed offset in building new route header
    
    - related to the previous fix done to strict routing intermediary hop
    (cherry picked from commit e154b2fb9f02d56d9c6a4b2d285791151ae0c8a3)

commit 25c6efc8d245c339c77748f93c222188769a7be8
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Aug 8 12:05:44 2012 +0100

    modules_k/rls: Fixed memory leak in RLS
    
    - Leak only happens when there is more than one Record-Route: header
    - Fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit c1240aa21a534f1c1a5bdaaebd9c29fe4984a4bb)

commit 56312a26e3e35692e7c1485015fb11d16de6f5ed
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Aug 5 16:43:42 2012 +0100

    pkg/kamailio/fedora/17: Fixed appliance problem

commit 7795ef185365eab558ed2c98e8d995f47fa823bb
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 3 14:38:49 2012 +0100

    modules_k/dispatcher: Dispatcher reload MI command not returning errors correctly
    
    - Fix by Hugh Waite @ Crocodile RCS
    (cherry picked from commit 5c83492470e8d1a706933915fcfbf6cfe2e0fd55)

commit a87a6a94e26176511cf2cc7e5260d5c1f0861add
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 3 14:39:49 2012 +0100

    modules_k/rls: Fixed segmentation fault in RLS
    
    - Fix by Paul Pankhurst @ Crocodile RCS
    (cherry picked from commit 49f25c402871a619404b61e29ff496c71daad8be)

commit 1bd1c77b7c35cbdf88a09020954f4b780e08697d
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 3 11:34:31 2012 +0100

    pkg/kamailio/fedora/16: Updated version in .spec file

commit d7de94a452185fca7ae4ea1cb5bb9bd775b73d5e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Aug 3 11:32:28 2012 +0100

    pkg/kamailio/fedora/17: Fixed typo in appliance files
    (cherry picked from commit 79a614ced2283264e3746cfcfd32fe4245f6496b)

commit a0ffdb7eb2b1478a98422123c78e15ce2b21449f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Aug 3 09:20:03 2012 +0200

    rr(k): add missing '<' in Route header for strict routing
    
    - if next hop is strict router after loose routing, moving the r-uri to
      last Route header was missing '<' in front of the address
    - reported by Varsha Venkatraramani
    (cherry picked from commit 090be2532da73f51043f9ba5f4b221fe338d60fa)


===================== 2012-08-02 Version 3.3.1 Released =====================

===================== Changes Since Version 3.3.0 ===========================

commit eca8ae21eb2d2c71d4752362fd88ca078941532b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 2 15:30:06 2012 +0200

    Makefile.defs: version set to 3.3.1

commit da7552bf8983343072415ccafac19f59d1affa34
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 2 15:23:47 2012 +0200

    pkg/deb: version set to 3.3.1 for deb specs

commit be9d77be00e1978be97c85e199efd712fabbabf4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Aug 2 15:19:28 2012 +0200

    pkg/rpm: version set to 3.3.1 for rpm specs

commit b5f95a603228fce13b2f168dfbf0120ed2e7befd
Author: Pawel Kuzak <pawel.kuzak@1und1.de>
Date:   Fri Jul 13 16:06:48 2012 +0300

    Ported gruu and outbound changes to p_usrloc module
    (cherry picked from commit 1f6bfa0b3ba15201c2ca3e2387a9f9e81e989643)

commit 153baccb8bbbcf08b6485f1cfc75a2b809bdafca
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 30 12:57:09 2012 +0200

    register(k): pack contact info based on header for searching existing ul records
    
    - not using the contact header resulted in omitting instance and reg-id
      parameters, not following gruu/ob extensions, ending in duplicate
      records for same +sip.instance
    - reported by JosÃ© Luis MillÃ¡n
    (cherry picked from commit efa3099252ca5d200bef6ce71df33f33b55f9941)

commit b5b534ec77634041d0ed11280241a947b61aff0c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jul 30 12:55:36 2012 +0200

    usrloc(k): on ul update, re-clone uri and callid if instance is set
    
    - changes can happen when gruu/ob is enabled as the UA can get different
      address for same instance
    (cherry picked from commit a7cad776a514b0ec73a5c40b7971af8e0f0da92b)

commit 5f8405f577d66069fde48202862f06cac432139b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 18 19:00:38 2012 +0200

    tls: set function to return the id
    
    - starting with v1.0.0 openssl does not use anymore getpid(), but address
      of errno which can point to same virtual address in a multi-process
      application
    - for refrence http://www.openssl.org/docs/crypto/threads.html
    - credits to Jijo on sr-dev mailing list
    (cherry picked from commit 0615826fe602c5183fbc7be7c51de5eb5eb7223c)

commit cd50811c1964e4e2227e45ffcb4e5e1f0db04745
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 18 18:51:54 2012 +0200

    kamdbctl: mtree tables were not in the list for db creation
    (cherry picked from commit e35e16efbbc6c746a7a4dfeddfc241c2c78d30bc)

commit 87618b2f1c5d6e3724c3935709b81b151c4645b5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jul 18 08:27:52 2012 +0200

    kamailio.cfg: removed sample db_mode parameter for domain module
    
    - no longer exists since 3.3 domain update
    (cherry picked from commit bb4925540d241eb91cc8b68712bec20f1970b086)

commit fe8265334cef872d8f3fabe407d3f3d744a45960
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 28 16:24:47 2012 +0200

    p_usrloc: added missing usrloc API members
    
    - they are set to NULL to get a clean crash, they have to be implemented
    - the missing API members are the functions introduced in 3.3 for
      handling SIP GRUU and Outbound extensions
    - a proper fix to follow
    - reported by Dan Bogos
    (cherry picked from commit f030b2f274b69526f256e66098de72a074000ed1)

commit 81149e30785aa1cc6f04e130afafb643d9163cce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 25 10:36:31 2012 +0200

    dispatcher(k): allow set id 0 for OPTIONS callback
    
    - set id is provided in param pointer address, 0 being equivalent to
      NULL
    - reported by Avi Brender
    (cherry picked from commit 2664cb9aa8ffd5d26ef6a0841318ccbcdefbf69b)

commit 85bda41ac007464efe940713426b54c38e5d4303
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jul 27 13:08:21 2012 +0300

    modules/lcr:  improved documentation of lcr_count module param
    (cherry picked from commit 9a1450d99accef8e473cf2324412fdfc09a7cd11)

commit 28be16549831df46dd1b8312da223b02359d8a9c
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Thu Jul 26 09:41:26 2012 -0400

    modules/lcr: Fix printing of IPv4 addresses in lcr.dump_gws
    
    IPv4 addresses were printed incorrectly. Also add special handling for
    null gw addresses and print them as 0.0.0.0 for backwards compatibility.

commit 3a8288482aa38afd8048193ef45b8ad979cacfab
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Jul 20 16:59:52 2012 +0300

    modules/matrix Fixed MI command not exported
    
    Added missing register_mi_mod() call in mod_init.
    (cherry picked from commit b26f862322ad311e3c42d899f72eaa1fb665b755)

commit 32e67eb8ebe8e1ef1190b03151962412ad41dbd3
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Tue Jul 17 10:15:46 2012 -0400

    Remove duplicate entry of "default_domain" in docs.
    Remove double occurance of the CSeq Attribute in the XML.
    (closes FS#246 - pua_reginfo adds duplicate cseq field in XML body on the Bugtracker)
    
    Thanks to Andrew Pogrebennyk (apogrebennyk@sipwise.com) for pointing this out.

commit 4aad5415215e4157f7bbe7c1b57178920aaaf3cc
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Jul 15 14:15:17 2012 +0100

    pkg/kamailio/(centos|fedora): Updated/fixed CentOS/Fedora build appliances and .spec
    
    - Had fixed some small issues in master, and now merged them back.

commit 6f47d8ac983cbbd616c7b5b941a8ec671f6e15e6
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 12 21:46:58 2012 +0100

    modules_k/registrar: Fixed some errors in module documentation
    
    - Fix by Hugh Waite @ Crocodile RCS
    (cherry picked from commit 6d040935f31be0098a09f4621874268164f3926a)

commit a897251aaa545c8726587412009f4906ff21e2aa
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 12 21:48:08 2012 +0100

    modules/sl: Fixed segmentation fault and corrected log messages
    
    - Fixes by Hugh Waite @ Crocodile RCS
    (cherry picked from commit e78ff34f1ecfe9a60a52996126032ea04fb490ab)

commit 7e412d720b1747fadac3e94c22d270877087b8a0
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 12 21:44:45 2012 +0100

    core: update printing of socket lists to show the advertised address if set for the socket
    
    - useful for diagnosing what is going on with advertised address
    - Enhancement added by Hugh Waite @ Crocodile RCS
    (cherry picked from commit 274969bcca2301c96dbbcc17c5b1d411073c8277)

commit ac24a183397924a7dab209c6f205b955936d4379
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 12 21:20:49 2012 +0100

    modules_k/presence: Added missing use_table() call
    (cherry picked from commit 0de5e17770cd5dcfcdd64174eb24f0bcaccef021)

commit 4570fc02082f69dd036ab7a3deea57ee8cffa411
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jul 12 16:26:38 2012 +0100

    Makefile: SCTP library check doesn't look in /usr/lib64
    
    - This means you can't build Kamailio for a 64-bit OS like CentOS or
      Fedora.
    (cherry picked from commit f2f8ff72137a39702d284dfe6deb9ef4442e4e78)

commit 671b52a37e3811bf89c74d83e6438739a67f50a7
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Wed Jul 11 12:30:51 2012 +0000

    kamdbctl: add domain_attrs table to standard tables
    (cherry picked from commit 699526ddb3b02cb5766bc7ad6f1c7a1861006d4c)

commit 66240e60d99b6bf9fc8f06c05cb7f4ecf6d8d1ad
Author: Andreas Granig <agranig@sipwise.com>
Date:   Wed Jul 11 12:52:38 2012 +0200

    modules_k/uac: fix handling of empty display-part.
    
    This re-enables the feature to strip the display name by setting
    an empty string, like uac_replace_from("", "$var(from)");

commit 948df15d215e7d12ad404dec7dfdbb41d58bea3e
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jul 4 17:15:43 2012 +0300

    modules/lcr: Fixed to/from_gw tests when proto parameter is 0 (ANY)
    
    - Also, updated README regarding handling of NULL value in lcr_gw
      transport column.
    (cherry picked from commit 1382c30da7ffd8831479affafde4d8e038a41240)

commit 3abf967f61a1bd95c28d4e8a929a8bd5df00671d
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Jun 27 18:34:55 2012 +0300

    modules_k/presence_xml Xcap auth reason when user deleted from list
    
    The reason in Subscription-Status header in Notify when a user is
    deleted from the contact list can be decided by the admin by setting
    presence_xml module parameter xcapauth_usedel_reason. Default value is
    "probation".

commit 33a2157ec034c106e5a4bd42aa874e57550a13fe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 25 18:36:18 2012 +0200

    dialog(k): proper unlock of profile for mi list command
    
    - the profile was unlocked in a wrong place, before finishing listing
      the its content and could cause a race in accessing it
    - reported by Ricardo Martinez
    (cherry picked from commit 3a2e929c63c656fe2db78e746546af05c66740ea)


===================== 2012-06-18 Version 3.3.0 Released =====================

===================== Changes Since Version 3.2.0 ===========================

commit 0a4d234b96fa7387a6a33775ce5e411b645230b9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 18 13:04:19 2012 +0200

    pkg/rpms: version set to 3.3.0 for kamailio old rpm specs

commit 8e15ac0ec2d9c154898b52378441f4d68d268caa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 18 13:01:43 2012 +0200

    pkg/debs: version set to 3.3.0 for kamailio deb specs

commit 92c19a67c3e717d57e26a3417ceeeeab56134cbd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun Jun 17 12:03:08 2012 +0100

    pkg/kamailio/fedora: Updated rel number in .spec in preparation for release

commit c70012b1252174c66771f8d81611d2428ea48e50
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 15 17:17:07 2012 +0200

    dialog(k): proper local linking of profile before dlg is created
    
    - reported by Nick R.
    (cherry picked from commit 80c4f4b1d9ff31e79c999b82db35c3b9abc56e22)

commit d772b44f8fee63043afb6aa1d0e3442d7295f2a3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jun 14 12:24:36 2012 +0200

    pua: remove wrong free of TM callback param in send_publish()
    
    - reported by Charles Chance and Juha Heinanen
    (cherry picked from commit 1d89d7bea854c2e2c646b5d13ba215795325b50f)

commit 144e2e3408928971cdd78ec6cf787774c5c9fedd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jun 14 17:43:54 2012 +0100

    modules_k/presence: partial NOTIFYs for presence.winfo not correctly formed when using notifier processes
    
    - I seem to have broken things when I did a pre-merge re-order/clean-up
      of the code
    - Issue found by Hugh Waite @ Crocodile RCS and fixed by Hugh Waite and
      Peter Dunkley @ Crocodile RCS
    (cherry picked from commit 5ed96d257f2d402597a678e4451fd9011786f4a2)

commit 3a32ca895bf326bf16454705a294d17bd6a2f539
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jun 14 17:41:49 2012 +0100

    modules_k/pua: send_publish() doesn't work correctly in DB only mode with certain DBs
    
    - The pua record wasn't getting inserted in some cases
    - Looks like I removed a couple of lines I shouldn't have when merging
      from Crocodile's internal SVN repository to git
    - Issue found by Hugh Waite @ Crocodile RCS and fixed by Hugh Waite and
      Peter Dunkley @ Crocodile RCS
    (cherry picked from commit 78da4d35dfceaa3d167d2b5ad66f1a27bc0f4628)

commit 3dba329bbefb4ef4274642eff722278c22387784
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jun 14 12:10:35 2012 +0100

    modules_k/presence: Fixed segmentation fault when uploading pres-rules documents
    
    - Found and fixed by Hugh Waite @ Crocodile RCS
    (cherry picked from commit 9dbe8f9fdff1eb5718698cdcdf2357ee1fabd42b)

commit a1983f7f059262ba47b9c2fcf6f31feefac624c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 13 11:51:57 2012 +0200

    drouting: reset the content of routing tree if root pointer is not freed
    
    - reported by Yufei Tao
    (cherry picked from commit c737ff95bb2e742981d81088169baa60d4605b85)

commit 493612344630a2e0b1f80687c8c650e97801ddf6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 13 17:29:51 2012 +0200

    usrloc(k): better safety check for null record access
    (cherry picked from commit 748b79fdeba12736b109dfbd77a3e9bb04c80b97)

commit 6af1d548ad0191030f4ef57df05b1c1b9ba699e8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jun 13 16:33:17 2012 +0200

    usrloc(k): safety check for first record in udomain slot
    
    - reported by David Kovarik, FS#234
    (cherry picked from commit 31f404a98b09b5a6270e860574b16c9f9112c305)

commit 5d42a32fadca415d9b6da2930e22eaf4900338e0
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Jun 13 15:38:20 2012 +0200

    Makefile: Add db_cluster
    
    Added to standard group as it has no dependencies
    (cherry picked from commit b8201c6dbff5967d1277363d119cbf33590d4112)

commit 3527aed1008229ae923391711c24dc7c0866a4a7
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Jun 13 16:25:12 2012 +0300

    modules_k/presence_[dialoginfo|mwi|reginfo]: fixed test of wrong variable
    (cherry picked from commit 9a310fe940e4b93e13539ccfbd6137ba76dcce87)

commit bcbddc795b4ffad3bfaa1b77a51b6cfd73239ff1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jun 13 11:47:07 2012 +0100

    modules_k/usrloc: Only run timer when timer_interval > 0
    
    - This is useful on DB only multi-server systems when the database is
      cleaned up outside of Kamailio.
    - This is a re-instatement of something that worked before the
      addition of GRUU.
    (cherry picked from commit b13434ff7f8e8b1b88434e888c26a77874eceeb0)

commit 5db0a27479d16933c06351d26c46c09ca726a1f9
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Jun 13 03:08:36 2012 +0200

    pkg/deb Update version to 3.3.0-rc0

commit 353865830cca632d374f821687de6ba33bf61450
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 11 14:32:44 2012 +0200

    registrar(k): don't access realm_prefix.s if len is <=0
    
    - solaris is not happy accessing .s struct field if set to 0
    (cherry picked from commit 0c7b9304efd5954cf53ba13a065b05a277efc91f)

commit dad95279399d8761221c99693e4900199937d434
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jun 12 02:01:10 2012 +0100

    modules/tls: Fixed log level and diagnostic typo
    
    - Fix by Hugh Waite @ Crocodile RCS Ltd
    (cherry picked from commit 3d3b1daf319fe87b880671cd5de9a2a6ace6c64b)

commit e8444469d4052b13758ba6623f059e22d4b64633
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jun 11 22:36:16 2012 +0100

    pkg/kamailio/fedora/16: Updated rel in .spec to rc0

commit 6479eb1bbf9047c0afc954015b04835fdd436005
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 11 12:33:05 2012 +0200

    Makefile: version set to 3.3.0-rc0
    
    - branch 3.3 was created for release series 3.3.x

commit e02024681e4c4b4d4c1a61f9b2c1fac675673b83
Merge: 7dbb31e 61050f3
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jun 9 17:05:49 2012 +0300

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    Forgot pull before push.

commit 7dbb31e78422186a740067feb136d956f20cc0d4
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jun 9 17:04:30 2012 +0300

    modules/tls/sbufq.h: got rid of compiler warning

commit 61050f35d1d617ef6e1cefab44a36e26ffa44479
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 8 22:55:40 2012 +0200

    sdpops: documented sdp_get() function

commit 8c7e90f87e90e07fa93da04994013383bdf79e49
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 8 22:47:21 2012 +0200

    sdpops: use PV cache to lookup the parameter
    
    - parsing PV names at runtime is a memory leak risk as PVs support
      dynamic names and allocate memory for them (applies for AVPs as well)
    - don't add an avps with a string value pointing to NULL in case SDP is
      missing - potential risk of seg fault in very strict OSes as later
      there is a memcpy() to clone the value. Return -2 if there is no SDP

commit 5919c2a7ee1090ac08d76e153d8497ad6970f30f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 8 22:32:00 2012 +0200

    mqueue: use received sip msg if availabe instead of faked one
    
    - fake msg has meaningless attributes which may give different results
      to PVs than people expect when processing a real sip message

commit 7044af6a38beb0b0ae11925b49403c398c9a82ed
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jun 8 23:15:46 2012 +0300

    modules/xmlrpc: got rid of unused variable

commit 85de7fe6e1d4771f7759c1da68b330a153d5794b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jun 8 23:10:43 2012 +0300

    msg_translator.c: got rid of compiler warning
    
    - Many more to go before 3.3 release.

commit c1fd259a2c77cc95d4f48ca72ca3c91485f65ede
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Fri Jun 8 11:10:23 2012 +0200

    pkg/deb Add lua to wheezy builds
    
    Lua is back to wheezy thanks to Juha and Daniel

commit 5a65869382f5de0ab55ba22761784e7428892253
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Jun 7 12:55:27 2012 +0300

    modules/app_lua/Makefile:  temporary fix for Debian Wheezy

commit ac28b3b8dd34cfac290f1941a575841261c9ed97
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Jun 6 15:49:57 2012 +0300

    modules_k/registrar Fixed memory leak in reg_fetch_contacts()

commit 1e5b711a88eb2c4a5d656d4e8f24729e04924518
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jun 5 23:40:53 2012 +0200

    siputils: fix for is_gruu()
    
    - improper return code check resulted in wrong gruu detection when there
      was no uri parameter
    - reported by Juha Heinanen, closes FS#235

commit a5b181bca6bf37b4a18ef502717b50d06e53d5e4
Author: Andreas Granig <agranig@sipwise.com>
Date:   Tue Jun 5 14:31:04 2012 +0200

    modules_k/path: Use single-quotes around received
    
    For full RFC3261 compliance, use single-quoted "received" param
    instead of double-quoted one.

commit 1a5b6cd11af4ec65148bc06617c33d689dbb5189
Author: Andreas Granig <agranig@sipwise.com>
Date:   Tue Jun 5 14:29:13 2012 +0200

    parser: Also support single-quoted URI params.
    
    RFC3261 only allows single-quoted params (no double-quoted
    ones), however better support both.

commit 874db2c236c07e634c93484ffb35b23db8b28118
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jun 4 15:31:36 2012 +0100

    pkg/kamailio/(centos|fedora): Tidied up a couple of issues in the BoxGrinder appliances

commit 4d4b44d461aa568b60c7ae80c26ce8919aaadb44
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jun 4 15:30:21 2012 +0100

    pkg/kamailio/fedora: Updated .spec file to fix issue where some directories were left on uninstall
    
    - Just needed a few %dir lines in the right place so that RPM knows
      to delete all of the Kamilio directories on uninstall.

commit b2a5914e600f7494e9c8a14137a0e4561724166e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jun 4 12:58:56 2012 +0100

    utils/kamctl: kamctl.sqlite not installed, kamctl.pgsql is installed (as kamctl.sqlite) instead

commit 83a558fbad700198a8667ef01f756269d7e2c310
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 4 12:28:09 2012 +0200

    dispatcher(k): improved debug message
    
    - when hashing due to alg 7, print the string to be hased as well as the
      hash code for it

commit 231e7fcfdded9fedfc30331642fb9ba9a3a99556
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 4 11:54:09 2012 +0200

    app_lua: explicit link against libm only of no pkg-config or lua-config is found
    
    - otherwise it appears two times in the libs linking string

commit 4875c53d467c973c07213a13975add4b7ca4f560
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jun 4 11:40:11 2012 +0200

    registrar(k): moved realm prefix as first field in cfg registrar struct
    
    - added debug message to print the realm prefix

commit 83e922b0f253418c089a4a89f63230c370c0331b
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Mon Jun 4 10:19:00 2012 +0200

    pkg/deb Remove mono build from Squeeze
    
    The module depends on Mono2.0 which is not
    available in Squeeze.

commit 85e7a593684c175d5c557f2340b175cf26679d2e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Jun 2 21:40:13 2012 +0100

    pkg/kamialio/(centos|fedora): Tidied up some stuff in the Boxgrinder appliances

commit 8389f7a3d1cc6eb312ec92662a4db6758bc5c03b
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Jun 2 20:25:38 2012 +0100

    pkg/kamailio/fedora/16: Updated .spec to require redhat-rpm-config for building
    
    - This is needed to get debuginfo RPMs to build automatically

commit 8545966dc22eeadd3ffa8aed2fc476af1572c3d5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Jun 2 20:23:51 2012 +0100

    pkg/kamailio/fedora/16: Updated Boxgrinder build appliance to install redhat-rpm-config
    
    - This is needed to get debuginfo RPMs to build automatically

commit 38140a453004979059bf58039fb410f0c2c58cad
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Jun 2 20:22:50 2012 +0100

    pkg/kamailio/centos/6: Updated Boxgrinder build appliance to install redhat-rpm-config
    
    - This is needed to get debuginfo RPMs to build automatically

commit 54404016cb6863339021eb6790d79911823db624
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat Jun 2 00:48:29 2012 +0100

    pkg/kamailio/fedora: Improvements to service script and .spec
    
    - systemd service script now deletes PID file and restarts Kamailio
      automatically if it fails due to an unhandled signal.
    - Updated .spec to call "systemctl --system daemon-reload" after uninstall

commit 40201ac316b1ca3b1bcc52c07537194938b9cacc
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jun 1 23:09:41 2012 +0100

    pkg/kamailio/fedora: Changed directory structure a little and tweaked .spec for Fedora 17

commit 258bc7e2f9d147679c0434782f376afe2c3f02a4
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jun 1 11:50:17 2012 +0100

    modules_k/presence: Fixed presence hard-state implementation
    
    - Removed modparams added when I did this originally
    - Hard-state is still "publish"ed to the presentity table (with expiry
      of -1)
    - Removed exported function for updating hard-state presentity and
      added a new type to pres_refresh_watchers instead (also updated
      refreshWatchers MI command)
    - Hard-state presentity now fetched using the event->get_pidf_doc()
      function instead of directly from the database
    - Also fixed two bugs (from my notifier work) found during testing:
      - query_db_notify() sends NOTIFY requests immediately (instead of
        through notifier tasks)
      - segmentation fault in update_pw_dialogs_dbonlymode() when there
        are no matching dialogs

commit c5f3bc49bcfb42083ee4622a0d5f9b77f177aecd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jun 1 11:48:29 2012 +0100

    modules_k/presence_xml: pidf-manipulation now fetched using event->get_pidf_doc()
    
    - Part of the fix to the way presence hard-state works.
    - Removed the, now unused, pidf_manipulation modparam

commit 462a7b4c00e5ea544472e3f1f89a844c0158adb5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jun 1 11:37:21 2012 +0100

    modules_k/permissions: allow_trusted() doesn't work for HTTP requests
    
    - This is because HTTP requests don't have From: headers.
    - Fixed by only checking From-URIs for SIP requests.

commit c3caaa4c12f76c77381c6a0afc8688bc38b16999
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 1 11:34:20 2012 +0200

    nathelper(k): remove maddr param in fix_nated_contact()
    
    - if maddr exists, it makes no sense anymore if the contact uri is
      changed by the proxy
    - reported by Morten Isaksen

commit 362b6f134c5ab408d6bb492e2492bcfc5bab4996
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jun 1 09:06:33 2012 +0200

    core: Via parser allows generic parameters without value separated by white spaces and semicolon
    
    - reported by Iñaki Baz Castillo, closes FS#127

commit 97d014bc160e54399ec0f9301344ba45fdbcb625
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 31 23:11:21 2012 +0100

    pkg/kamailio/centos/6: Replaced kamailio.spec with symbolic link to ../../fedora/fc16/kamailio.spec

commit 79de35412717ee33b2de470a90b4ca061a80a8f2
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 31 23:10:23 2012 +0100

    pkg/kamailio/fedora/fc16: Updated .spec file to work for both Fedora 16 and CentOS 6
    
    - Also updated release number to pre3

commit 5a12da43be12731c8d4cf0d4943bebd6dd296bef
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 31 23:39:03 2012 +0200

    usrloc(k): fix detection of usrloc callbacks
    
    - proper check of ul callback types
    - harmless, just a bit of performance gain, however, the code was
      mistaken

commit e8506004db6fdbb8104197d72de5b57ed8295d24
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 31 22:22:19 2012 +0200

    app_lua: don't use variable for lua version detection
    
    - trying to see if this makes it work on debian wheezy, as the make
      command is re-exeuting in infinite loop of implicit rule

commit 4b68b3ca0aef58f21e46f06944fa31391ef22fe5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 31 19:15:52 2012 +0200

    usrloc(k): option to check if contact DB UPDATE was successful
    
    - use DB API affected_rows() when available to detect if the DB UPDATE
      operation for a contact was successful, if not, do an INSERT instead
    - behaviour controlled by parameter db_check_update, default is 0 (no
      check for affected rows and no insert -- backward compatible)
    - closes items FS#41 and FS#226

commit 566fe1eaefaf9db7586438f19e9a1e82d7bcfac7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 31 16:34:50 2012 +0200

    app_lua: set libm dependency before internal SER_LIBS var

commit d219ab1568931e5d6102bcd41a2d3885613434ec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 31 14:45:41 2012 +0200

    Makefile: version set to 3.3.0-pre3

commit 511841b7bcdc7f5cc72775942ecf6b11525aad82
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 31 14:44:19 2012 +0200

    core/select: fixed @via... without header index
    
    - reported by Iñaki Baz Castillo, fixes FS#138

commit 1059c6ae11f6165c05793903354a9307077abf0a
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed May 30 14:38:34 2012 +0200

    pkg/deb Add Ubuntu 12.04 debian folder

commit 542eb50fa3f30265488a5fa1ea6871b3bc101891
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Wed May 30 12:53:03 2012 +0200

    - improved URI while publishing user location
    - extended user-record-data in the XML
    Credits go to Gnaneshwar Gatla, InTouch Health

commit 9e432354bd47b73de405ca29d21ca6c28ae4180e
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed May 30 11:07:51 2012 +0200

    Makefile: Add tmrec to standard groups

commit 1ee222b47d50cd9d0b0928db13533c6b4e9ea055
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed May 30 10:50:55 2012 +0200

    plg/deb fix app_mono depends

commit a9d0a6bb95dd40d12a9e34bc20b4037a2b5393da
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed May 30 10:39:38 2012 +0200

    pkg/deb Add mono module to debian packaging

commit 0ecf48b118ce3cb081f44bdd868d8849a0d2bf56
Merge: 9bf4fbf f5a60cb
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 30 11:09:34 2012 +0300

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 9bf4fbf979cff6a200c0407271ae3450af3d0b8e
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 30 11:07:11 2012 +0300

    modules/lcr: fixed bug in freeing rule_id_hash_table
    
    - Indexing of rule_id_hash_table went too far by one.

commit f5a60cb91ecb701681b7ef0a29d5f1b0bb503908
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed May 30 01:44:50 2012 +0200

    pkd/deb Remove lua and Add redis to wheezy build

commit 9e4a0cafd38e78dae8999b6a3f30e3878f4d5b4a
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Tue May 29 18:25:36 2012 +0000

    delete a file which was added by mistake

commit 0219f1cda6cf51fbc5d0aa3cc0b575e8cba7f869
Author: Henning Westerholt <hw@kamailio.org>
Date:   Tue May 29 18:08:39 2012 +0200

    xhttp: regenerate readme after commit c386968d40aeef9c8

commit c386968d40aeef9c851e896dd6ada9713d9d3c01
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Tue May 29 15:21:23 2012 +0000

    add tcp_accept_no_cl=yes to xhttp description

commit 319a966497a0dc85b5f1a2e43ecae56cd515b902
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 29 11:11:49 2012 +0200

    registrar(k): check if realm prefix len is >0

commit 33e1ad7499642f660d77b6581e48c44d46923f0e
Author: Timo Teräs <timo.teras@iki.fi>
Date:   Tue May 22 13:58:16 2012 +0300

    srdb1/dbschema/sqlite: adjust binary column type to BLOB
    
    The BYTEA was a mistake in first place (copied from postgres xsl).
    
    SQlite needs the type to be BLOB for proper affinity. This is also
    what the db_sqlite driver expects.

commit 0e758a5e2b7ca005278fce878aad332f3b20770b
Author: Timo Teräs <timo.teras@iki.fi>
Date:   Tue May 22 13:55:05 2012 +0300

    srdb1/schema: sort files used to generate versions
    
    This ensures that the versions does not change if just file
    ordering in file system changes. At least on some systems the
    $(wildcard) function return unsorted results.

commit 861603806e72876e0348c25031bcd64892023a20
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 22 12:41:05 2012 +0200

    srdb1/dbschema: regenerated db creation scripts
    
    - lcr_rule version update was not taken in consideration
    - reported by Timo Teräs

commit 701a41357a35da7722fcbeb36face772991543d9
Author: Timo Teräs <timo.teras@iki.fi>
Date:   Tue May 22 13:27:53 2012 +0300

    modules_k/db_sqlite: make decltype matching case-insensitive
    
    Search for keywords case insensitively instead of using strstr().
    SQlite stores decltype as-is, and does the affinity type testing
    case insensitively too.

commit a84b5e86cba413a3e5c9adc229b3b4e8c86a37ba
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 20 01:13:41 2012 +0100

    pkg/kamailio: Added new build and script files for Kamailio 3.3.0 on CentOS 6
    
    - Based on the Fedora files I created recently
    - Directory structured so that multiple CentOS releases can be handled
    - The old CentOS .spec file (pkg/kamailio/rpm/kamailio.spec.CenOS) has
      been left untouched.  This file is out-of-date and doesn't work
      properly with kamailio 3.3.0 and CentOS 6 (it should be removed if
      no-one is using it)
    - kamailio-build.appl and kamailio.appl are BoxGrinder appliance
      definitions for CentOS 6 build and installation test machines.
    - This .spec file builds and pacakges all Kamailio 3.3.0 modules
      (modules/modules_k) that can be built and installed on CentOS 6
      without adding any additional repositories.  This means modules that
      require packages (or versions of packages) not available in the
      standard CentOS 6 repo are not built.
    - The following modules are not build:
      - modules/app_mono: Requires mono which is not in the CentOS 6 repo
      - modules/auth_identity: Conflicts with TLS unless statically linked (which
        requires changes to Makefile and is impractical for generic RPM building)
      - modules/db_cassandra: Requires Cassandra and Thrift which are not in the
        CentOS 6 repo
      - modules/geoip: Requires GeoIP which is not in the CentOS 6 repo
      - modules/iptrtpproxy: Needs local copy of iptables source to build
        (impractical for generic RPM building)
      - modules/json: Requires json-c whish is not in the CentOS 6 repo
      - modules/jsonrpc-c: Requires json-c whish is not in the CentOS 6 repo
      - modules/ndb_redis: Requires hiredis which is not in the CentOS 6 repo
      - modules/peering: Requires radiusclient-ng which is not in the CentOS 6
        repo
      - modules_k/acc_radius: Requires radiusclient-ng which is not in the CentOS
        6 repo
      - modules_k/auth_radius: Required radiusclient-ng which is not in the
        CentOS 6 repo
      - modules_k/carrierroute: Requires libconfuse which is not in the CentOS 6
        repo
      - modules_k/db_oracle: Requires Oracle which is not in the CentOS 6 repo
        (and is closed-source)
      - modules_k/memcached: Module compilation appears to require an older
        version of libmemcached-devel than the one in the CentOS 6 repo
      - modules_k/mi_xmlrpc: Requires libxmlrpc-c3 which is not in the CentOS 6
        repo
      - modules_k/misc_radius: Requires radiusclient-ng which is not in the
        CentOS 6 repo
      - modules_k/osp: Requires OSP Toolkit which is not in the CentOS 6 repo

commit ab935110669af3bafd5bd69c3dd2e5b6f29e81b5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 20 00:52:08 2012 +0100

    pkg/kamailio/fedora/fc16: Tweak to the systemd scripts for F16

commit 71b1e5a80e99e55b97c7bcc2ffedce8b593d2f6c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sat May 19 23:08:40 2012 +0100

    pkg/kamailio/fedora/fc16: A couple of tweaks to the BoxGrinder appliance definitions

commit 94012e569a271bc965a92fd3d2e740dd8f11f03a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 18 10:09:40 2012 +0100

    pkg/kamailio/fedora/fc16: I forgot to update kamailio.spec when I changed the directory from f16 to fc16

commit 5dd4d619750685a1dff4d91ca60a5c60e42408be
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 18 10:01:56 2012 +0100

    pkg/kamailio/fedora: Reanmed f16 to fc16 to match the release tag in the RPM names

commit b3fac61868ae2c48db3dcd654f36c5d9a6c12f3f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 18 10:00:05 2012 +0100

    pkg/kamailio/fedora/f16: Fixed a couple of small issues with kamailio.spec
    
    - Put .fc16 into the release name (so you can tell which distribution
      the RPMs are for)
    - Added missing BuildRequires (gcc)

commit 14761b05d5050d9926a6d1674cc0d1dd197adb57
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 18 00:50:37 2012 +0100

    pkg/kamailio/fedora/f16: Added comments to .appl files to show which packages relate to which Kamailio components

commit bc0f09d24ce5d254d60cee1f342ad4ba6fda90bb
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 18 00:30:08 2012 +0100

    pkg/kamailio/fedora/f16: Added a couple of missing packages to kamailio test appliance

commit e9de053b2b08f7f65a8a6eded6a9c9152cd4a5e4
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 23:19:38 2012 +0100

    pkg/kamailio/fedora/f16: Improved VM/appliance naming in .appl files

commit c467017f858ff382fb44830b2073bebc88d7345b
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 23:11:52 2012 +0100

    pkg/kamailio/fedora/f16: Fixed some broken paths in kamailio.spec

commit e5a1c6fc0d773d0b12286cae309566685a3eb846
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 22:33:06 2012 +0100

    pkg/kamailio/fedora/f16: Added BoxGrinder appliance definition for a Fedora 16 Kamailio test machine
    
    - BoxGrinder automatically creates up-to-date CentOS/Fedora/RHEL
      appliances to a specified configuration.  See
      http://boxgrinder.org/ for more information.
    - This configuration is the minimum required to test F16 Kamailio
      3.3 RPMs.
    - To build the appliance:
      1) Install BoxGrinder: "yum install rubygem-boxgrinder-build" on
         Fedora
      2) Run BoxGrinder: "boxgrinder-build kamailio.appl"
    - If you run BoxGrinder on a 32-bit host you get a 32-bit appliance.
    - If you run BoxGrinder on a 64-bit host you get a 64-bit appliance
      by default.  You can create a 32-bit appliance on a 64-bit host by
      using the command: "setarch i386 boxgrinder-build kamailio.appl"
    - WARNING: This is an unsecure (no firewall, default password) and
      minimal appliance.  It is not suitable for actual deployment but
      it does have all of the Kamailio Fedora RPM dependencies installed.

commit f3171908e3ba5a4b7d6d3154991bdb66f783ceb1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 22:25:47 2012 +0100

    pkg/kamailio/fedora/f16: Added BoxGrinder appliance definition for a Fedora 16 Kamailio build machine
    
    - BoxGrinder automatically creates up-to-date CentOS/Fedora/RHEL
      appliances to a specified configuration.  See
      http://boxgrinder.org/ for more information.
    - This configuration is the minimum required to build F16 Kamailio
      3.3 RPMs.
    - To build the appliance:
      1) Install BoxGrinder: "yum install rubygem-boxgrinder-build" on
         Fedora
      2) Run BoxGrinder: "boxgrinder-build kamailio-build.appl"
    - If you run BoxGrinder on a 32-bit host you get a 32-bit appliance.
    - If you run BoxGrinder on a 64-bit host you get a 64-bit appliance
      by default.  You can create a 32-bit appliance on a 64-bit host by
      using the command: "setarch i386 boxgrinder-build kamailio-build.appl"

commit 037b263f3fb95c802de40b5a560b544287c40ad9
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 22:25:04 2012 +0100

    pkg/kamailio/fedora/f16: Updated changelog in kamailio.spec

commit 419c36a87fb522e4b33dcd31d550490b7d125ff4
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 22:08:53 2012 +0100

    pkg/kamailio/fedora: restructured so that the .spec, .service, .sysconfig files for different Fedora versions can be kept
    
    - Updated the release number in kamailio.spec to pre2

commit c6fe62a61ce059aafb15703e94fea358fab64378
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 15:40:02 2012 +0100

    modules_k/presence: More fixes to issues in notifier processes
    
    - Fixes to some small issues/race conditions found during soak and
      load testing.

commit 1a49037e15f13afec7524431cd2b4805134cfe20
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 15:37:17 2012 +0100

    modules_k/presence: Fixes to cleanup functions
    
    - The presentity cleanup function now uses fetch_rows
    - Fixed a problem with array indexing (only cleaned one row) in the
      active_watchers cleanup function for notifier processes

commit 162c7531cc414020f533a7a934fea0870f9cd503
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu May 17 15:32:19 2012 +0100

    modules_k/pua: Removed some unnecessary checks from pua_db.c

commit 62baa11eaf8cbcff70ccece9d12629d58a97a99a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 17 08:22:11 2012 +0200

    Makefile: version set to 3.3.0-pre2

commit 24ff0d9aa060d183fbe40b1fcb5910d60940585b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 17 08:19:10 2012 +0200

    rtpproxy: handle UPDATE in rtpproxy_manage()
    
    - UPDATE can carry SDB body
    - reported by Spencer Thomason

commit dcd67373212fe0a7e3694931b548fa5ccdf31500
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu May 17 09:07:13 2012 +0300

    modules/lcr: improved reloading speed of lcr_rule_target table

commit 7e6b743ceb4f6ec88b0d79389fd8f36b23ae63eb
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Wed May 16 18:23:08 2012 +0200

    RLS modules compiles on Debian

commit b440ae30edab6a36a9250617ca1419538bfca1e8
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Wed May 16 17:45:07 2012 +0200

    Add msrp to Standard Group

commit 2b9761703c4da297e64c49d457de2370e7381ddf
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Wed May 16 16:56:47 2012 +0200

    Add kcore Library to Makefile for mqueue

commit 505496b29942cd0e583d6d7527a09ddfd45cdc1e
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Wed May 16 16:53:41 2012 +0200

    Add msrp to Standard Group

commit fb3f37a0ba46bcb39a79a05465f512197a30da6b
Author: Jason Penton <jason.penton@smilecoms.com>
Date:   Tue May 15 13:46:35 2012 +0200

    xmlrpc: added support for nested structs in RPC reply via XMLRPC

commit a2fd243f1ada873e722acca1a9aaba1348b85f9b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue May 15 11:56:22 2012 +0300

    modules_k/domain:  exported domain_attrs_table module var
    
    - Thanks to Charles Chance for reporting.

commit d9f7383cf79047f1a497f3b66fe276fdabe9901a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon May 14 09:48:25 2012 +0200

    dialog(k): changed log level for a debug message from L_ERR to L_DBG

commit 0d6e14b1d66b34752634e083d2f9cdf39a3cd459
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 13 01:28:37 2012 +0100

    modules_k/presence: Fixed various issues with the notifier process found during soak testing

commit b882818b0e82b8b286cbc6cd0e5c986db5b9fb51
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 13 01:23:09 2012 +0100

    modules_k/presence: Use non-pooled connections (where supported) when using notifier processes
    
    - This helps with databases (such as PostgreSQL which is the only one that
      currently supports specifying non-pooled connections) that create a server
      process per client connection.

commit 08489826d65f372d0128b5e6c833c0ad8516f842
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 13 01:20:19 2012 +0100

    modules_k/pua: Tidied up the error handling in the SUBSCRIBE callback function
    
    - Also sorted out a mistake in the use of (start|end)_transaction

commit 126131202c76337103d67402940d0a2d6438e3e8
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 13 01:17:56 2012 +0100

    modules_k/pua: Use non-pooled connections in db only mode (where supported)
    
    - This helps with databases (such as PostgreSQL, which is the only one that
      currently supports specifying non-pooled connections) that create a server
      process per client connection.

commit aedf75c6a0a0d9253479530b3ad50783f12efd58
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 13 01:13:36 2012 +0100

    modules_k/rls: Use non-pooled connections when in DB only mode (where supported)
    
    - This helps with databases (such as PostgreSQL which is the only one that
      currently supports specifying non-pooled connections) that create a server
      process per client connection.
    - Fixed a couple of (end|abort)_transaction cases where dbmode was not checked.

commit 661795403a2a72cae30765e9f8cefa99c5228434
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 10 13:05:29 2012 +0200

    kamailio.cfg: simplified route[AUTH]
    
    - use auth_check(...) function which is combining www/proxy_auth()
      internally based on typical scenario provided by default cfg

commit 2d35cca6583a9ac556fe2dbeb9740d9fcf8e33e6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 10 13:04:09 2012 +0200

    auth_db(k): multi-domain fixes for auth_check(...)
    
    - check domain parts in from/to based on use_domain parameter

commit e2f654081831dc6e291d195dca1e9fd9ce53996a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed May 9 13:59:23 2012 +0100

    modules_k/presence: Fixed some issues to do with the notifier processes
    
    - Removal of expired presentities (on a timer) didn't work right
    - Removal of old presentities after "closed" NOTIFY didn't work in all cases
    - When the same subscriber was logged in twice only one client got certain
      notifications.

commit ea2fab792425bf30197d47ae08f806a908fc3681
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed May 9 13:55:01 2012 +0100

    modules_k/pua: Added (start|end|abort)_transaction calls (when in DB only mode and where supported)
    
    - Helps with some multi-server/process race hazards

commit bf2cb0f9a5fc6e3dff5194801cd90e15a8c193fd
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 9 10:22:17 2012 +0300

    modules/dialplan: dp_translate documentation improvement

commit 1d23563dd6ff1411c84ebb6961777b83c0efd0ef
Merge: 7665aef 7b97620
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 9 07:44:58 2012 +0300

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    Forgot to pull before commit.

commit 7665aefc966409588cca8e2a70d8a03e4d7a6fa1
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed May 9 07:42:14 2012 +0300

    modules_k/auth_radius:  fixed typo in README
    
    - Fixed authorization return code for authorization failed.  It should
      be 2 instead of 3.  Reported by Ricardo Martinez.

commit 7b976204796a2260775dfd094cc388bde0a63ea9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue May 8 19:35:29 2012 +0200

    kamctl: added 'address' command
    
    - handle records for address table of permissions module

commit 85df477b667ba1342f7f8123c169b8c4da072ffb
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue May 8 17:08:50 2012 +0100

    pkg/kamailio/fedora: removed unused variable

commit 8485536f1fd56127e38101d48d02afbacd5f4f6d
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue May 8 16:47:07 2012 +0100

    modules_k/presence: Dedicated notifier processes
    
    - This fixes a bug in presence where, when subs_db_mode is database
      only, under high loads with lots of presentity changes you can get
      several different NOTIFY requests sent with the same CSeq.
    - The dedicated notifier processes only work when in database only
      mode.
    - The dedicated notifier processes are enabled (with one notifier
      process) by default when in database only mode.
    - You can disable the dedicated notifier processes by setting the
      "notifier_processes" modparam to 0.
    - The notifier processes are executed on a timer and deal with a
      small amount of the outstanding notifications each time they run.
      By default (changeable through the "waitn_time" modparam) all
      dialogs are processed every five seconds.  This means it will take
      between 0 and five seconds (on average 2.5 seconds) between a
      presentity or dialog update occurring and a NOTIFY request being
      sent.

commit f2fee212edbe6c99fdbd8bced39a449b0e91d35b
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue May 8 16:42:22 2012 +0100

    modules_k/rls: Tidied up some of the DB query stuff in RLS

commit 627a9e402c8e9d1a1251ff7d40043f4f6c8fc2bf
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue May 8 00:00:48 2012 +0100

    pkg/kamailio/fedora: Updated Fedora pkg files to use systemd instead of SysV init

commit 54f6fa4ebbd079e52e4d57f0cab9ebee2e276a0e
Merge: 41e228e 37f7dfe
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Mon May 7 11:57:38 2012 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 41e228e5a2166d796a2b52a6c2fea31603088a18
Author: Carsten Bock <carsten@ng-voice.com>
Date:   Mon May 7 11:56:03 2012 +0200

    Bugfix: Ommit Username in uri, if AOR is empty.
    - Thanks to Gnaneshwar Gatla for reporting.

commit 37f7dfe0cc8a239ab7f9461c5c26f16cc24aa924
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon May 7 02:51:36 2012 +0100

    pkg/kamailio/fedora: Created .spec for building Kamailio on Fedora
    
    - Also updated pkg/kamailio/fedora/kamailio.init and added
      pkg/kamailio/fedora/kamailio.default.
    - Tested/developed on Fedora 16 x86_64 - but should work on other architectures.
    - The spec file builds all Kamailio 3.3.0 modules (modules/modules_k) except:
        - modules/auth_identity: Conflicts with TLS unless statically linked (which
          requires changes to Makefile and is impractical for generic RPM building).
        - modules/db_cassandra: Requires Thrift which is not in the F16 repo.
        - modules/iptrtpproxy: Needs local copy of iptables source to build
          (impractical for generic RPM building).
        - modules_k/db_oracle: Requires Oracle which is not in the F16 repo
          (and is closed-source).
        - modules_k/memcached: Module compilation appears to require an older
          version of libmemcached-devel than the one in the F16 repo.
        - modules_k/mi_xmlrpc: The F16 repo contains an unsupported version of
          libxmlrpc-c3, and there is an compilation error due to the module code
          using an unknown type ('TString').
        - modules_k/osp: Requires OSP Toolkit which is not in the F16 repo.
    - I plan to update this .spec in a couple of weeks when Fedora 17 is released. I
      will add modules/db_cassandra and modules_k/osp if Fedora 17 contains the
      right versions of Thrift and OSP Toolkit.

commit fe10a2ef9d68b646885ccaa57052a7bf85fcab9e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 6 18:40:35 2012 +0100

    modules_k/purple: Updated to compile on Fedora 16
    
    - Updated Makefile to use pkg-config so that it selects the correct
      libraries/versions.
    - Added missing include for glib.h to a few files.  Not sure why this is
      needed now when it wasn't before - but a quick search has shown it should
      continue to work with older glib versions too.

commit a79afc381447eb0fa84f4ff73b4470a1179945bb
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Sun May 6 18:37:01 2012 +0100

    modules_k/auth_identity: Updated to compile on Fedora 16
    
    - auth_http.c and auth_identity.c include a header file that does not exist
      in the libcurl 7.21.7 RPMS.  A quick search around online has indicated
      that this include shouldn't have been needed anyway.

commit 275c8a77b6f09aabf428d91c9c22ab5bcfce8d4e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 4 18:21:47 2012 +0100

    modules_k/rls: Added checks for NULL results from DB queries

commit 0019761893c5264fce3dec02e90e672aedaa5ee9
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 4 18:18:58 2012 +0100

    modules_k/pua: Fixed memory leak and added checks for NULL results being returned from database queries

commit 79e59ec116c14d3416803736a920d9ac478c6055
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 4 18:14:06 2012 +0100

    lib/srdb1: Changed OP_NEQ to use ANSI standard <>
    
    - OP_NEQ was "!=" which works with many, but not all, SQL databases.
    - One database this doesn't work with is PostgreSQL.
    - <> is the standard and all databases should support it.

commit b26e588e0af55a2304027327559b1d516eca7d74
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri May 4 18:12:33 2012 +0100

    lib/srdb1/schema: Fixed typo in description field for extra_headers in silo.xml
    
    - Fix by Hugh Waite @ Crocodile RCS

commit f55f4dcd848547fb89f9d8c51bdb20f5544087bd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 4 16:35:40 2012 +0200

    kamailio.cfg: set version to 3.3 in the top comments
    
    - GRUU is disabled via registrar modparam to be coherent with the logi
      in config, as GRUU would require lookup for requests within dialog

commit 1984f288bcc74a0287513ce69490a38cfe16971f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 4 16:35:04 2012 +0200

    usrloc(k): set ruid for contacts added via MI command

commit 65247ededd6776d96cafab9ddd934136171feaf7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 4 16:13:06 2012 +0200

    kamctl: avoid including .ctlbase many times
    
    - resulted in duplicated help output
    - added shortcuts for uptime and stats
    - aliased mi to fifo command

commit 8a5226f5ffb8508abdffbf342ff4b36ec321d39f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri May 4 13:58:04 2012 +0200

    dialog(k): remove second useless search of dlg by callid
    
    - a second search was performed using to-tag as part of the hashing
      function, but it was never used to build the hash id

commit cf079a2ee0d4e234fb30822a076cba2451409e91
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri May 4 12:17:56 2012 +0300

    modules_k/presence Removed unused refresh_watcher() function

commit ca7f45d98faea9479b86e9206c4e2923a009782a
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri May 4 11:57:27 2012 +0300

    modules_k/presence Fixed refresh_watcher function

commit 03ddbac19eefc239c3d4b91377458a2e8106855b
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri May 4 11:45:05 2012 +0300

    modules_k/dialog Fixed 2 macros for dialog state with same value

commit 27a338bb2d0b3665054c1b5bbc6a2832b15e0206
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu May 3 12:15:49 2012 +0200

    msilo(k): avoid potential pkg_malloc(0) if no extra hdrs are available

commit b5e1edb80c459e09b8097c45643c6afc44ab2ed4
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed May 2 17:55:50 2012 +0100

    modules_k/rls: Tidied up the use of (start|end|abort)_transaction

commit e09bc9d58b472e2becdba2b5745d26b703018b9a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed May 2 17:48:47 2012 +0100

    modules_k/rls: Updated module documentation

commit 765a538aa9d5e2d56cf980ad6adab17d0a1fbc73
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed May 2 17:43:14 2012 +0100

    modules/db_postgres: Retries are disabled within transactions
    
    - You don't want automatic retries in the database when inside a
      transaction (that is after an SQL BEGIN).  This is because if the
      database connection fails the outstanding operations will be rolled
      back.  If you automatically connect and retry the failed operation
      it will be acting on a database table/rows that are in a different
      state from which it expects.
    - This change disables retries on any SQL operations between a
      start_transaction and an (end|abort)_transaction.
    - Other database operations are unaffected.

commit c4ee278460bdd9c12962d77ebafcab511a203e43
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed May 2 17:40:29 2012 +0100

    modules/db_postgres: Fixed bug in insert/delete/update operations where success is returned when there are some errors
    
    - Some PostgreSQL errors are only identified when the store_result()
      function is called.  Even if store_result() returns < 0 (indicating
      an error has occurred) the insert/delete/update functions can still
      return success.

commit cd1ff5364786f8b32058921be6f3216b48e34792
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed May 2 18:42:55 2012 +0300

    modules_k/presence Fixed wrong cseq and wrong expires bugs
    
    1. Wrong cseq bug: happened in subs_db_mode!= DB_ONLY when generating
    Notify with expires=0 that was not triggered by a received Subscribe
    
    2. Problem with expires raported in Notify message. There was a static
    buffer used twice when building the extra headers for Notify leading to
    expires parameter value always having last digits '70' (the value of
    Max-Forwards).

commit 1cd9a9c32a323e6811e1d536566ab88fa93625e4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 2 14:21:23 2012 +0200

    core: log message about dlflags from modules was made notice instead of warning

commit 08e0fdec38269a5ee5aa628deefcb24d49d011c6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 2 00:37:51 2012 +0200

    Makefile: version set to 3.3.0-pre1
    
    - pre-release phase reflected in verson string

commit c0edf675841f4c516afe53fff5c197841cf221bf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed May 2 00:36:14 2012 +0200

    dialog(k): readme updated with latest params and functions
    
    - documented params ka_timer and ka_interval as well as function
      dlg_set_property(...)

commit 1a91ac3475ad24a75de17801181d2cb673bd6d82
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue May 1 14:22:27 2012 +0100

    modules_k/rls: Fixed broken SQL query in RLS
    
    - Fix by Hugh Waite @ Crocodile RCS

commit 29f0672320f070e1e718a4af905ace2d0e4671fa
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue May 1 14:20:51 2012 +0100

    core: Made subst diagnostic message at startup INFO instead of ERR

commit 6362f26d4bac5258f949d78ee4a3b26c997cb476
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Apr 30 23:24:19 2012 +0300

    lib/srdb1/schema/lcr_rule.xml: upgraded version number
    
    - When request_uri column was added, version number was not incremented
      in schema.

commit 5194b4c7776d24b88be51f799e67af7ddaf3da1a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 29 15:33:18 2012 +0200

    dialog(k): propagate internal flags from context to dlg structure
    
    - moved condition on DLG_STATE_CONFIRMED in request handling, as it is
      set for ACK processing - related to keep-alive initialization for dlg

commit a3db4686f286e4f04a416b84423d355d2ad69056
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 29 15:30:28 2012 +0200

    registrar(k): realm prefix initialized to NULL instead of empty string
    
    - it refers inside a cfg structure and might be the reason for sigbus on
      solaris/sparc
    - anyhow, it avoids an strlen() over empty string, behaviour being the
      same as before

commit 4f5f38047ee6d2b969428bb21a51811e82ccac98
Author: Claudio Furrer <elcaio@gmail.com>
Date:   Thu Apr 26 18:52:31 2012 -0300

    pkg/gentoo: Added ebuild v3.2.3

commit caee2ded8d9b39adcf2f5ad91b05e6646941d8fa
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Thu Apr 26 00:54:25 2012 +0200

    acc: Improve grammar and stress non-existence of CDR database storage.

commit c618a65e1941dc1ae259f97d264dd99a00aaf097
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 25 14:54:31 2012 +0300

    modules/sipcapture: Fixed crash in case contact was "*"
    (cherry picked from commit 11ca33836fdd33d7c3d36c4f1acc6c6782edfb5d)

commit 41453eab823500cfc57abd404ecffeb3ed7f01bc
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Apr 25 14:55:54 2012 +0300

    modules_k/presence Safety check for malformed Subscribe
    
    	Subscribe with header 'Contact: *' caused crash in presence.

commit 167714254cca8cb911f2911ba557744ecd6d0d73
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Apr 24 10:58:22 2012 +0100

    modules_k/rls: Updated to use new (start|end|abort)_transaction DB APIs instead of the original db_(begin|commit|rollback)

commit d544b24a6c844b06edd5da9ee1be9d6f2aafcb8d
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Apr 24 10:53:24 2012 +0100

    modules/db_postgres: Added implementation of (start|end|abort)_transaction DB APIs

commit aca1c20d91878991b0a0bef4ae8bef3da89527d1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Apr 24 10:48:39 2012 +0100

    lib/srdb1: Converted db_(begin|end|rollback) to proper DB API functions

commit 0af556b85415533104892b8654b53b105c8b8aa2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 24 10:19:34 2012 +0200

    msilo(k): updated table version value to match db schema

commit 3788a89f24f034c77db743d196745e0a8b2458d4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 23 22:26:42 2012 +0200

    msilo(k): added callid and status columns
    
    - needed to eventually apply patch from FS#211 for notifying on message
      delivery
    - not in use right now, time version increased and db creation scripts
      were regenerated

commit 7d013ceb1e9e84c8579bdba17ecd9d7f249c8482
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 23 22:10:42 2012 +0200

    dialg(k): possibility to send keep alives for dialogs
    
    - keepalives are OPTIONS requests
    - if keepalive request get 408 ot 481, dialog is timed out after 10 secs

commit 2e1a9d552488908cb92574581062aa2b702134ca
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 22 20:49:46 2012 +0200

    registrar(k): new parameter xavp_rcd - store details of UL record
    
    - if set, the internal ruid field will be returned as inner xavp to it

commit 7945158083b5f7b34bd3f9b2b754c459293ba428
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 19:28:39 2012 +0100

    modules_k/presence: Updated documentation for "cleanup" MI command

commit db231b3985c2fae1b8cf94e92f6ff9965a7da1b5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 19:27:50 2012 +0100

    modules_k/presence: Updated presence "cleanup" MI command to clean active_watchers table as well

commit c740f0fca228376159895874a2534ebe5c0d8df1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 19:27:21 2012 +0100

    modules_k/rls: Documented new "rls_cleanup" MI command

commit 5ae271e248313fc1a3870cda90a8f3b128f0c105
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 19:26:44 2012 +0100

    modules_k/pua: Documented new "pua_cleanup" MI command

commit aca1f7ac71788a947be3d70a21773f5f94c81694
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 18:55:27 2012 +0100

    modules_k/pua: Added MI command to "clean" the pua table
    
    - This is similar to the clean MI commands in presence and RLS
    - Useful on multi-server systems where you don't want to run the timers
      and have each Kamailio instance try and clean.  The MI command allows
      you to kick of a clean on a specific server as required.

commit bdaeb24dd8fbc3f2bb5db2c14d0ea9741efacb8c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 17:32:36 2012 +0100

    modules_k/rls: Fixed issues with new RLS MI command
    
    - Renamed "cleanup" to "rls_cleanup" so it doesn't conflict with the presence
      MI command of the same name.
    - I'd forgotton to register the MI commands in mod_init()

commit 7fc5aa2c050379063212c4bb5f06697e8a97c665
Author: Henning Westerholt <hw@kamailio.org>
Date:   Mon Apr 23 18:21:46 2012 +0200

    userblacklist(k): fix some doc errors, pointed out from Daniel Vukicevic, daniel at vukicevic dot com

commit d73e5ea1d816059c39f0d951019337b1161067bf
Merge: 1fbb957 c47d391
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 17:17:20 2012 +0100

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      modules/lcr: Add support for R-URI matching.

commit 1fbb9573ba15a9164e9742380bdd597df68df1d3
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 17:15:34 2012 +0100

    modules_k/rls: Added MI command to "clean" the rlsubs and rlpres entries
    
    - This is similar to the clean MI command in presence
    - Useful on multi-server systems where you don't want to run the timers
      and have each Kamailio instance try and clean.  The MI command allows
      you to kick of a clean on a specific server as required.

commit c47d39153c52316d02edebc13669d5f55f5a418e
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Mon Apr 23 18:08:39 2012 +0200

    modules/lcr: Add support for R-URI matching.
    
    - An additional request_uri column has been introduced. If other than
      NULL, it also needs to match beside prefix and from_uri in order
      for the rule to be selected.

commit 6583dd786969c8ae6b5d84d263530418b8f28cf0
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 16:32:36 2012 +0100

    lib/srdb1/schema, modules_k/presence, utils/kamctl: Added another field to active_watchers DB
    
    - Added the updated_winfo field (part of the presence notifier
      fix) now to get in before the freeze.
    - Also updated active_watchers table version.

commit 732892b20b5639d698c195d4e742226415fe17f7
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 12:39:53 2012 +0100

    modules/db_postgres: Replaced init_nopool() with init2()

commit b5cc82d5251b933e0e6675b7ab8d9088e45b79e1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 12:38:50 2012 +0100

    modules/db_mysql, modules_k/db_oracle, modules_k/db_sqlite, modules_k/db_unixodbc: Reverted changes for non-pooled connections as no longer needed
    
    - The original db_do_init() function is available so these modules
      don't need to be changed.

commit 6eb22c8da9d3b41668bdf74f4064992066f38022
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 12:37:19 2012 +0100

    lib/srdb1: Cleaner implementation of non-pooled connections
    
    - Uses a new db_do_init2() function that takes a parameter to indicate
      pooling.
    - This leaves the parameters for db_do_init() unchanged.

commit 7aa9323534c67f0c46597541c268da9abc6f86c0
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 23 11:58:40 2012 +0100

    lib/srdb1/schema, modules_k/rls, utils/kamctl: Updated rls_watchers table version number

commit adc585e48f6a56cc96fc10559a3327c921b6736b
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Sun Apr 22 13:06:34 2012 +0200

    Fix various spelling errors.
    
    - Credits to Victor Seva for providing the patch.

commit 54d36ac52b0d5ea64abdb6fdb7f88a2ae2be5fd5
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Apr 21 20:17:40 2012 +0300

    modules_k/permissions: added allow_trusted() transport protocol value "any"
    
    - Transport protocol argument of allow_trusted() function call
      can now have value "any" meaning that any transport protocol is
      acceptable.

commit 3e6570dae9cf41a929abfc39b8b2a0cdafec49b9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Apr 20 19:29:15 2012 +0300

    modules/lcr: same gateway may now belong all lcr instances
    - Gateways with special lcr instance id 0 belong to all normal lcr
      instances.

commit 09a79d78300c5f510278b5417da45a3999d27b9b
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 17:20:17 2012 +0100

    modules/db_mysql, modules_k/db_oracle, modules_k/db_sqlite, modules_k/db_unixodbc: Updated to work with latest lib/srdb1
    
    - db_do_init() in lib/srdb1 has an extra parameter to allow a unique
      (non-pooled) connection to be created.
    - These DB modules do not yet support non-pooled connections so the
      init functions in the modules just call db_do_init() with the new
      parameter set to 0.

commit a03955fff9ec2d5cd1f4f668d387cb8df926e1eb
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 17:18:57 2012 +0100

    modules/db_postgres: Added support for creating new non-pooled DB connections
    
    - There is a new dbf.init_nopool() function to be used instead of the
      current dbf.init() when you want a unique (non-pooled) connection.

commit b17945f76076114fbab5f2ee198daae5c7b96950
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 17:17:24 2012 +0100

    lib/srdb1: Changed the creation of non-pooled DB connections from being URL based to function (C-code) based

commit ffb5799a51f6e2532fc1636d653d89ee3887bbc9
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 16:27:03 2012 +0100

    lib/srdb1/schema, utils/kamctl: Updated db schemas for upcoming presence notifier development
    
    - Added the new column to active_watchers so that the schemas don't
      change after the code freeze on Monday.

commit 030273ffbc51964df4b35f4729ee3be0e32ef63f
Merge: d5b8c4f 8a22bf5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 16:12:29 2012 +0100

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      dialog(k): table version in DB is 7
      htable(k): Implement "delete" mi/rpc function.
      tm: reset T if t_continue() resumes a canceled transaction

commit d5b8c4f9091646597341e0d8dc08e2c3930f713a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 16:11:48 2012 +0100

    modules_k/rls: Updated module documentation and changed use of BEGIN/COMMIT so it only happens in database only mode

commit 8a22bf5bf2b5fe3c65a214f071159107427263a8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 20 16:14:18 2012 +0200

    dialog(k): table version in DB is 7
    
    - updated by Timo Reimann, but sources was still using 6

commit 385befa3d7f97ed4dc5f6724ec5f88eea61f369d
Merge: 2f3ff59 00193f5
Author: Andreas Granig <agranig@sipwise.com>
Date:   Fri Apr 20 16:01:53 2012 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 2f3ff59394450fa76cdbb46db4f8f605d6ad471e
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Fri Apr 20 15:59:28 2012 +0200

    htable(k): Implement "delete" mi/rpc function.
    
    - Lets you delete specific keys from an htable via the MI or
      RPC interface.

commit 00193f5e1f0e9e12b55c50d33eaf6f3d32e8bb92
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 20 15:35:49 2012 +0200

    tm: reset T if t_continue() resumes a canceled transaction
    
    - when the suspended transaction was already canceled, and t_continue
      was executed before transaction was destroyed, global variable T was
      left set, causing an extra unref by post script callback

commit 0220bad8ca1a22d212324102d489bb22d3076abd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 14:28:18 2012 +0100

    modules_k/pua: Fixed bug in pua_update_contact() in DB only mode
    
    - This was updating the contact column when it should have been
      updating the remote_contact column.

commit c5a51e4236498cfe3ca31c8aae96d3b422a9da23
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 14:15:36 2012 +0100

    modules/db_postgres: Fixed copy-and-paste error in module documentation

commit f71bdc3cbdf5acdf243217778e4159f2e6ab341d
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 14:00:22 2012 +0100

    modules_k/rls: Used db_begin() and db_commit() around blocks of related DB queries and updates
    
    - This makes these related sets of DB queries a single transaction.  As Klaus
      pointed out this if you don't do this you can get inconsistencies when using
      multiple presence servers.

commit 5da9a4e773d2c3c625a870dd4639408d99676d69
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 13:56:37 2012 +0100

    lib/srdb1: Added db_begin()/db_commit()/db_rollback() wrapper functions
    
    - These are helper functions to enable blocks of DB queries/updates in
      modules to be handled as a single transaction.
    - These functions wrap db_raw_query() and only perform the BEGIN/COMMIT/
      ROLLBACK when the db module supports raw_query().

commit 4d99664a9bad77988ee7b8b386820d41fa919a6d
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Fri Apr 20 14:06:38 2012 +0200

    htable(k): Fix stale lock on errors.

commit 6d33ee03ffbd963bd248ad800eee3378d2fdf9c0
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Apr 20 11:43:41 2012 +0100

    modules_k/rls: RLS does not send NOTIFY requests when rls_watchers are cleaned in DB only mode
    
    - Fixed now.  The DB only clean function sets the updated flag.  The notifier
      process will detect that a record needs updated (and that its expires time
      is in the past) and send a terminated-state NOTIFY and delete the record.

commit 171f560f768b43e140c24b6cc4823a92f13b2f05
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 20 09:42:39 2012 +0200

    presence_xml: updates to docs to refer to embedded xcap server

commit ab36b2b10e2f99ab584ec916bccc2a40c4fa394f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 20 09:28:44 2012 +0200

    xcap_client: set table version to 4
    
    - reported by Gnaneshwar Gatla

commit 039c72b1f01f26e7a873e4db9985ad5d4d9178c9
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 19 18:11:33 2012 +0100

    lib/srdb1/schema, utils/kamctl: Updated DB schemas for presence and RLS
    
    - New fields for from_user and from_domain as these may be different
      to the watcher_user and watcher_domain now.

commit 4fc8134ccc57957c96530600ddcf613769e0d2bd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 19 18:05:59 2012 +0100

    modules/app_lua: Updated to handle optional parameters to handle_subscribe() and rls_handle_subscribe()

commit b90adb0da092ebf651a88b9cd1a21b3ae0cb8251
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 19 18:03:54 2012 +0100

    modules_k/rls: Updated rls_handle_subscribe() so that an optional parameter can be used to specify watcher URI
    
    - This is useful when you want to use a URI from another SIP header
      (for example, P-Asserted-Identity:) as the watcher URI.
    - When the parameter is not used the From: URI is used as the
      watcher URI.

commit 23455ed6e08cecd5fe7b22cdb3acd2440435f5b1
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 19 17:59:26 2012 +0100

    modules_k/presence_xml: Updated to use watcher_user and watcher_domain fields in subs_t
    
    - Currently uses the from_user and from_domain fields which are no
      longer correct.

commit 63ab6b482bf2be1fb706dfe4ff0dd27caf79a26f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 19 17:57:00 2012 +0100

    modules_k/presence: Updated handle_subscribe() so that an optional parameter can be used to specify watcher URI
    
    - This means that you can use URIs from different SIP headers
      (for example, P-Asserted-Identity:) as the watcher URI.
    - If the parameter to handle_subscribe() is not use the From:
      URI is used as the watcher URI.

commit 4bdd3b99e2b22a298195cf65be28ffb95d7ba8a1
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Thu Apr 19 18:07:58 2012 +0200

    rtpproxy: Updated README from xml doc.

commit c4ea425076504248e1fd8f9022b3bf56c2293a83
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Thu Apr 19 17:42:52 2012 +0200

    rtpproxy(k): Send Via branch to rtpproxy
    
    - Introduce force/unforce options "1" and "2" to optionally
      send first or second Via branch to rtpproxy, respectively.
      This can be used to stop only a specific branch in the rtp
      proxy, which is needed for complex serial looping scenarios
      where in a race condition a new branch is processed before
      a previous branch is cancelled, where the cancel would whipe
      the whole call from the rtp proxy instead of just the old
      branch, causing the subsequent rtp proxy lookup to fail.

commit a075952dd0970b3ab5f7e403c88f954c2743ce80
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Thu Apr 19 17:38:29 2012 +0200

    core: Move parse_via_header to correct place.
    
    - Move parse_via_header(...) from select_core to parser
      to avoid compiler warnings when accessing it from modules.

commit c642e5049b8b5a5d3209b8d295207831512160ed
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 19 10:53:49 2012 +0200

    usrloc(k): option to start own timer processes
    
    - new parameter timer_procs
    - default is 0, meaning the core timer process is used (like so far)
    - if >0, a number of basic sync timers are started
    - each own timer will take care of syncronizing the usrloc records,
      selecting specific slots in the internal hash table (load balancing
      mechanism) - this mode is useful for handling lot of usrloc records

commit 49e10148a00bf8d6427326fdffd07121a916c807
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Apr 19 10:52:02 2012 +0200

    core: added support for basic timer + interval sync
    
    - new functions to start basic timers that will sync the interval after
      executing the task. Useful if the task is taking long, the process
      will skip the delay in the sleep value

commit d4ed4771938ac490a4df2b320236b7b0d462a636
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 18 19:54:41 2012 +0200

    core: added timeval field inside sip_msg_t
    
    - new parameter msg_time to set the timeval value at receive time (1
      (on) by default, set to 0 to disable)
    - the value is set automatically at received time based if msg_time=1 or
      first time when it is accessed
    - the field should bring coherence regarting time of the message - it
      should be the same no matter where is processed

commit 9654c70212db15f77beedbb874f3e153fdeaf41b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 18 19:52:22 2012 +0200

    pv: time PVs use the value from sip_msg_t structure
    
    - it solves the time of the message coherence, by returning same value,
      no matter where is used
    - reported by Klaus Darilion

commit c3f2b636716928ca234541a5a0835ccb6ca7b302
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 18 19:49:55 2012 +0200

    usrloc(k): use correct domain column index
    
    - issue added by previous commit, reported by Juha Heinanen

commit 0700573b500da94ca839c09f7c1f68768448114b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 18 14:03:10 2012 +0200

    parser: removed accept_disposition hdr hook from sip_msg_t
    
    - it was not used at all, just hooked and cloned for no good reason

commit 402fa77ed738e938c49ddf044feb98bc70b8c16c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:36:02 2012 +0100

    lib/srdb1, utils/kamctl: Updated rls_watchers table schema for RLS notifier changes

commit 08decddbc35a3f50d757e20f1ef40ee2301560d6
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:35:23 2012 +0100

    modules_k/presence: Added new field to subs_t structure for the RLS notifier changes

commit dff68160e4decc43f2da8948ea03bc4d469ded96
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:29:32 2012 +0100

    modules_k/rls: RLS full-state NOTIFY requests now sent by notifier process(es)
    
    - Also modified the notifier process stuff to only work when in
      DB only mode.  This is because the full-state handling stuff
      in the notifier processes relies on DB only mode.
    - Leaving the full-state stuff outside of the notifier process
      didn't work because there was a row update race between the
      notifier process and non-notifier process when full-state and non-
      full-state NOTIFY requests were generated at the same time.
    - This ensures that (with default options) you get at most one NOTIFY
      (or set of NOTIFYs when splitting large NOTIFYs is enabled) per
      5s per watcher from RLS.
    - It also helps spread out the NOTIFY generation load more evenly
      across time.

commit 909c6401eab124789b13c09954c33f0ce628678f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:24:48 2012 +0100

    modules_k/rls: rls_presentity table version checked on wrong DB connection

commit fb6308b6cfc558190fac67050b65f3a6fcc73cdb
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:23:59 2012 +0100

    modules_k/rls: Some diagnostics at the wrong level

commit c4a4a94065374fd182fc13374a0c520afa410f45
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:18:45 2012 +0100

    modules_k/rls: srand() called frequently
    
    - srand() was used to ensure that the instance IDs for use in
      RLS NOTIFY bodies were random, but consistent.
    - The instance ID needs to be unique within a resource node in the
      NOTIFY body.  It does not have to be unique locally.  Although
      it needs to be unique it also needs to be repeatable as the same
      resource instance needs the same ID in subsequent NOTIFY requests.
    - You will only get multiple instances for a resource when the
      back-end SUBSCRIBEs from RLS are forked.  Kamailio does not support
      this at the moment (the callback function in pua/send_subscribe.c
      is only called for the first final response) so we will only ever
      have one instance per resource.
    - Because there is only one instance per resource the instance ID
      can just be a fixed string.  This will need to be changed if/when
      forking of back-end SUBSCRIBEs from PUA is supported.

commit 1b87bac8d5c56909ee4ae10f88dd8c6292b53e8a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 18 17:15:10 2012 +0100

    modules_k/rls: Fixed memory leak
    
    - The pkg memory allocated for route-sets when sendin NOTIFY requests
      was never freed.
    - Fixed by Paul Pankhurst @ Crocodile RCS

commit db07a8e381990d835711e978a5bf711186495cdf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 23:00:50 2012 +0200

    pua_reginfo: propoer call-id buffer when constructing XML for reginfo
    
    - patch by Stefan Sayer, FS#212

commit c4be935b40b23b87b321fd604e761332bb07b8f8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 22:55:35 2012 +0200

    pua_reginfo: fix for state of the registration during unregister
    
    - when unregistering a single contact, the state of the registration may
      be incorrectly reported .
    - fix of a small inefficiency of repeatedly  calling time(2) in the same function.
    - patch by Stefan Sayer, FS#213

commit a15428e688049e7ef49174a2e24cbf49eb7a7cad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 22:40:06 2012 +0200

    maxfwd(k): return -2 (false) if MF header cannot be processed
    
    - reported by Ladislav Jurak, FS#214

commit 45a01f51e2393fac6883956739a6a41859076323
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 11:51:15 2012 +0200

    registrar(k): store +sip.instance always in contact structure
    
    - if it is provided, keep it, since it used either for gruu or outbound
      extensions
    - mirror reg-id to contact in 200ok if provided in REGISTER
    - updated the prototype of the usrloc function to match by instance

commit 221073eb54dbf9a29d8b68d6af86c3bbccdc2b17
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 11:48:46 2012 +0200

    usrloc(k): handle reg-id Contact parameter defined by RFC5626
    
    - if reg-id is given in the Contact header, use it to match the usrloc
      record along with +sip.instance

commit 6927fcf7bb48d88a708028a0c877a050150ef05d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 11:47:34 2012 +0200

    srdb1: new column reg_id to location and aliases tables
    
    - stores the value of reg-id Contact parameter defined by RFC5626

commit 506be363fa75b04540f724644fabb7f48cd60eab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 17 00:16:52 2012 +0200

    parser: added hook for reg-id param of Contact header

commit 41e57ff7c446ec60939d6ea25c33e9d80be068c6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 16 23:42:39 2012 +0200

    kcore: added outbound tag to Supported hdr parser

commit 1ff39475221c823a3da2cc02b10121771137b780
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 16 23:05:40 2012 +0200

    registrar(k): add gruu parameters only when supported
    
    - check Supported header for gruu tag in order to ad pub/temp-gruu to
      the Contact header in 200ok

commit 5d03575bd73ee80e794a7f398973f84ceed63681
Author: Andreas Granig <agranig@sipwise.com>
Date:   Mon Apr 16 16:47:27 2012 +0200

    tmrec(k): fix week-day handling.
    
    - days of week need an offset of 1.

commit 40ddcf88df9ef71bba7c182b7a1d76b559645628
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 16 14:03:14 2012 +0200

    debugger: safe wrapper around cfg name
    
    - some actions can be executed from inside the code, with no cfg file
      name attached to it -- that makes debugger crash on solaris while
      printing executed action details
    - reported by Nathaniel

commit b5d6bb38c3e5d4308e373afe2c4cac5bf1410fb6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 16 13:46:40 2012 +0200

    fixed compile time warnings
    
    - init vars and remove unused ones

commit 2e8264a3edb70cf08071b82915bcd2a40aec0cde
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 15 22:44:52 2012 +0200

    usrloc(k): corrected non-gruu db insert with multidomain
    
    - if +sip.instance parameter in contact was missing and multidomain was
      enabled, then inserted values didn't match proper columns
    - reported by Juha Heinanen

commit fc7090be626304145813e90eb6a86f2200db31f0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 15 22:36:14 2012 +0200

    lib/srdb1: allow null for instance column in location

commit a7dce0e68164ea94c18f950bb862bce7416e3fdf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 15 12:23:02 2012 +0200

    Makefile: version set to 3.3.0-dev8

commit f420472cac12459b1c7f8d9d9e45f46f1387484f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 15 12:17:21 2012 +0200

    registrar(k): fix of lookup condition for non-gruu addresses
    
    - reported by Juha Heinanen

commit 0a8ad0ac8f5b8c125a3cc3a0074386409898cf10
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Apr 15 12:15:17 2012 +0200

    siputils: new function is_gruu(uri)
    
    - wrapper function to test quickly if a SIP URI indicates a GRUU
      address or not

commit 21f1a3783ca167ece11658ee148108636b434e27
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 19:28:37 2012 +0200

    registrar(k): added new parameter gruu_enabled
    
    - makes possible to turn off GRUU handling for REGISTER

commit 2fee0880792d97413a288246e49a08d29446802b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 15:23:44 2012 +0200

    registrar(k): fixed warning introduced in previous commit

commit 26b75ccd46643fcf022b3f0d0260087228763b2d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 14:51:20 2012 +0200

    lib/srdb1: extended definitions for location and aliases tables
    
    - new columns ruid and instance to deal with GRUU RFC5627

commit fd9fe6e683ca3c446daa043035072a379f9b11bb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 14:45:06 2012 +0200

    registrar(k): added initial support for GRUU - RFC 5627
    
    - save() and lookup() recognize now the GRUU cases
    - save() generates both pub-gruu and temp-gruu, sending them in the
      Contact headers for 200 reply
    - lookup() will match on GRUU if it is the case, resulting to a Contact
      address only (no additional branches)

commit 05823430e25f8edb4361c6bf3da3d8cc93be9abf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 14:42:23 2012 +0200

    usrloc(k): new columns to store +sip.instance in record id
    
    - each usrloc contact has now an unique internal id, generated via SRUID
    - the unique id is stored in 'ruid' field
    - if the Contact header has +sip.instance parameter (GRUU RFC5627),
      store it in field 'instance'
    - database schema was updated to reflect the two new columns
    - more functions were exported via API to deal with GRUU cases

commit c199ac2a4a8189ddd0d6cfb505344a3a3d3281cf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 14:41:32 2012 +0200

    rr(k): don't match as myself URI with gr parameter
    
    - they point to a location contact

commit 74f727eb90ad7d1a7e639da17887bc665e4b64b0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 14:40:47 2012 +0200

    lib/kcore: parse Supported header recognize gruu

commit 1dd730471dd0620d02b08ce69648c94fc0943818
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 13 14:38:48 2012 +0200

    parser: added hook to gr (gruu) parameter in sip_uri_t
    
    - gr is specified by GRUU RFC5627

commit 7139fbd5d882595ff11af298918d268612ad8832
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 11 13:33:59 2012 +0200

    db_cluster: allow permanent inactive connection
    
    - activation time has to be set to 0 (to be possible via rpc commands)
    - fix check of activation time based on inactive_interval parameter,
      reported by Juah Heinanen

commit 5b8b34dc40d1e93507d82cedbc19d43a0c78c5a1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 11 13:21:34 2012 +0200

    lib/srutils: reinit root part of sruid when counter overflows
    
    - avoid in this way very unlikely UIDs overlapping (when a pid has to
      give more than 2^32 UIDs)

commit 6b296c86e0eed99ef62b94e2ce076558d5c77df5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 11 12:11:13 2012 +0200

    dialog(k): if h_id overflows unsigned int, start from 1 again

commit 5e61c68843c7be327f77f2f5adae6cd2efc40263
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 11 14:18:04 2012 +0300

    modules/sipcapture: Fixed hep offset calculation
    
    Problem reported by dkovik.

commit 9ef3e0e6ae997b31cb66310c3aaf4e4970699760
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 11 11:03:50 2012 +0200

    db_cluster: fixed the return of a valid connection
    
    - a condition was not properly inverted in a previous commit
    - reported by Juha Heinanen

commit 51ac9c19d123a36c72f2f9a655be9caec2710f1b
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Apr 11 11:02:15 2012 +0300

    modules/lcr:  print debug message in case from uri regex matching fails

commit d54bde96285f8b0d24f00223da96e8526143a298
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 10 23:23:12 2012 +0200

    ndb_redis: support for redis array reply
    
    - replies from redis holding arrays can be accessed now from config
      file, the values in array being accessible via index
    - the size of the array is give as a new property of the reply
    - patch by Vicente Hernando

commit 3d6570ce356247813d28939c90a899222cdd1719
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 10 19:55:25 2012 +0200

    db_cluster: allow empty array in a priority slot

commit 37812cef5fb1ee2022592de24bbae48352e17524
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Apr 10 18:05:10 2012 +0100

    modules_k/presence: RFC 4827 (presence hard-state) support
    
    - Hard-state presence documents are stored as pidf-manipulation
      documents in the integrated XCAP server.
    - When one of these documents is put/deleted/changed it can
      be "published" using the new pres_update_presentity() exported
      function.
    - Because the original document is in XCAP a client can download
      it and manipulate it directly.
    - Hard-state documents have an expiry time of -1 and never expire
      (the clean function in presence has been updated to make sure of
      this).
    - The filename of the document is used as the ETag value in the
      presentity table.  This enables multiple hard-state documents
      (with different filenames) to be uploaded for each subscriber.
    - Hard-state is useful for permanently setting an avatar, or an
      out-of-office message, etc.

commit a31826badd31529197c0bc70d329ec99e234698e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Apr 10 17:58:37 2012 +0100

    modules_k/xcap_server: Fixed a segmentation fault in xcap_server
    
    - This occurs when you try to modify (with xpath) an XML document
      that does not exist on the server.

commit 783f7987e01cdcaa680f4151f1661b6d5eee9004
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Apr 10 17:57:25 2012 +0100

    modules_k/xcap_server: Added $xcapuri(u=>uri_adoc) pvar
    
    - This gives access to the adoc field in the internal xuri
      data-structure (the xuri without xpath).

commit 7f839dab108423e47660e06459591efef41f81a3
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Tue Apr 10 17:17:56 2012 +0300

    Added new mode to sr_init that modifies the way the pseudo-random generator behaves
    
    Now it can use a LFSR (Linear Feedback Shift Register) to generate pseudo random numbers

commit cc1cc78b470152d2c1231a75040b249c1b4493a4
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Apr 9 11:52:18 2012 +0300

    modules:carrierroute fixed small compiler warning

commit 6c7ae21a222fc56f623e7e49bcafc94167dab9d4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 10 12:20:58 2012 +0200

    kex: new pv $sruid to return unique strings
    
    - uses lib/srutils/sruid.{c,h} with prefix 'srid'

commit 0d544f04bb17b671341f8bff5c51cea1dba4dd35
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 10 12:18:35 2012 +0200

    lib/srutils: added small api for internal unique id generator
    
    - uses prefix, server id, timestamp, pid and a counter for an unique
      string

commit d6fa740aef22c310b851037b6687c2e4145b519c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 10 10:40:23 2012 +0200

    db_cluster: documented inactive_interval parameter

commit b46c6f66e1aa64bc038d7495915c0fd646fcf8fe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Apr 10 00:00:05 2012 +0200

    db_cluster: if a db query fails, mark connection inactive
    
    - default inactive time is 300sec
    - value can be chanded via inactive_interval parameter

commit cebdb3730f1411401d0fa171947034d01caef212
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 9 16:33:44 2012 +0200

    msilo: set table before doing db query
    
    - cope with db_cluster module, reported by Juha Heinanen

commit 5b9c3547c42ae2273504a84538fa12f1f0a5ff17
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Apr 9 11:41:42 2012 +0300

    modules:tm Other function declaration fixes
    
    Functions in C musn't be declered with an empty parameter list, as (...) is assumed by compiler, resulting in poorly optimized calls

commit 8e4db808bf9f94d3ccf0f14ed22e75586afd0f23
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 6 14:42:44 2012 +0200

    core: allow send() without parameters
    
    - will use r-uri/dst-uri to send the msg buffer

commit 321cbd8a3657e1ae455d01fe8dbd2f6354204f60
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Apr 6 14:09:30 2012 +0200

    msrp: init dst info struct before parsing uri

commit 2140c307537fc9719ec84d3961c8b955a1b708bd
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 5 23:27:46 2012 +0100

    modules_k/rls: Made the number of notifier processes in RLS configurable
    
    - Defaults to 1
    - Configurable through a new modparam

commit 56eec10df95d1887f3818c82884108f3895a8b11
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 5 23:24:01 2012 +0100

    modules_k/pua: Fixed a DB only mode race condition found during soak testing

commit 9cb078da8ff7cba9d2642d949e4e5a10bd851d82
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Apr 5 23:21:39 2012 +0100

    modules_k/pua, modules_k/rls: Prevent RLS from performing multiple back-end subscriptions to a presentity for a single RLS subscription

commit 99266bb7be2724100e48fa95c672df77f27069d5
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Thu Apr 5 13:59:58 2012 +0300

    modules:sipcapture Performance improvements for HEP package handling
    
    Copying the SIP Payload over the HEP header caused excesive CPU Usage (arount 18% of kamailio's total). The solution is to replace the HEP info with \n, which at beginning of the message are ignored by the parser. Also, storing the message into DB is done taking into consideration the computed offset.
    
    Performance data was computed using valgrind's callgrind.

commit 8475fa8c6208ae3dad46f163f41704c097248d94
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Apr 4 17:08:40 2012 +0100

    modules_k/xcap_server: Fix to handling of pidf-manipulation documents

commit aa5a8463c835c94d1c8cba348791e13c64bcf4f2
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Wed Apr 4 10:48:03 2012 -0400

    htable(k): Added 'updateexpire' parameter to the definition of an
    htable.  It permits one to change whether updating a value stored
    in the htable resets its time until expiration.
    
    Its default value is 1, to preserve existing behaviour.  However, if
    set to 0, updating a value will have no effect on how soon it will
    expire.

commit ff8746504bf6688aaf440513896e4aeda40130d9
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 4 16:37:12 2012 +0300

    Core:msg_translator.c fixed compiler warnings about unintialized vars

commit 60971500232b9fdcee1f399ef91a539c9974d9ac
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 4 12:16:01 2012 +0200

    presence*: use xml2-config if available to detect libxml2 paths

commit f9589ba8fde7dc30ff98fee225e16c3f5440b213
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 4 12:14:40 2012 +0200

    presence_dialoginfo: safety check for version placeholder
    
    - don't set version attribute if the expected placeholder is not in
      place - related to FS#25

commit 79cd491934b1a029403c3657d667cc0df80800a9
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 4 12:58:06 2012 +0300

    core:action.c initialized variable before usage

commit b264d2c6ec598ceee44a57659345d4033742f875
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Apr 4 12:51:50 2012 +0300

    master:core Continue cleaning erroneous definition of functions with no arguments
    
    After testing with gcc 4.5.2, seems that not prototyping function cases extra assembler code regardles of optimization level

commit b93c46c681c17d090f6fda71d91e057ac8e919be
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Apr 4 11:11:49 2012 +0200

    fixed some compile warnings
    
    - reported by Juha Heinanen

commit e9c2f7dc17dd4a4d2ae133d8a04458a86f76a420
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 3 15:57:27 2012 +0300

    lib/srdb1/schema/domain[_attrs].xml: schema fixes

commit 4401fc5a7dde019578a79c7abf01d3373c92c7b8
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 3 15:05:26 2012 +0300

    modules_k/domain: removed/downgraded INFO syslog messages

commit a12f916596057443ad8c5824af1a1d4e03cb7ce0
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 3 14:30:03 2012 +0300

    modules_k/domain:  did column of domain table is by default NULL
    
    - In order to make migration from 3.2 easier, allow did column of domain
      table to be NULL.  If NULL, value of did is assumed to be same as
      value of domain.

commit d5fbc4ead58c7ef47aba91238c74f40f9162f78d
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Tue Apr 3 13:10:37 2012 +0200

    modules_k/siptrace: Fixed \0 termination for tmp_pipport.
    	Thanks Michal Karas for the patch.

commit b6ce51e2ab0179404ba22165ea375e76d56a6f7c
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Apr 3 13:15:35 2012 +0300

    modules_k/domain: added support for domain attributes
    
    - Added new function lookup_domain that in addition to checking if
      domain is local, adds attributes of local domain into AVPs.
    - Domain attributes are stored in new table domain_attrs.
    - Removed support for db only mode and, as consequence, removed db_mode
      module variable.

commit 412fc6621e91fee014188ef0a20aaa09dc602a33
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 2 18:01:24 2012 +0100

    modules/tm, modules/app_lua: Exported t_replicate() to app_lua
    
    - Feature added by Hugh Waite @ Crocodile RCS

commit abb01fb41068f9accc49f638b107abc12d83ef5e
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Mon Apr 2 17:19:17 2012 +0300

    core: Added void  to declarations of functions with empty argument list
    
    In C language, a declaration in the form int f(); is equivalent to int f(...);, thus being able to accept an indefinit number of parameters. With the -Wstrict-prototypes GCC options, these declarations are reported as "function declaration isn’t a prototype".
    On some cases, this may trick the compiler into generating unoptimized code (like preparing to handle variadic argument list).
    In all cases having a declaration int f() and a definition inf f(int) is missleading, even if standard compliant.
    This is still Work in Progress. (maybe adding the -Wstrict-prototypes option to default is desireable)

commit b3568cf5613890d71560a40444bc16ab78a65954
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Apr 2 11:47:23 2012 +0100

    modules_k/pua: Fixed CSeq double increment bug
    
    - This was added during the recent PUA DB only mode performance
      improvements.
    - This bug doesn't really do any harm as things work as long as the
      CSeq is going up - but it wasn't right.

commit 002b3b538f646c61b2760ba1e26b354adfc36b75
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 2 10:02:15 2012 +0200

    Makefile.defs: set MEMDBG to 0
    
    - required for F_MALLOC

commit c2ca22faa59782c3f99fb96f0f7de59b26cf931c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 2 09:51:27 2012 +0200

    Makefile: enable F_MALLOC
    
    - DBG_QM_MALLOC was set for past release, switched back to F_MALLOC to
      allow testing it for a while

commit fbf65a9405e9d1618a94a1e4c23390b8575445b8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 2 09:50:17 2012 +0200

    mem: safety check for f_malloc to avoind inserting two times free fragments

commit 785ff3ebc20799efe4dd44d89b572da23117aa19
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Apr 2 09:49:13 2012 +0200

    pua_dialoginfo: allow setting PUBLISH R-URIs via AVPs
    
    - patch by Jasmin Schnatterbeck, FS#197

commit 7339273c4e96908408aedc4c3c1be6bd2815fe8a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Mar 30 17:17:06 2012 +0100

    modules_k/pua: Fixed bugs with expiry value in update_(dialog|record)_puadb()
    
    - I forgot to add (int) time(NULL) to the expiry value before updating the DB

commit ecbaab806f2af86c3c956b37806f5645eebf5898
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Mar 30 17:15:13 2012 +0100

    modules/mqueue: Updated mq_pv_free() to be able to take the queue name from a pv

commit 3bb02db14ed4861e1c30422ba26204f2ac233dee
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Mar 30 12:48:33 2012 +0100

    modules_k/rls: RLS NOTIFY requests now trickled out instead of in one big batch on timeout
    
    - New modparam: notifier_poll_rate (default 10 per second) can be
      used to set how often the notifier process should check for work.
      Each time the notifier process does something it should send (if
      the hash works evenly) 1/(waitn_time * notifier_poll_rate) sets
      of RLS NOTIFY requests.
    - RLS NOTIFY requests will still come out within waitn_time seconds of
      the back-end NOTIFY.
    - Corrected the the default value of waitn_time.  It is now 5 seconds
      which matches the documentation and the RFC.
    - Fixed a whitespace/indentation inconsistency and a typo in one of the
      diagnostic messages.

commit 289dd5e992126a757f761b273e6e9036cf4691a2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 30 13:29:13 2012 +0200

    dispatcher(k): enable ds_reload also for rpc interface
    
    - previous commit took the changes for mi

commit 86646d0d512be27b61a821f297aba53178563e2b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 30 13:24:03 2012 +0200

    dispatcher(k): removed constraint for ds_reload and alg 10
    
    - ds_reload can be executed even when using call load distribution
    - old list of active calls is destroyed, the module starts counting from
      0 with the next new call calls

commit 1124b8cb29b942172c4aab38119f4a3c5f6e45f3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 30 09:29:18 2012 +0200

    core: mem - use mem_safety for f_malloc when DBG_F_MALLOC defined
    
    - added helper function to join a fragment with the next one when both
      are free, controlled by define MEM_JOIN_FREE and mem_join parameter

commit 0c2320074eb2d60db690ec8c93cc3abe5fca6bfc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 30 09:28:27 2012 +0200

    xlog: added space beteen [[ in titles
    
    - otherwise they break dokuwiki alphabetic indexes

commit 4bfa0bbc93d89ba0df83d866c97e58cab6fc0716
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 29 18:23:52 2012 +0200

    xlog(k): fixed wrong xml tag
    
    - readme was regenerated

commit 48e2695dfb8a0a45e09ff555121a53293bddda3c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 29 21:56:00 2012 +0100

    modules_k/cfgutils: Added note about the core_hash function not being secure to the README

commit 8324f5cd795b846575a027f5269af0d7ecbad20f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 29 16:11:22 2012 +0100

    modules_k/pua: PUA DB only mode improvements and fixes
    
    - Fixed an issue where CSeq wasn't updated in DB only mode
    - Fixed a bug with pua.c:update_pua() in DB only mode
    - Tidied up the code in pua_db.c
    - Separated out the pua dialog (SUBSCRIBE/NOTIFY related) and record
      (PUBLISH related) handling functions in pua_db.c

commit 5a89af6ea8b83ecc781d3f169023fde8388a2da6
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 29 16:02:13 2012 +0100

    modules_k/presence: Fixed DB insert race hazard on the watchers table
    
    - The time between the query on the watchers table (which determines
      there is no matching entry) and the insert is substantial.  During
      a soak I observed inserts failing because rows had been inserted in
      this time window.
    - The fix is to use replace (where available) instead of insert.
    - Also fixed a small whitespace issue I noticed, and added an extra
      use_table call (as I think there was one missing).

commit 77209fb7fcfc793928719d966ebc2b174681f17d
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 29 15:58:39 2012 +0100

    modules/mqueue: Queue names can now be in pseudo variables
    
    - mq_add()/mq_fetch() can use pseudo variables (as well as strings)
      for queue names.
    - $mqk()/$mqv() can use pseudo variables (as well as strings) for
      for queue names.

commit 8afb4cdfdbb99be12d434a8d0ad2a2c26f0595d7
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 29 15:56:25 2012 +0100

    modules_k/cfgutils: Added exported function for core_hash()
    
    - This means you can calculate hashes on strings within the
      configuration file.

commit d8afbb6562c5145ce715f6b3a2d6c7bb29cc24d6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 29 14:04:47 2012 +0200

    Makefile: version set to 3.3.0-dev7

commit d89420df21b48440aeb10e8b4b92a4be65203c2b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 29 13:57:22 2012 +0200

    core: mem - join free packets option can be set from config
    
    - better control over existing code for joining free memory fragments
    - existing QM_JOIN_FREE renamed to MEM_JOIN_FREE - to be used in other
      memory managers than q_malloc
    - new cfg parameter mem_join - if set to 1, q_malloc does join of free
      memory fragments. default is 0. in use if MEM_JOIN_FREE is defined

commit ffb8754f441779def6fd1e50b61ef628920cb2f4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 29 12:55:04 2012 +0200

    core: new param mem_safety
    
    - if set to 1, memory free operation does not call abort() for double
      freeing a pointer or freeing an invalid address
    - default is 0, can be set via config framework

commit 574daa6d4630d055e2f6a281af9bbd9a2ad54ce5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Mar 29 12:27:19 2012 +0200

    core: option to set advertised address and port per socket
    
    - listen parameter can be like:
    
    listen=proto:ip:port advertise ip1:port1
    
    - ip1 and port1 will be used to build Via and Route headers for messages
      using the socket

commit 9ae149ba25ee6467da1d95dd435995b9a59166a3
Author: Miklos Tirpak <miklos@iptel.org>
Date:   Thu Mar 29 10:45:02 2012 +0200

    tm: fix the multiple t_suspend+t_continue scenario
    
    When t_suspend() was called in the route block executed
    by t_continue(), the function did not recognize the newly
    added blind UAC and claimed that there is no new branch added.
    This resulted in the transaction being killed by t_continue().

commit d85c6b9037f788971c9f47dc95ad94ea1ea92fd2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 27 23:52:49 2012 +0200

    siptrace: new parameter to allow the option of doing delayed insert to db
    
    - if 'trace_delayed' parameter is set to 1, insert to database table is
      done delayed, when the db server has support for it

commit 201fc2d600e48fbb717531c79013c1b971f82d76
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 27 14:38:57 2012 +0200

    db_cluster: new module for generic database clustering
    
    - the module allow to group several DB connections and perform commands
      over them, based on policies such as round robin, serial try or
      parallel execution
    - any kind of db connection can make part from a cluster
    - example use case: write in parallel to two databases and do round
      robin read from them
    - the module is a middle layer between modules and databases, reusing
      existing db connectors. A module that wants to use such cluster, just
      have to set the db_url to "cluster://clusterid"
    - the module allow definition of multiple clusters
    - see README for more details
    - todo: enable/disable connections at runtime and via rpc

commit 8194dfe8f45f688bb9b5332ecdc66ec1423ca77f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 27 13:56:32 2012 +0200

    core: include str.h in parse_param.h to avoid compile errors
    
    - it happened when parse_param.h is used first, alone or without any
      predecessors including str.h

commit b0e122d17a0b7964066b83edf5c1f2b1c3256d45
Author: Juha Heinanen <jh@tutpro.com>
Date:   Mon Mar 26 18:33:54 2012 +0300

    modules_k/pv: added pseudo var $dic (diversion header counter)

commit 930aba2973c19370a5d50aac2661be66e9aacbc3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 25 13:39:20 2012 +0200

    core: new parameters to control and alert on time consuming ops
    
    - latency_log - log level to print the messages related to latency
    - latency_limit_db - limit of latency in ms for db operations. If a db
      operation executed via DB API v1 takes longer that its value, a
      message is printed in the logs, showing the first 50 characters of the
      db query
    - latency_limit_action - limit of latency in ms for config actions. If a
      config action executed by cfg interpreter takes longer than its value,
      a message is printed in the logs, showing config path, line and action
      name when it is a module function, as well as intenal action id

commit e4972ebd926b1fea6af795f58785a2b766439e5d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 23 12:53:31 2012 +0100

    pv: use msg context id when caching the value for $TV
    
    - reported by Klaus Darilion

commit cf9269d7315e2965dcb57afda7838c4a5d3ad807
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 23 12:51:35 2012 +0100

    core: parser - helper functions to test msg context id
    
    - use (msg id, pid) to identify the message context id
    - to be used for matching the message context when caching values are
      stored per it
    - reported by Klaus Darilion for $TV(...)

commit 7c7e9f1051148887b7c5a578a9d09d66bf9586ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 23 12:14:07 2012 +0100

    rtpproxy: proper iovec size for rtpproxy commands
    
    - issue introduced with the last fix for timeout socket parameter
    - reported by Laurent Schweizer

commit 5fc6a215d5d8b898d6ae72edb88e2731ed900ccd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 23 11:01:21 2012 +0100

    textops(k): two functions to search and subst inside header fields
    
    - search_hf(hf, re, flags) - search inside header fields body
    - subst_hf(hf, subst, flags) - perl-like substitution inside header
      field body

commit d8fc55f0dec978a09bfd1aead4be55e2a1855d91
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Mar 21 18:45:36 2012 +0200

    modules_k/p_usrloc:Fixed sql table creation scheme
    
    TODO: create serdb schema definition
    
    Patch by Dragos Dinu (Dragos.Dinu AT 1and1.ro

commit 5269ac4fce1ce2a034ff711dfd8607e16cfeb591
Author: Marius Zbihlei <marius.zbihlei@1and1.ro>
Date:   Wed Mar 21 18:41:34 2012 +0200

    modules_k/p_usrloc : Fixed postgresql support
    
    Used replace DB API export instead of insert_update which was not available of postgresql.
    Patch by Dragos Dinu (dragos.dinu AT 1and1.ro)

commit 71348e9c9714066f47b01a6f5061a9651e8c051c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 20 21:25:21 2012 +0100

    registrar(k): new parameter xavp_cfg
    
    - defines the name of an XAVP container to hold per-REGISTER parameters
    - for now, max_contacts can be set for each registration, overwriting
      the module parameter value. For example:
    
    modparam("registrar", "xavp_cfg", "reg")
    ...
    request_route {
    ...
    	if(is_method("REGISTER"))
    		$xavp(reg=>max_contacts) = 2;
    ...
    }

commit 4464c27f37bf9bc84e96c5898b08dbc3cd1ae3d8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 20 14:32:28 2012 +0100

    core: safer propagation of parameter address

commit 3417a42c64535123d19896add6bc8324a29f24a1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 20 12:24:59 2012 +0100

    registrar(k): optional uri parameter
    
    - removed aor_avp as it conflicted with unregister uri param
    - savel, lookup and register can take an extra optional parameter to
      specify the URI for which to do the operation. It provides the same
      functionality as it was with aor_avp

commit 2a41fe4fd144bbe82259d1546674b1dd06897d19
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 20 16:54:18 2012 +0000

    lib/srdb1/schema: Updated XCAP indices to fix MySQL primary key issue
    
    - The previous commit was incorrect

commit 45a9d6089a3d03d64f7648a2682ef18f5149171f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 20 16:47:03 2012 +0000

    lib/srdb1/schema: Updated XCAP indices to fix MySQL primary key issue
    
    - Made id primary key again
    - Made doc_uri a unique index (constraint)
    - Removed unique constraint from other indices as no longer needed

commit 6853a8c061df2456291d825415769625f741daf6
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 19 16:12:02 2012 +0000

    utils/kamctl: rebuilt .sql files to reflect changes to pua, rls, and xcap tables

commit 639bda8df8ff3671e9ac14eb18f744df24f83adc
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 19 16:09:39 2012 +0000

    lib/srdb1/schema: Updated xcap table indices
    
    - They now match the queries in the presence_xml, rls, and
      xcap_server modules.

commit 1cdab1b92c7df5b9108e1dbb0059e955a6f5024e
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 19 16:08:30 2012 +0000

    lib/srdb1/schema: Updated indices for rls_presentity and rls_watchers tables
    
    - The rls_watchers table indices are now correct for DB-only mode

commit 6d7e23db563b7ba70701e21928def9c228c30520
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 19 16:05:56 2012 +0000

    modules_k/rls: RLS DB-only mode performance improvements
    
    - When the RLS DB-only mode was implemented it was designed to do
      (as close as possible) exactly what the hash-table mode did in
      the same way the hash-table mode did it.
    
      This means lots of hash-table lookups (which are fast) result in
      lots of DB selects (which are slow).  It also means where an entry
      is found in the hash-table and modified in place, in DB mode a
      select must be done and then an update.
    
      A lot of these DB transactions are not strictly necessary, and
      often fields were retrieved or updated in the DB even when they
      hadn't changed.
    - This change refactors the DB-only code (in rls_db.c) and
      re-orders the functional code in other files to make the DB
      operations as simple as possible and as few as few as possible.

commit 676f44ae04bf858722733d86f937b7a1b0b44177
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 19 16:00:39 2012 +0000

    lib/srdb1/schema: Updated indices for the pua table to make them correct for DB-only mode

commit 888d1d5644a38e8c36ed706ee51015984971cc5c
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 19 15:54:23 2012 +0000

    modules_k/pua: PUA DB-only mode performance improvements
    
    - When the PUA DB-only mode was implemented it was designed to do
      (as close as possible) exactly what the hash-table mode did in
      the same way the hash-table mode did it.
    
      This means lots of hash-table lookups (which are fast) result in
      lots of DB selects (which are slow).  It also means where an entry
      is found in the hash-table and modified in place, in DB mode a
      select must be done and then an update.
    
      A lot of these DB transactions are not strictly necessary, and
      often fields were retrieved or updated in the DB even when they
      hadn't changed.
    - This change refactors the DB-only code (in pua_db.c) and
      re-orders the functional code (in send_(publish|subscribe).c)
      to make the DB operations as simple as possible and as few as
      few as possible.

commit d34b5c98a24ac0ca0d7ae2e0c6f1dda059ebdbaf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 19 15:10:08 2012 +0100

    xmpp: readme updated with more details about how the module operates
    
    - added the gwmap parameter

commit 671ce93e7e51a0a01c5675bac154f3dfaec6c3fb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 19 14:09:40 2012 +0100

    xmpp: new parameter gwmap for sip-xmpp domain translation
    
    - gwmap can get a valus as a list of
      'sipdomain1=xmppdomain1;...;sipdomainN=xmppdomainN'
    - whenever a sip-to-xmpp message is sent, any matching sipdomain in src
      or dst address is translated to appropiate xmppdomain
    - the other way around, when a xmpp-to-sip message is sent, then any
      matching xmpp domain in src or dst address is translated to appropiate
      sip domain
    - this allow getting rid of the URI encoding with delimiter
    - if a domain is not found, the src/dst domains are preserved as they
      are in SIP to XMPP and vice versa
    - if the xmppdomain is not provided explicitely, sipdomain is considered
      to be also the xmpp domain

commit d37b62d269f499ea817ef2bba1e9b3c9cc5506cc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 19 11:22:11 2012 +0100

    xmpp: added clarification about xmpp server mode
    
    - make it more clear that it is not a full xmpp server implementation,
      but more like an xmpp server connector

commit ef6b531dfaf08476932d44b23c82b94e0f06a86a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Mar 16 18:36:37 2012 +0100

    diversion(k): added optional uri parameter to add_diversion()
    
    - both parameters can be now PVs

commit 78e7405eb227f684e156466b55335f401d17a139
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Mar 16 13:52:49 2012 +0200

    modules_k/presence Fixed last commit - use_table before delete
    
    Reported by Peter Dunkley

commit eec1c60cb518aa2d37216fb00ef4a2910623c53e
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Fri Mar 16 10:40:56 2012 +0100

    modules_k/dialog: fix dlg_var return-value in case of an empty result.
    - replace 0 with pv_get_null(...)

commit 25ce428ab1b165654e35b3433060beab0effdd9b
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Mar 15 18:47:56 2012 +0200

    modules_k/presence Added an index to active_watchers table
    
    For DB_ONLY mode an index on presentity_uri is needed.
    (Used for queries when sending Notifies as a consequence of a received
    Publish)

commit 5ccf1eedb4e38d85d7cd29ea5d69f29b40289755
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Mar 15 18:38:43 2012 +0200

    modules_k/presence Change delete sql query to use key
    
    The delete operation in active_watchers is now performed on
    callid, to_tag, from_tag.

commit a87298867d48de1daea58f5058e43ac264d6a076
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Mar 15 18:33:38 2012 +0200

    modules_k/presence Reverted a change from last commit
    
    Do not use affected_rows on delete (the send notify part relies on
    finding the record in database)

commit a66242b4f776b43120014b0c56e21c87d254ddcc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 14 10:57:47 2012 +0100

    parser/sdp: allow boundary value between quotes
    
    - reported by Magnus Nordström, FS#200

commit edc4d902135d484d02272a64b7f27447fcb6854e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 14 10:01:00 2012 +0100

    sqlops: check for DB_CAP_RAW_QUERY of DB connection
    
    - the module is using raw query capability and DB_CAP_ALL does not
      include it
    - reported by Pedro Vico, FS#208

commit 67d11b26dd6740ac8704c601ccfa69cfe27e5517
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Mar 14 09:51:43 2012 +0100

    mi_xmlrpc: added note about using xmlrpc as better alternative
    
    - no dependency on specific external lib versions

commit cb8c24f1ef873d16fd5c7edd96e2c0d3847b3dda
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Wed Mar 14 09:29:24 2012 +0100

    modules/sipcapture: added check for  corrupted and defragmented packets

commit 0a946efc528dfbf2d35f9c22b94040bc0d596f1e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:18:35 2012 +0100

    db_postgres: added mod destroy function
    
    - clear locks set used for replace command

commit 51f3e6d5ce60f32cf9af19511663bc2f5fdfedae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:11:11 2012 +0100

    p_usrloc: updated usage of DB replace method
    
    - it has to be reviewed and fixed to make it work properly with db postgres
    - no effects when using it like so far with mysql or unixodbc - it keeps
      working like it was till now

commit 17937b2c9ae3a52f4f4ab62b012dbecae913767d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:10:49 2012 +0100

    pua: updated usage of DB replace method

commit c2ce62928cf1af7e509e262256d1de0e8784b8b4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:10:12 2012 +0100

    rls: updated usage of DB replace method

commit fb7c301c438372d6429448f003ce89f449a7a4af
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:09:08 2012 +0100

    db_unixodbc: DB API v1 replace prototype updated

commit aac61596c586dc530953b7781df88392fb3cb9fe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:08:08 2012 +0100

    db_mysql: DB API v1 replace prototype updated

commit 5db7f650ad0c5dd81ba5d8b670075816f9fe4f65
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 14:03:52 2012 +0100

    db_postgres: implemented custom REPLACE command for DB API v1
    
    - so far it implements replace as update, if affected rows == 0, then
      insert
    - it uses locks to ensure there is no race between update and insert
      commands
    - the lock to be used is selected based on the values for the update
      key, this ensuring that operations over the same record are done under
      mutex
    - if number of colums to be used for update key is 0, then a straight
      insert without locking is done

commit 061453b77e82e2fa92af2f57db67b6f9f8ac8302
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Mar 13 13:58:27 2012 +0100

    lib/srdb1: updated DB API prototype for replace
    
    - replace method takes two more parameters to allow implementation of
      replace functionality inside the db connector module, via update,
      affected rows and insert
    - first is the number of column-value pairs to be used as unique key.
      They have to be located at the beginning of the array given so far as
      parameter to replace
    - second is a mode, that will allow doing custom replace by:
    	- update, if affected rows == 0 then insert
    	- insert, if duplicate key error, then update
    - for the db connectors that have access to a native REPLACE command in
      the DB backend, the new parameters are ignored

commit 42f2d990d022cb67b051ac563ee8cde916a0d14a
Author: Dragos Dinu <dragos.dinu@1and1.ro>
Date:   Tue Mar 13 11:33:06 2012 +0200

    modules_k/presence Used affected_rows SQL statement
    
    In case affected_rows function is available in the DB driver, this
    function is used instead of an extra query in presentity table that only
    verified if the record existed.
    
    Patch author Dragos Dinu <dragos.dinu@1and1.ro>

commit 287ee15ffa985cb6d07f192f1d1cbfadb31c0fd8
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 12 21:52:39 2012 +0000

    modules_k/pua: Fixed race hazard on pua table
    
    - During testing a race hazard where the 2XX to a back-end SUBSCRIBE can be
      received and processed (and the DB UPDATE to convert a temporary dialog to a
      full dialog) before the DB INSERT to create a temporary dialog is run.  There
      is an incredibly small window for this, but it was happening consistently on
      one system.
    - The easiest way to fix this is to use the replace() DB API to convert the
      dialog and live with the initial INSERT failing (this does not actually
      return an error from the SRDB1 interface so the rest of the code continues
      OK).  Unfortunately, the replace() API is not available for some databases
      (for example, PostgreSQL).
    - I have updated the code to use replace() when it is available and to do an
      update() then check affected_rows() (and if 0 then do an insert()) when
      replace() is not available.
    - The update() and then insert() process makes the window for the race much
      smaller, but doesn't get rid of it completely.  However, with PostgreSQL a
      DB rule can be used to fix it completely:
    - PostgreSQL DB rule:
    CREATE RULE "pua_insert_race1" AS ON INSERT TO "pua"
     WHERE EXISTS(
      SELECT 1 FROM pua WHERE call_id=NEW.call_id AND from_tag=NEW.from_tag
    	AND pres_id=NEW.pres_id AND to_tag=''
     ) DO INSTEAD (
      UPDATE pua
        SET expires=NEW.expires,
            desired_expires=NEW.desired_expires,
            flag=NEW.flag,
            etag=NEW.etag,
            tuple_id=NEW.tuple_id,
            to_tag=NEW.to_tag,
            cseq=NEW.cseq,
            record_route=NEW.record_route,
    	contact=NEW.contact,
            remote_contact=NEW.remote_contact,
            version=NEW.version,
            extra_headers=NEW.extra_headers
        WHERE call_id=NEW.call_id AND from_tag=NEW.from_tag
             AND pres_id=NEW.pres_id
    );
    - You can also add another PostgreSQL rule to make the failing INSERT
      (described above) do so quietly.  This does not affect the function of the
      code, but it will make the logs quieter (which is nice):
    CREATE RULE "pua_insert_race2" AS ON INSERT TO "pua"
     WHERE EXISTS(
      SELECT 1 FROM pua WHERE call_id=NEW.call_id AND from_tag=NEW.from_tag
    	AND to_tag<>''
     ) DO INSTEAD NOTHING;

commit 46eb7f2c33231355aa26632bc3d1adb02ee2556f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 12 21:44:46 2012 +0000

    modules_k/rls: Fixed race hazard on rls_presentity table
    
    - During testing I observed that it is possible for two back-end NOTIFYs that
      will affect the same rls_presentity table row to be processed simultaneously.
      This is a problem when the row does not yet exist as the SELECTs can both
      return 0 rows resulting in both processes trying to INSERT - but only one
      will succeed.
    - The easiest way to fix this is to use the replace() DB API, but this is not
      available for some databases (for example, PostgreSQL).
    - I have updated the code to use replace() when it is available and to do an
      update() then check affected_rows() (and if 0 then do an insert()) when
      replace() is not available.
    - The update() and then insert() process makes the window for the race much
      smaller, but doesn't get rid of it completely.  However, with PostgreSQL a
      DB rule can be used to fix it completely.
    - PostgreSQL DB rule:
    CREATE RULE "rls_presentity_insert_race" AS ON INSERT TO "rls_presentity"
     WHERE EXISTS(
      SELECT 1 FROM rls_presentity WHERE (rlsubs_did, resource_uri)=(NEW.rlsubs_did, NEW.resource_uri)
     ) DO INSTEAD (
      UPDATE rls_presentity
        SET updated=NEW.updated,
            auth_state=NEW.auth_state,
            reason=NEW.reason,
            content_type=NEW.content_type,
            presence_state=NEW.presence_state,
            expires=NEW.expires
        WHERE (rlsubs_did, resource_uri)=(NEW.rlsubs_did, NEW.resource_uri)
     );

commit 419e26078bb9e8f67e4e613c21db3feee418c8a5
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 12 21:38:19 2012 +0000

    lib/srdb1: Updated constraints and indices for some of the presence tables
    
    - Updated to match recent presence/pua/rls code changes
    - Added new index on username, domain, and event to the presentity table
    - Added unique constraint on etag, tuple_id, call_id, and from_tag to the pua table
    - Added indices on (pres_id), (call_id, from_tag, to_tag), and (pres_id, pres_uri, call_id, from_tag) to the pua table
    - Removed presentity uri from the rls_watcher table index

commit 2bd922dba30ae6c49242089e906254fe7d0f660f
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Mon Mar 12 21:31:51 2012 +0000

    modules/db_postgres: Added affect_rows() API to db_postgres

commit a14d3a92b2bb30b9cfb503153806b308f3d95a34
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 12 18:40:15 2012 +0100

    uac(k): function to replace To header
    
    - part of patch by Jasmin Schnatterbeck

commit b347fd4ff4d1be946dba6e89d21a18bebe3c04da
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 12 18:08:53 2012 +0100

    core: sip parser - added internal flags to mark replacement of To/From
    
    - used by uac module when updating From/To headers
    - part of patch by Jasmin Schnatterbeck

commit 9da908d4e4bd9eea32c3d643aef85028a8431151
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 12 17:07:49 2012 +0100

    Makefile: devel version set to 3.3.0-dev6

commit 55812477d1f4c9ee8726d0ba3cc7b6d3c8835f8a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 12 17:04:17 2012 +0100

    call_control: avoid internal flags conflicts with mediaproxy
    
    - use internal flag 28 for marking requests handled by call_control, the
      old value, 30, being used by mediaproxy module, resulting in engaging
      media relay
    - reported and solution by Reda Aouad

commit d8fe0def83736c204dd1eace89e8ca1823704fc3
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Fri Mar 9 19:12:59 2012 +0100

    dns: srv load balancing distribution fix
    
    The load distribution when doing SRV based load balancing was not
    completely fair. The first listed server had always an extra
     (sum_of_weights-weight)/(sum_of_weights*(sum_of_weights+1) chance
    of being selected.
    For example for 2 servers both with weight 50, the first one
    will have an extra (100-50)/100*101 change of being selected =>
     extra 0.495% which gives a 50.495% - 49.505% distribution
    instead of 50% - 50%. For large weight values this doesn't make a big
    difference (e.g. for 500-500 => 50.049% instead of 50%) but for
    small values it becomes very noticeable (e.g. for 1-1 =>
     66% - 33% distribution instead of 50%-50%).
    
    The chance of selecting a 0-weight record was also changed. It was
     1/(sum_of_weights+1) and now is 1/(sum_of_weights*1000).
    
    Reported-by: Michal Matyska  michal.matyska iptel org

commit 30266d27e3abbea9ceb5ea59bcccc69fe9a0b9bb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Mar 12 12:26:39 2012 +0100

    tls: updated readme with missing parameters

commit 652f08a52fbc42ab413015ff4a3135d71538f71b
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Mar 9 16:17:56 2012 +0200

    modules_k/presence Fixed indexes in SQL schemas
    
    	Added index on expires for both presentity and active_watchers
    	tables
    	Fixed unique index on active_watchers(no longer matched the
    	operations done in the code)

commit 1f5b0632e02e29b304c3d848b2df94ab8e514745
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Fri Mar 9 12:34:27 2012 +0100

    htable: check for expired records only for tables with auto-expire set
    
    - from a patch by Krishna Kurapati

commit 654a15281ad42a92076bfd131d95b3e7c5cb240f
Merge: 7f54aac 082100f
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Mar 8 17:47:23 2012 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit 7f54aacb740011abe968eb599509cf296e003a61
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Mar 8 17:26:06 2012 +0200

    modules_k/presence: Fixed bug - calling child_init in process main
    
    	Process main calls child_init with process type PROC_MAIN before
    	forking the TCP children. Since presence module opens database
    	connection in child_init, this resulted in connection being
    	inherited by the TCP children and wierd things happening when doing
    	DB operations.
    	Since there is no place in main() where child_init is
    	called after all the forks, for the subs_db_mode=WRITE_BACK when
    	process main needs to dump the subscribe table in database at
    	shutdown, the solution was to open the database connection in
    	mod_destroy().

commit 082100fdc73d2938f5e736de82344a390a52a3d1
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Thu Mar 8 11:28:49 2012 +0100

    modules/sipcapture fixed statistic.sql

commit e6540927dc93ea3f2f442c270fc6ec85a49626b5
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Mar 7 10:31:13 2012 +0200

    modules_k/rls: fixed readme typos

commit c7151212056136c87265571624e7e15dd8c18978
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 18:33:42 2012 +0000

    core: Changed HTTP_REPLY_HACK from a compile-time to a run-time option
    
    - By default it is off, to turn it on set http_reply_hack=yes in kamailio.cfg
    - You need to turn this on if you use xhttp _and_ event_route[sl:local-response].
      This is because HTTP responses are stateless responses and when the
      event_route is run it has to parse the response.  Without HTTP_REPLY_HACK
      Kamailio can't actually parse HTTP responses.

commit 3431ea3c2dda8906add5e005e263124a068c7d84
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 18:16:38 2012 +0000

    modules/sl: Added event_route[sl:local-response]
    
    - The same as event_route[tm:local-response] but for stateless
      responses

commit 74a13d86340de56602f31c6a8bf9536ee0123911
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 18:13:56 2012 +0000

    modules/tm: Added event_route[tm:local-response]
    
    - Event route that is run (immediately after) sending a locally
      generated, transaction stateful, response.
    - Because the response has already been sent there is no point
      trying to change anything in this event_route.

commit 43e7274cad12535fc20d0e669d87939c1c18f399
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 18:10:13 2012 +0000

    modules/tm: Filled in the $snd() structure for event_route[tm:local-request]

commit ce8530af0700a1d9b9890c6b1aef816e018daade
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 18:05:49 2012 +0000

    modules_k/rls: Bugfix in RLS.  NOTIFYs from RLS for presence changes have wrong expires value
    
    - The expires parameter in the Subscription-State: header was a UNIX
      time rather than an offset.

commit 54b44414fff9eb94cad752f93d54005eea8c0c85
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 18:04:20 2012 +0000

    modules_k/presence: Some important stuff was removed when the latest set of presence fixes were merged in
    
    - The result was that PUA and RLS in master would not longer compile
    - I have restored the stuff needed to build PUA and RLS, but there
      could well be other stuff that has been lost

commit f7fd425060a5b4d76fca787ba5938d2658f0e64a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Tue Mar 6 17:58:05 2012 +0000

    modules_k/statistics: update_stat() can now be called from ANY_ROUTE

commit 23cddf4220439be35ccb00c9056d802d32b9bc6f
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Mar 6 18:38:11 2012 +0200

    modules_k/presence Fix and improvement for subscribe updates
    
    	Fix: wrong Cseq for Notify for terminated Subscription in some DB
    	modes
    	Improvement: When DB mode is DB_ONLY do only one update in
    	active_watchers when processing one Subscribe(instead of 2)

commit f9494494d59d2036f2ed664fbdf4193760662937
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Mon Mar 5 11:56:50 2012 +0100

    module: modules/sipcapture fixed socket_info structure.
    
    Now users can use $Ri, $rp variables in RAW socket mode.

commit d3eb5d4f21f20a9bc5457642ad5fdcb9e764a02c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Mar 4 17:22:30 2012 +0100

    core: added back the option to use name IDs for tos setting
    
    - reported by Olle E. Johansson

commit 2ac96ebcc173a2f1e601b38afa5c9bba5de8c0b5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Mar 3 12:34:38 2012 +0100

    uac(k): support for 407 challenge to registrations
    
    - requested in FS#204, by Oded Resnik

commit adefda18e1c82f9eaf3c83b9a9c39ee89f4025bf
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Fri Mar 2 23:55:22 2012 +0100

    srdb1: Update XML schema for dialog table.
    
    - Increase caller and callee CSeq number field length from 7 to 20.
    - Bump dialog version from 6 to 7.
    - Regenerate database scripts.

commit f554ba1fa7e035a65aa2adc80d25a4560aaf9d3a
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Fri Mar 2 23:34:05 2012 +0100

    utils: Update dialog table version from 6 to 7.

commit b15fbc145eb4221150da18db04c751620a2f6f32
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Fri Mar 2 23:14:05 2012 +0100

    utils: Increase length of fields holding CSeq values in dialog tables.
    to 20 (fixes FS #207).
    
    - Reported by Andrew Pogrebennyk.

commit 681c06103eff1b03d2b2648d64f302cfc4587490
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 1 17:59:51 2012 +0000

    modules/app_lua: Added tmx.t_suspend() and mq.add() to app_lua

commit 242bbdd184426c7cde9f77ab74a5b8c03690687a
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 1 17:56:03 2012 +0000

    modules_k/tmx: Added C API to enable other modules to bind to tmx
    
    - Exported t_suspend() for use in app_lua

commit 513a71df7b6fa8b5ae3ec124f02e02c3855c5803
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Mar 1 17:53:16 2012 +0000

    modules/mqueue: Added C API to enable other modules to bind to mqueue
    
    - Exported mq_add using this API so it can be added to app_lua

commit 0e3f1ff9507a578d95d02d615d333ef24fe42d87
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 29 19:08:31 2012 +0100

    kamailio.cfg: add colon before the port for voicemail server

commit b5aafda14737467590c6324cb1ba2cb88a2531a9
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Feb 29 15:18:04 2012 +0000

    modules/sdpops, parser/sdp: Added new exported function to give access to the raw SDP within the config file
    
    - Feature added by Andrew Miller @ Crocodile RCS

commit 73234337d2ea948bf65459bf929e9fdc8c171dc8
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Feb 29 15:02:09 2012 +0000

    modules_k/textops: Fix to in_list to make it skip over whitespace
    
    - Fix by Andrew Miller @ Crocodile RCS

commit 5c5e969961b7171319ff79e105ce36f660bd1b63
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Wed Feb 29 14:52:23 2012 +0000

    modules_k/pua, modules_k/rls: Updated rls_update_subs() to remove back-end SUBSCRIBE dialogs when a contact is removed from a resource list
    
    - rls_update_subs() should be called in kamailio.cfg whenever a resource list
      changes. The initial version just created new back-end SUBSCRIBE dialogs for
      new contacts. This meant that dialogs for removed contacts would remain until
      the dialog expired by itself - which means that NOTIFYs for presence changes
      to contacts that have been removed will continue to be sent (and with some
      clients displayed) for a while after the contact was deleted.
    - Working out when a contact has been deleted is a bit more tricky than working
      out which ones are new. The mechanism used is to build two insert-sorted
      lists. List one contains the contacts in the contact list, list two contains
      the active back-end dialogs. You can then pop the top item from list one and
      search and remove it from list two (it should be near the top of list two as
      they are both sorted). Once you have been through list one the remaining URIs
      in list two are those that have been deleted from the contact list.

commit 2e96a72c3b16ccf7a1854eb83be3c779474bee3b
Author: Iñaki Baz Castillo <ibc@aliax.net>
Date:   Tue Feb 28 20:26:18 2012 +0100

    [regex_mod] Fix a double freeing in free_shared_memory() function.

commit 1d51ef127bc546cbe7e950dedc135a529e9ed2aa
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Feb 27 21:37:24 2012 +0100

    xmlops: fixed internal module name
    
    - c&p error propagated when the module was split from presence_xml
    - reported by Olle E. Johansson

commit 3fd1b776a6e15d49f595d3b2a8eaffc97a963f12
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Feb 26 12:25:12 2012 +0100

    app_lua: exported cfgutils api to lua

commit c43cc058f86e0b4396178d980baba78848d9a715
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Feb 26 12:24:26 2012 +0100

    cfgutls: API members renamed to avoid conflicts with core defines

commit f7ef19861e2e46eccdace35d8c2656978afd42b0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Feb 26 12:02:07 2012 +0100

    cfgutils: lock/unlock functions exported to inter-module API

commit 14f5884af9e9197df1f126dddb5bb68482b15d20
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Sun Feb 26 19:17:53 2012 +0100

    xlog: add xlog function with syslog facility as third parameter
    
    - New xlog function with 3 parameters:
        xlog([[facility,] level,] format)
      This allow to specify the syslog facility for every xlog log message.

commit 224c6c69817315c56590648ea626d91b6ac225e8
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Sun Feb 26 19:13:22 2012 +0100

    xlog: remove code duplication between xlog and xlogl functions
    
    - xlog and xlogl functions are more or less duplicates. Use a helper function
      to remove code duplicates for better readability
    - preparations for setting the syslog facility per xlog request

commit 8831d195c8edfb021f288eb685d8621512dcb3fe
Author: Klaus Darilion <klaus.mailinglists@pernau.at>
Date:   Sun Feb 26 19:04:56 2012 +0100

    xlog: restructure functions
    
    - restructure functions for better readability, no code changes

commit 7a8ad6740c244d48911f0216f6baac4804ea2f3b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 25 14:16:53 2012 +0100

    dialog: should be ok to use dlg_manage() after transaction was created

commit 4bf91a743281ce17812a1f38e8ecccfcae038122
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 25 11:31:26 2012 +0100

    app_lua: sql_xquery() from sqlops exported to Lua API

commit 7fceaf17a4d3e7bef9767e8e5cbcfaa3f85e0406
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Feb 25 11:25:52 2012 +0100

    sqlops: exported sql_xquery() via inter-module API
    
    - sql_do_xquery() split to add a function that takes str parameters

commit 9fedb8564e2eb50553a3bcae66976620316698c4
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Fri Feb 24 17:51:42 2012 +0200

    Changed the trace function so that it uses the method in cseq on SIP replies instead of using an empty string.

commit fb0951c332894ac6cd967daa02c4a2b569ada671
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Fri Feb 24 15:47:49 2012 +0100

    module/avpops: Add short description to clarify the purpose of the avp_delete flag.

commit c110823321b3da0fc8286308fe8851f3c06835ff
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Fri Feb 24 10:50:11 2012 +0100

    Fix consistency of exported parameter by rename cdr_stop_id to cdr_end_id. The command is already mentioned correctly in the doc.

commit 16c9ca3e89e672f9a0339e60ddee7a6ab6d7fdf8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 24 10:35:10 2012 +0100

    lib/srutils: link against -lm for math functions in json
    
    - some distros requires explicit linking, although is part of libc

commit 7c7ed8ad9d62bd501bd2c856a01689a84a0c0711
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 24 10:24:29 2012 +0100

    tls: check for support of ssl2
    
    - latest distros with newer ssl lib are removing the ssl2 support

commit 7b4567c4cc4611ee32e403b41f53ed9a34ce9727
Author: Sven Knoblich <sven.knoblich@1und1.de>
Date:   Thu Feb 23 14:33:19 2012 +0100

    Add new cdr-feature 'modifying cdr basic parameter st/et/d'. This is necessary for the upcoming db-storage of cdr's.

commit c014f8b02eba3ef08195a22269bbd3c9e9670b30
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Feb 23 23:09:21 2012 +0000

    modules_k/rls: Added modparam to limit the number of back-end subscribes
    
    - Specifically, the number of back-end subscribes per RLS subscribe is limited
    - By default there is no limit
    - Useful to help prevent a Kamailio server being overloaded when subscribers
      have huge contact lists.

commit dc82bad1538618af0a345a938ac590afa3f775c6
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Feb 23 23:04:39 2012 +0000

    modules_k/rls: Some cleanup of whitespace and diagnostics

commit d4396716a7f0c0472f37e4ce7c39e04394925583
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Thu Feb 23 22:56:46 2012 +0000

    core: Setting max_while_loops to zero now allows infinite loops
    
    - I wanted to be able to have a Kamailio process running a configuration route
      all the time (sleeping itself using usleep).  To do this I use rtimer to
      create a mode one timer (with timeout of one second - so the route is run
      very shortly after Kamailio starts).
    - In the route for this timer I had a while(1) loop, but the max_while_loops
      (defaulting to 100) meant that the loop wasn't really infinite.
    - Now setting max_while_loops to zero disables the infinite loop check.

commit 3beef50c69d60fcb372d555a561d8e2258ff5734
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 22 22:17:29 2012 +0100

    dialog(k): new function to set dialog timeout by internal id
    
    - dlg_set_timeout(timeout [, h_entry, h_id])

commit 1b11548c737e08420d1e82ba18756d7afba940bc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 22 21:33:07 2012 +0100

    dialog(k): replaced list of cfg routes with ANY_ROUTE in module exports

commit ea5dbe89b4010faf1d4a4c7c4ce97ebbcb46e71d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 22 17:40:33 2012 +0100

    core: helper fixup function for all parameters int/pvar

commit 47a0de15f35c67400d980797bbb1d43a270e79cc
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Feb 22 18:06:59 2012 +0200

    modules_k/presence Fix bug in last commit

commit 4a6a2cfd2df535c0f293d0d944685a702b45af0b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 17 15:46:12 2012 +0100

    ndb_redis: try to reconnect if query to redis server fails
    
    - credits to Javier Gallart for testing

commit 70e81cbf79ac3d4d25792feaed0af4d712368418
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 17 09:36:18 2012 +0100

    dialog(k): documented parameter wait_ack and event_route[dialog:failed]

commit 82fe2bff11a6b1d75701591b571fab44ed7b06a2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 17 09:26:19 2012 +0100

    dialog(k): more dialog info stored in db
    
    - profiles the dialog belongs to are stored in xdata column, serialized
      as json document. A restart will restore them
    - internal flags are stored and restored from database table, column
      iflags (for now the flag for sending BYE on dialog timeout)

commit 5fdf9d43e750c4a8acc9e3565738a09c4c767db2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 17 09:25:16 2012 +0100

    kamctl: regenerated dialog table creation scripts

commit 3cb33d3a5a24e228be69596910349c4732297f55
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 17 09:21:37 2012 +0100

    srdb1: updated schema for dialog table
    
    - new column xdata to store aditional info per dialog
    - it will store the profiles dialog belongs to, serialized as json
    - toroute column (unused) renamed to iflags to store the internal dialog
      flags (such as flag for sending BYE on timeout)

commit f7b72bf06870c3fd3ad602051e8695c11a2fcdc6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 17 09:20:44 2012 +0100

    libsrjson: new helper functions to deal with str and unlink node

commit 53ec53db6b2e164dbdd6d6162c547d064a4cbe34
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 16 15:46:19 2012 +0100

    dialog(k): option to wait for negative ack
    
    - new parameter wait_ack, default 1 (wait for negative ack)
    - if set to 0, dlg structure is deleted when the negative reply is sent
      out
    - restore functionality existing in previous versions, lost with the
      latest refactoring, reported by Timo Reimann
    - negative ACK can trigger a dialog callback, also the dialog profiles
      can stay until this ACK is processed
    - configurable as there is no always useful usage, adds some extra
      processing, so it is good to be able to disactivate it

commit 65889069b9cbffc2f2ee746f14cef46db65cb5c5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 16 14:51:30 2012 +0100

    dialog(k): one more event_route[dialog:failed]
    
    - executed when >=300 is replied to the INVITE

commit 29036bcc8fe90ab3281be95b4b69beff61f0cf0d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 16 12:18:44 2012 +0100

    dialog: timeout route executed only for confirmed dialogs
    
    - avoid some extra conditions when it is not the case
    - use dlg internal id to lookup dialog in callbacks for replies of generated BYEs

commit dc434e7a0a811acada8fba17a77ec39f033bd929
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 16 10:58:34 2012 +0100

    dialog: documented event routes

commit f2dc7014cfa9253cd344ea6b6006d2fa2da3fb12
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 16 10:56:38 2012 +0100

    dialog: fixed missing return

commit a46f2ee6ca5710737f208369c9178f2681301d25
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 16 10:49:06 2012 +0100

    dialog: execut event routes on start and end of dialog
    
    - event_route[dialog:start] - when 200ok for INVITE is processed
    - event_route[dialog:end] - when BYE is processed or dialog timed out

commit b49134a38c9aacd5416b219c377df7c03776fd1d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 15 23:44:42 2012 +0100

    dialog: lookup dialog by (entry, label) if available for $dlg()
    
    - useful for timeout route where there is no SIP message passing through
      for the dialog

commit b38a0047adeadbb770d31dadbf79feff72b875b7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 15 22:59:19 2012 +0100

    dialog: documented send_bye parameter

commit 84d38ce708a0c19344ddca8eec9241207494db37
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 15 22:52:05 2012 +0100

    dialog(k): new parameter send_bye
    
    - will mark all dialogs for sending bye on timeout, alternative to
      $dlg_ctx(...) which can still be used on a per-dialog basis

commit 6c0fe978f479f633599bfe6e6c06ade171581b3b
Author: Claudio Furrer <elcaio@gmail.com>
Date:   Wed Feb 15 15:21:47 2012 -0300

    pkg/gentoo: Added ebuild v3.2.2

commit 5cb9b9bddb265376ef31f69e45cf1633ab465827
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Feb 15 13:59:19 2012 +0200

    modules_k/rls FIX call child_init also for main process
    
    - call child_init also for main process, it has to be able to do the
      flush to DB at shutdown
    - updated to the last changes in the presence interface

commit 0b6cb25b30ae563986830e46d4fd889c10084272
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Feb 15 13:56:49 2012 +0200

    modules_k/presence_xml If force_active set, db_url not compulsory

commit ae86ca3611398ce365ac4a1776ff0c7e95476bbe
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Wed Feb 15 13:39:55 2012 +0200

    modules_k/presence Fixed DB Storage Modes
    
    - removed db_mode and fallback2db parameters and added two new
      parameters: subs_db_mode and publ_cache
    - fixed and extended the storage modes for subscriptions: Memory Only,
      Write Through, Write Back, DB Only
    - publ_cache parameter offers the possibility to disable publish cache
    - some other fixes:
        - delete subscription only for 481 or 408 reply for Notify
        - call child_init also for main process (no shutdown DB flush was
          being performed)

commit c666c738398bacb5f18c98a2f6e15279abfbb3ff
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 16:42:17 2012 +0000

    modules_k/pua: Clean-up and re-arrangement of send_subscribe.c
    
    - Bit of a tidy-up
    - Also fixed some cases where "temporary dialogs" could be left in hash-table
      or DB if a SUBSCRIBE timed-out or received an error response.
    - Other minor issues (found during presence/rls performance/load-testing) fixed
      too

commit 4b30db3bce5211b34d6988e585a839fa7bcf4c66
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 16:38:27 2012 +0000

    modules_k/pua: Simplified dialog matching in hash-table and DB
    
    - SIP dialogs can be matched with just Call-ID, From-Tag, and To-Tag
      so I have simplified the lookups/queries to just use those.
    - Also some tidy-up of pua_db.c

commit 5c61d09717c7254d42458f549e02fb59d2d52162
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 16:24:09 2012 +0000

    modules_k/rls: made rls_handle_notify() send SIP error responses when things go wrong
    
    - Currently it just silently drops the request - leaving the far end with
      stuck dialogs.
    - After this change 400/481/489/500 responses are returned as appropriate.
    - Also downgraded the "no presence dialog record for non-TERM.." ERR to INFO.
      This was helpful when looking for holes and race-hazards, but it can also
      occur a lot when the system is overloaded - obscuring real problems.
    
      For example...
    
    	RLS			Presence
    	---			--------
    	SUBSCRIBE	-->
    			<--	200 OK
    			<--	NOTIFY
    	200 OK		-->
    	un-SUBSCRIBE	-->
    			<--	503 (overload) - un-SUBSCRIBE not processed
    
    	...later...
    
    			<--	NOTIFY
    	481		-->
    	("no presence dialog record for...")
    
    - With the latest updates RLS, PUA, and Presence dialogs are correctly
      removed when error responses are received (and the error responses
      are sent at the correct times).  Some of these diagnostics are no longer
      errors, or even warnings.

commit ca6d901216360694d7834cde05c875c5c141af66
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 16:18:05 2012 +0000

    modules_k/rls: rls_presentity can now be in a different DB from rls_watchers
    
    - During performance testing it was observed that the rls_presentity table
      is hit very hard.  Separating it off into a different table helps.
    - It may also be a good candidate for use with db_cassandra, and putting it
      in its own DB is a first step.
    - There are two new modparams, one for the dburl and one to give rls_presentity
      it's own clean period.  Leaving these unset maintains the current behaviour.
      Using a different dburl and leaving the new clean period parameter unset
      puts rls_presentity in a different DB, but still uses the existing clean period
      for it (and rls_watchers).
    - Setting the new clean period parameter to 0 means that the timer to clean the
      rls_presentity table is not started at all.
    - Also cleaned up the xcap table query a little.  The arrays allocated for it
      were larger than they needed to be.

commit ee94f5341864d6a9e74e60935f61862832ae1112
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 16:10:52 2012 +0000

    modules_k/rls: New modparam to disable remote (to a domain that is not local) back-end SUBSCRIBEs
    
    - RLS and presence put heavy loads on servers and networks - especially
      interconnects between networks.
    - Using this modparam disables federation with non-local domains and
      prevents RLS sending back-end SUBSCRIBEs to remote destinations.

commit e142f4d8f15c87586ad4e001306a9bf81fbe983b
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 16:00:24 2012 +0000

    modules_k/presence: Presence performance and stability changes
    
    - Changed DB only mode queries to use simpler queries (match on
      Call-ID, From-Tag, and To-Tag - all that should be needed to match
      a SIP dialog).
    - Fixed some whitespace issues
    - Added and changed some error diagnostics.  In particular made Kamailio
      quieter (reduced from ERR to INFO)  when a dialog cannot be found in
      the DB or hash-table.  This can happen in normal-ish use and was just
      too noisy.
    
      Example:
    
    	UA/Proxy		Kamailio
    	--------		--------
    	SUBSCRIBE	-->
    			<--	200 OK
    			<--	NOTIFY
    	503 (overload)	-->	  Dialog removed from DB
    
    	...later...
    
    	un-SUBSCRIBE	-->	  Error message
    			<--	481
    
      The error message doesn't really help here and on a busy system
      floods the logs.

commit f989c490e67b053e7d17e4f2083336083f71bbba
Author: Peter Dunkley <peter.dunkley@crocodile-rcs.com>
Date:   Fri Feb 10 15:53:12 2012 +0000

    Revert "modules_k/presence: Improved handling of retransmitted SUBSCRIBE requests"
    
    - Have recently made a set of better fixes for presence.  Reverting this and
      will commit the new fixes shortly.
    
    This reverts commit e6a50c5c0957a5ad3e08e57ede5be775a41ac24f.

commit 1aedf95f1a73edb3334f03772ac53166df092b0f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 10 13:42:59 2012 +0100

    lib/kcore: cleaned up unused code
    
    - local route and errinfo related code were not used for long time
    - also moved some bits of code to more appropriate location

commit 04979bc60fcd22752ab74521e1e56da9090a1607
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 10 11:28:06 2012 +0100

    kcore: removed local_route.{c,h} - they are not used
    
    - removed unused code from acc related to local route

commit 70e4496102ebdb83f6abfa65b14481752bc73ffc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Feb 10 11:13:49 2012 +0100

    pv: new pv $sid returning server_id value
    
    - server_id can be set via global parameter with same name

commit 8b180f5834081a5500cac6938452c29d60d9f41a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 9 15:42:00 2012 +0100

    dispatcher(k): updated description of flags field

commit 390383e2d0dff755ff9f0eb6a6b1fe627dc29949
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Feb 9 15:28:44 2012 +0100

    dialog(k): match on callid and ftag for no ACK'ed dialogs
    
    - some of the TM callbacks look for the dialog with initial INVITE that
      has no to-tag yet, even that the callback is run on 200ok and dialog was
      updated with this field
    - reported by Jon Bergli Heier

commit 9c9e5a330ddd6be06087af4e2ed2a6d9262f4593
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 8 10:22:49 2012 +0100

    core/selects: handle URN_URI_T

commit e032a85cb2917dcb3dceff6f177f791d181dd803
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 8 10:21:56 2012 +0100

    pv: return of urn schema for $rz if it is the case
    
    - patch by Wolfgang Kampichler, FS#201

commit fecefaf10f6fc4d9bfd6cf7fec4312ea8c8479ec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Feb 8 10:19:00 2012 +0100

    parser/uri: support for URN
    
    - uri parser has support for URNs (e.g. urn:service:sos.fire)
    - t_relay does not break on RURI with URNs
    - PVs are set as follows:
      $ru= "urn:service:sos.fire"
      $rz= "urn"
      $rU= "service"
      $rd= "sos.fire"
    - refer to http://tools.ietf.org/html/draft-ietf-ecrit-framework-13#page-29
      for SIP signaling requirements for SIP proxy servers.
    - patch by Wolfgang Kampichler, closes FS#201

commit 8b9a98e8a8205b2214bf3503afea8aece20e2396
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Tue Feb 7 19:12:36 2012 -0500

    Proper parsing for PVs
    Closes FS#202
     - sr.pv.get fails for retrieving index header variable in Lua

commit 830544e5b349bf808fb0f1ac12cf08610181c64d
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Feb 3 16:12:38 2012 +0100

    modules_k:siptrace  fixed function pipport2su. (error if url doesn't have port)
    	Thanks David Kovarik for report.

commit dd7028a192333f313e7a4c4f84376c15ee65955a
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Feb 3 15:37:07 2012 +0100

    modules:siptrace  added HEPv2 protocol.

commit 19d9cd975f2b1fa23deec8ce6a31da45018a4881
Author: Alexandr Dubovikov <alexandr.dubovikov@gmail.com>
Date:   Fri Feb 3 15:21:42 2012 +0100

    modules:sipcapture  Adedd HEPv2 support. Fixed some SQL and config issues.
    		    Deleted partitioning_mode.

commit bc93a66c539ce89a4fc35f7f9f53b6341f24b53a
Merge: d19ed17 d99d818
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Thu Feb 2 17:09:55 2012 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit d19ed17c6b325522eedf3874f8b112a9315325c5
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Thu Feb 2 17:09:30 2012 +0200

    Renamed the cfg functions to dmq_* instead of *_dmq_*.

commit d99d818745a594f8efa2c28813feb685d82c9ee2
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Feb 2 16:09:09 2012 +0200

    modules/db_cassandra Fixed 'Edited by' list in README
    
    	Disapprove with the practice of making small syntax corrections in the
    	documentation to appear in the 'Edited by' list.

commit 115dc96e2cdeb51214b0b1fef88aecdf3a84e560
Merge: 97a8b89 ca6b59e
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Feb 2 15:54:15 2012 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit ca6b59ee93096fcff4aa7d7798c79b27aa749158
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Thu Feb 2 15:25:23 2012 +0200

    Added config function send_dmq message which exposes the same functionality as the API function.

commit 97a8b898ad2ef57a7ca68379d6887f36dc82af66
Merge: 29a87c8 cc3a0b5
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Feb 2 12:13:51 2012 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit cc3a0b55fe8bdfc106ae782efe55bd0ac2f1be99
Author: Alex Hermann <alex@speakup.nl>
Date:   Thu Feb 2 10:40:35 2012 +0100

    modules_k/pv: pv_trans buffer: malloc must allocate pointers, not bytes.

commit 4bdbca2dc4237fa7a08fe61c4ebe828ec7c92274
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Feb 2 04:16:57 2012 +0200

    core/ser_stun.c:  fixed compile warnings

commit 06e71ad96e8f13bafac1fa5d968538f98bd08df5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 31 23:08:02 2012 +0100

    snmpstats: safe destroy in case of invalid startup
    
    - some pointers were not intialized yet, but due to destroy of no-startup
      they were accessed
    - reported by Klaus Feichtinger

commit 7426c76dfb6750b344e19a632c16374c162f5090
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 31 15:21:46 2012 +0100

    rtpproxy: send timeout socket only for U command
    
    - optional parameters are not allowed for other commands
    - patch by Nick Altmann (nikbyte), FS#196

commit 7dd4828530a70df212cedd298418c1a9facd0326
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 31 12:57:30 2012 +0100

    utils: free xcap_tree for xcap_auth_status()
    
    - patch by Laura Testi

commit 793f9f09720340c0e65648dc4f90b145df514c33
Author: Claudio Furrer <elcaio@gmail.com>
Date:   Tue Jan 31 00:19:19 2012 -0300

    pkg/gentoo: Added ebuild for versions 3.1.5 and 3.2.1

commit 1c6fed07a177593634a8c31a8d004f0aab165d16
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Jan 31 01:20:10 2012 +0200

    modules/lcr: added lcr.defunct_gw rpc command

commit e6a50c5c0957a5ad3e08e57ede5be775a41ac24f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jan 30 17:06:42 2012 +0000

    modules_k/presence: Improved handling of retransmitted SUBSCRIBE requests
    
    - handle_subscribe() doesn't handle retransmitted SUBSCRIBEs properly. This was
      noticed with back-end SUBSCRIBEs from RLS under heavy load (also tried TCP
      here but under-load this caused a different set of problems with buffer
      sizes and buffers taking too long to process).
    - Although this was originally observed with RLS back-end SUBSCRIBEs it
      appears to be a general issue when UDP is used.
    - There were two main problems:
      1) On an un-SUBSCRIBE the record in the hash-table or DB will be removed.  If
         the un-SUBSCRIBE is retransmitted there is no record to be found and
         handle_subscribe() fails.
      2) After fixing 1, and on re-SUBSCRIBE, remote CSeq's with lower than
         expected values cause failures.  This can also happen when there are
         retransmissions.
    - The fix was to catch both these cases and treat them as a special class of
      error.  In these two cases and when the protocol is UDP, a correct-looking
      2XX response is sent, but no further processing (database updates, sending
      NOTIFY, and so on) is performed on the SUBSCRIBE request.
    - Also modified the query in get_database_info() to just use Call-ID, To-tag,
      and From-tag for dialog matching (so it duplicates the query from
      get_stored_info()) as the query that was there looked a little aggressive.

commit 96ec9f42de197b9113d609ef93aba1cf29019c90
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Mon Jan 30 15:31:00 2012 +0200

    empty contact_user str in case the contact user is missing.

commit 076ae21a14ca76a18e2b6c20dba2fc59e33b1cdf
Author: Marius Bucur <marius.bucur@1and1.ro>
Date:   Mon Jan 30 15:07:10 2012 +0200

    the contact_user field in the sip_capture database was never filled.

commit 6d30bd740303677711de437c4a3fec15da7344a8
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jan 30 11:28:59 2012 +0000

    modules_k/pua: Fixed occasional seg fault in PUA
    
    - This was added by the fix to the race hazards
      (Commit ID: e627bc31776b521a1078b2a004e8ed179521cae2)
    - It only happens in certain error situations (which should not occur anyway -
      these are under investigation now) and was found during an over-weekend
      soak test.
    - Found and fixed by Paul Pankhurst @ Crocodile RCS

commit 650dc84f58b1d3059e0cb907e9d412ea7ac60454
Merge: 65f41ac 184187a
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Mon Jan 30 11:13:55 2012 +0000

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      Makefile: merged options for gcc 4.5 and 4.6 in 4.5+
      Makefile: skip mtune parameter for gcc 4.6 on x86_64

commit 184187a6afe701b793529580fc0f01183eab21f2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 28 11:30:22 2012 +0100

    Makefile: merged options for gcc 4.5 and 4.6 in 4.5+
    
    - they were the same (skip mtune parameter for x86_64)

commit d97bf62975a1f9bbeb497145605879ab1fc4877f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 28 10:24:51 2012 +0100

    Makefile: skip mtune parameter for gcc 4.6 on x86_64
    
    - it is redundant and throws error, at least on opensuse 12.1

commit 65f41ac654fd3a7251673253867a5aa33b4fb758
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jan 27 16:07:18 2012 +0000

    modules_k/pua: Wrong type in local variable
    
    - I used an int when I should heve used an unsigned int

commit 5db228f1a47c8119aeba3731e0129459a6c1e8e4
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 27 10:54:54 2012 -0500

    acc_radius/misc_radius(k): use uint32_t type instead of UINT4
    
    - UINT4 is not defined by freeradiusclient library
    - libradiusclient-ng typedefs anyhow UINT4 to uint32_t in radiusclient-ng.h

commit e627bc31776b521a1078b2a004e8ed179521cae2
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Jan 27 15:34:16 2012 +0000

    modules_k/pua: Fixed race hazards relating to RLS back-end SUBSCRIBEs
    
    - These resulted in the "no presence dialog record for non-TERMINATED state..."
      error message coming out of RLS a lot.
    - When in DB only mode if we receive a back-end NOTIFY we look for a matching
      dialog.  If we don't find one we search the DB again for a matching temporary
      dialog.  You can get the situation where both DB queries fail because a 200
      OK to a SUBSCRIBE is processed and the dialog made "complete" between the
      two searches.  This is now fixed.
    - On the sending side (for both hash table and DB only mode) you have can have
      two dialogs (one temporary and one full) stored for a short period of time.
      This is because the full dialog is written before the temporary one is
      deleted.  This can make the lookup when a back-end NOTIFY is received fail
      because only one record is expected.  This is now fixed - instead of
      inserting and then deleting we do a swap (while the hash table is locked) and
      an update operation on the DB.

commit 29a87c81bab87c5b34d053ed5937cfa271d756f2
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Fri Jan 27 11:24:37 2012 +0200

    modules/db_cassandra Addition in documentation
    
    	Specified how keyspaces and column families should be created in
    	Cassandra

commit a684e393bce00a89c9aa66647472b56dea567c2e
Author: Juha Heinanen <jh@tutpro.com>
Date:   Fri Jan 27 04:53:47 2012 +0200

    modules_k/siputils: allow use of is_uri_user_e164() from any route.

commit 569c0b7adf93773677dd1cc98957c74d40752982
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Jan 26 13:59:06 2012 +0000

    modules_k/rls: Memory leak in parse_subs_state() in resource_notify.c
    
    - Also the function didn't appear to be doing quite the right thing.
    - Found by Paul Pankhurst @ Crocodile RCS and fixed by Peter Dunkley @ Crocodile RCS

commit 68295d124ee2d36f3e8d31eac5a76c4d7c89f5b8
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Jan 26 15:27:21 2012 +0200

    modules/pua Fixed memory leaks in limbxml2

commit 3c3cc57f6d4938270efbb89426d80a994be1aaa7
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Thu Jan 26 15:14:43 2012 +0200

    modules/pua_xmpp Fixed some memory leaks in libxml on error casses

commit 18107462634b8cf55fcc73e397bf9035cf1705f9
Author: Andreas Granig <agranig@sipwise.com>
Date:   Wed Jan 25 18:53:24 2012 +0100

    modules/tmrec: Ported Perl's Time::Period module.
    
    - Make Time::Period (http://search.cpan.org/~pryan/Period-1.20/Period.pm)
      available as native C implementation.
    
    Author: Richard Fuchs <rfuchs@sipwise.com>

commit d9af95bf84ad3ae9ed53ba15c7f518597cefcf3a
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jan 25 17:27:26 2012 +0000

    modules_k/pua: Last fix (PUA memory leaks) caused crashes in hash-table mode
    
    - Fix by Paul Pankhurst @ Crocodile RCS

commit 91e2af3efafd3f3143830399e159331648d96763
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jan 25 14:54:37 2012 +0000

    modules_k/pua: Fixes to memory leaks in PUA when using database only mode
    
    - Found and fixed by Paul Pankhurst @ Crocodile RCS

commit 2edb81dd7fe3ec9564dcd6afac89f068158663ea
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jan 24 18:01:31 2012 +0000

    modules_k/rls: Fixed a small whitespace issue in send_notifies()

commit cace2ad053da72f608c4434c027f5b6b069c1281
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jan 24 17:38:50 2012 +0000

    modules_k/rls: Removed unnecessary subscription and external_hash arguments from send_notifies()
    
    - These were not used, or rather, not used in any sensible way in send_notifies()
    - Fix by Andrew Miller @ Crocodile RCS

commit ca938a37c87782c709b441c682f723d07b05c64c
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jan 24 17:34:52 2012 +0000

    modules_k/rls: Fixed memory leak in process_list_and_exec()
    
    - xmlFree was called on rl_doc, but xmlFreeDoc should have been called
    - Found and fixed by Paul Pankhurst @ Crocodile RCS

commit 19abd6497cc1431d97383eeea76c34c4a1c5a9da
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jan 24 17:31:27 2012 +0000

    modules_k/rls: Fixed memory leak in send_full_notify()
    
    - Package memory is allocated for URIs in add_resource_to_list() but never freed.
    - It should be freed in send_full_notify() at the same time as the memory allocated
      for the list itself is freed.
    - Found and fixed by Paul Pankhurst @ Crocodile RCS

commit f968ac71db55e7ac05ce72d624dfc075eeb7254f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jan 24 17:23:47 2012 +0000

    modules_k/rls: Fixed some DB handling stuff
    
    - Removed the (unnecessary) rls_db2 connection
    - Close the XCAP database connection in destroy()

commit fcd33bdfa3e5a08f22f4c77fbbf1db53d0afb4bd
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Tue Jan 24 17:18:34 2012 +0000

    modules_k/presence_xml: Fixed memory leak in pres_watcher_allowed()
    
    - xmlFreeDoc() never called for xcap_tree
    - Found and fixed by Paul Pankhurst @ Crocodile RCS

commit 8c41c5f0f0786b9ef948e2b271d676f88c2e7172
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 23 22:37:45 2012 +0100

    utils/protoshoot: set default values for addr, port and count
    
    - respectively 127.0.0.1, 5060, 1

commit 537302076746d2818abaf704e271cc47d4135d5a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 23 08:38:52 2012 +0100

    test/udp_flood.c moved to utils.protoshoot
    
    - tool for sending file content over network
    - useful to re/send SIP messages stored in files

commit 13464e8d055363e820522e566c24cde043d2e00f
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Mon Jan 23 18:43:21 2012 +0200

    modules/db_cassandra  Added support for queries without condition
    
    	Now it is possible to fetch all rows in a table.
    	Tested with domain module.

commit 1db6c72af33b20234cc16483dc8dd56a83f514a2
Author: Andrey Mazo <ahippo@yandex.ru>
Date:   Mon Jan 23 15:20:22 2012 +0400

    Fix license in atomic_alpha.h
    
    This reverts an accidental change from 6aaba8e96fc87e1938b7abfdb5964714e4adfa3c.

commit bdbacf559134022856f5723a91fe7e130ceada29
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 20 19:06:59 2012 +0100

    pua_usrloc: added branch_flag parameter
    
    - mark the contact for sending PUBLISH via setbflag(branch_flag)

commit 266fa4e2cd62f58ee1f2eec2a5a83bc3028d194a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 20 19:04:21 2012 +0100

    pua_usrloc: documented branch_flag parameter

commit deb2a87687f2ca04e7110e70d049bf8f47328bda
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 20 11:26:00 2012 +0100

    msrp: added $msrp(conid) - returns the internal id of TCP connection

commit e75c2636cdab55911493a636af743918071518bc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 20 11:19:05 2012 +0100

    msrp: fixed length in comparison of var names
    
    - reported by A. Heggestad

commit c34a44f5a5b7d375a3b1716dbb5a2d7a6183dff6
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 09:30:47 2012 -0500

    dialog(k): A few documentation enhancements.
    
    - Fixed some grammatical and spelling errors.
    - A few stylistic modifications.
    - Expanded discussion of potential use cases.

commit 401a81e1a8eb435e853421f4b1ee5aeb024cbdda
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 08:39:48 2012 -0500

    db_cassandra: Minor documentation edits.
    
    - Minor clarifying and stylistic edits to the documentation.

commit ea4ec2d384890bfebec659888459cafdca37d61e
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 08:13:27 2012 -0500

    app_mono: Minor documentation edits.
    
    Minor stylistic improvements to documentation for app_mono.

commit 2efdcc870081b60883825732961d8f25f9442af0
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 07:55:02 2012 -0500

    Minor stylistic edits to documentation.

commit af75111cbc47c4f4134d22561bd5796ff3f27955
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 07:45:09 2012 -0500

    Minor stylistic edits to documentation, and translation of Latinate
    language word "desponible" to "available", as "desponible" does not
    exist in English.  :-)

commit a88d2286d84653f634721d02cb29c6d1f1067117
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 07:41:12 2012 -0500

    Minor stylistic edits to documentation.

commit 112f6dcd85301471e13a9f853ae414e7a74b2d28
Merge: ad54eb1 860e8e7
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Thu Jan 19 07:35:44 2012 -0500

    Merge branch 'master' of ssh://git.sip-router.org/sip-router

commit ad54eb1cdd7c9a2b01a3e9a445d36e6c4586b50f
Author: Alex Balashov - Diminuendo-2 <evariste-admins@evaristesys.com>
Date:   Thu Jan 19 07:33:28 2012 -0500

    Grammatical, structural and idiomatic formulation edits to MSRP
    module documentation.

commit 860e8e7790ad9eabca14dd492f6a57375ab6ea1f
Author: Alex Balashov - Diminuendo-2 <evariste-admins@evaristesys.com>
Date:   Thu Jan 19 07:33:28 2012 -0500

    Grammatical, structural and idiomatic formulation edits to MSRP
    module documentation.

commit 3f656f3bcc029b74d94007a29458de07bc99ccdd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 18 12:35:59 2012 +0100

    Makefile: devel version set to 3.3.0-dev5

commit b8f7137b4f3f8864e745e08ad06ea28b0a543e1f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 18 12:03:10 2012 +0100

    lib/srutils: added srjson - lightweight json parser
    
    - srjson is adapted from cJSON to fit better in the local environment
      (use pkg/shm memory per document, cope with str-strings)

commit cc703743a35419607d91fc004819beab3289398c
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jan 18 10:25:45 2012 +0000

    modules_k/presence: Fix for crash in presence during Kamailio start if the active_watchers table contains lots of records (more than fetch_rows amount) and the memory hash table is used
    
    - Fix Paul Pankhurst @ Crocodile RCS

commit 5e77a1a7216c2ca1697ed8f392b4d4b29aba024d
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Jan 18 10:23:49 2012 +0000

    modules_k/pua: Fix for PUA crash when the DB clean runs if there are lots of records (more than the fetch_rows amount) in the DB
    
    - Fix by Paul Pankhurst @ Crocodile RCS

commit 6c829c1794fb79fbce213238e88346522f584fcf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 18 10:19:18 2012 +0100

    rtimer: use faked msg from lib to get a src IP address
    
    - reported by Uri Shacked

commit 5b2134e3d78c4874263e20581cafad9fb44391ab
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Jan 17 16:23:17 2012 +0200

    clist.h Rever last changes
    
    	Wrong casts

commit 9c74038a3e462b63b64eb6aad23bd07b177a6340
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Jan 17 11:28:35 2012 +0200

    Makefile: excluded db_cassandra from default compiled modules

commit d66b99030debbca3f52cc57c82bedc99e823e51c
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Jan 17 11:09:11 2012 +0200

    modules/usrloc Added module parameter to work with db_cassandra
    
    	New module parameter db_update_as_insert. If set to 1 it will
    	replace update operations with insert operations as required by the
    	db_cassandra module.

commit 806db5e773e7d5289e68062cc9fbc61ad3637f19
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Jan 17 11:05:31 2012 +0200

     Added schema files for db_cassandra module
    
     The schemas are for location, subscriber and version table.

commit 13fb8f05cadae84fc2f3479edd873d0bb0a09a60
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Jan 17 11:02:50 2012 +0200

     Fixed compile warnings - casts from void at memory allocation

commit c0a922014e1e648a07ee64177dca2108fca5b774
Author: Anca Vamanu <anca.vamanu@1and1.ro>
Date:   Tue Jan 17 10:47:20 2012 +0200

    modules/db_cassandra Added new module DB interface for Cassandra backend
    
    	The module implements a database driver and can be used by other
    	modules to perform database operations instead of db_mysql, for
    	example. It has some limitations in the conditions on which the
    	queries are performed, so it does not suite every application. The
    	module has been tested with auth_db and usrloc modules and it is
    	very suited for implementing a distributed location service. Read
    	more about it in the README file.

commit 0c95e9cd63b7e121e9f27f5f16efa9bd78bf5aec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 17 09:35:24 2012 +0100

    msrp: docs extended with more details about usage

commit 19e138b57e984b87c6d8eb930cd1a09422c8397f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 16 22:40:46 2012 +0100

    msrp: new module to handle MSRP (RFC4975)

commit bcae9bab00ee8c180993a46bb9013c8cb3173913
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 16 18:20:58 2012 +0100

    auth: new funtion to return WWW-Authenticate hdr in a PV

commit 182410942b81e0a9b2820068a7cc1af916f747e8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 16 16:36:24 2012 +0100

    core: helper function for mod fixup when all parameters are spve

commit eaa6473333649585c3098e00bb114d1041ff72bf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Jan 14 22:12:58 2012 +0100

    core/tcp: use term from MSRP spec to name the variable

commit 51655771af791109551020506371a4f4f72d1aa3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 13 12:46:20 2012 +0100

    core: two more events for handling http and msrp
    
    - one to be called for http/1.1 end of headers for checking on '100
      Continue' request
    - one to be called when a msrp message is received

commit 122e01f35390aed08961726c18bc96dce3971234
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 13 12:17:24 2012 +0100

    core/tcp: support for receiving MSRP messages
    
    - controlled by define READ_MSRP, on by default now, can be turned off
      by defininf NO_READ_MSRP

commit 1e7b88508303cc84a045cc1fdd18a8e052888e9a
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Jan 14 00:51:51 2012 +0200

    modules_k/permissions: use of str2ip6() has to be ifdef'ed.

commit edf5e385caac8b73b167dfb1604a489a6feb5bfd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 12 18:55:22 2012 +0100

    core: option to set number of workers per listen socket
    
    - new cfg global parameter: socket_workers - set the number of worker
      processes for the next listen socket
    - used before listen on udp and sctp socket - overwrites
      children/sctp_children value for that socket
    - used bofer listen on tcp and tls socket - adds extra tcp workers,
      these handling traffic only on that socket
    - socket_workers is reset with next listen socket that is added, thus
      use it for each listen socket where you want custom number of workers
    - if this parameter is not used at all, it is the same behaviour as so
      far
    
    Example for udp sockets:
    
    children=4
    socket_workers=2
    listen=udp:127.0.0.1:5080
    listen=udp:127.0.0.1:5070
    listen=udp:127.0.0.1:5060
    
    - it will start 2 workers to handle traffic on udp:127.0.0.1:5080 and 4
      for each of udp:127.0.0.1:5070 and udp:127.0.0.1:5060. In total there
      are 10 worker processes
    
    Example for tcp sockets:
    
    children=4
    socket_workers=2
    listen=tcp:127.0.0.1:5080
    listen=tcp:127.0.0.1:5070
    listen=tcp:127.0.0.1:5060
    
    - it will start 2 workers to handle traffic on tcp:127.0.0.1:5080 and 4
      to handle traffic on both tcp:127.0.0.1:5070 and tcp:127.0.0.1:5060.
      In total there are 6 worker processes

commit 55a3671f99c31455d2d460ef81a0bc6dabd1c338
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 12 09:18:31 2012 +0100

    ctl: compile time option to use system memory allocator
    
    - flag in module Makefile: -DCTL_SYSTEM_MALLOC
    - turned on for the moment

commit 62e5680c9dd4eccb0f177415b7624af832c87693
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 11 18:40:57 2012 +0100

    lib/kcore: set basic receive info for faked message
    
    - used UDP/IPv4, port 5060 and 127.0.0.1 for src and dst details

commit bf692bcf4708e0c1d084bea8def9fc0d96d3f832
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 11 15:50:24 2012 +0100

    tmrec: new module for time recurrence matching
    
    - recurrence definitions based on RFC2445

commit ba04bebd37cb8786db4b0e46c4455d956179433a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 11 15:46:36 2012 +0100

    lib/srutils: new internal library to collect common shared code for modules
    
    - for now includes tmrec - time recurrence matching library
    - used by tmrec module
    - cpl-c and drrouting embed tmrec -- planned to migrate to use of the
      internal lib

commit f101dacbf640f08e2133c197c465ff7d312dda1b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Jan 11 12:04:56 2012 +0100

    app_lua: lookup pv in cached table for unset and isnull

commit f7f5ca4fdf63b3bc026dd9114b00cee2ab099801
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 10 23:33:00 2012 +0100

    parser: relocated helper functions

commit 997195274d2fc9d877fb2f3ff127e50773ebc4ab
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 10 23:07:36 2012 +0100

    sanity: new checks for duplicates of tag params in To/From
    
    - the values are used to identify SIP dialogs and must be unique
    - reported in FS#177

commit bd5cfa5cd4fdc5f852c7dc51f27573370a519b13
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 10 23:07:04 2012 +0100

    parser: typedef'ed To structures

commit da8b473569d8608df8d5da67e2601b4a15c45265
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 10 12:34:00 2012 +0100

    Makefile: devel version set to 3.3.0-dev4

commit 098d93bd5c498df561fd514f0d73f0369d7cac7c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 10 12:11:48 2012 +0100

    app_lua: sync'ed the list of exported modules to lua

commit 9505c4c249c1b39fb1b077fb5b6d72ddae638be3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 10 11:57:55 2012 +0100

    app_lua: export sanity mod api to lua
    
    - patch by noc [at] nelcom-voip.com

commit 00391b9f3d212bd5a953153a08db9071b70aa854
Merge: c2429a5 8033b34
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Fri Jan 6 20:32:50 2012 +0100

    Merge branch 'treimann/master_tm-extend-callbacks'
    
    * treimann/master_tm-extend-callbacks: (43 commits)
      core: new cfg parameter fork_delay
      textopsx: set the tcp clone rcvbuf on in mod init
      topoh: set the tcp clone rcvbuf on in mod init
      core: new cfg global parameter tcp_clone_rcvbuf
      app_lua: don't start if a Lua API registered module is not found
      auth: documented realm_prefix parameter
      auth: re-introduced realm_prefix parameter
      pua: is_dialog() returns 1 if there is a temporary dialog
      Makefile: added app_mono module to exclude_modules list
      app_mono: new module to run managed code embedded
      pua: check if totag len >0 before comparing it
      dispatcher: give faked msg to event routes execuition
      mediaproxy: handle DLGCB_CONFIRMED event
      pua_dialogingo: handle DLGCB_CONFIRMED_NA
      mi_rpc: fixed warning of dereferencing type-punned pointer
      modules: fixed several compile warnings
      pua(k): use dedicated function to free tm dlg
      presence(k): renamed tm dlg functions to avoid potential conflicts
      pua: free parsed rr when sending subscribes
      srdb1: schema update for address table of permissions module
      ...

commit 8033b34c31e5b71a6b0ba2fa6f62d27d8710c716
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 12:06:02 2012 +0100

    core: new cfg parameter fork_delay
    
    - number of usecs to wait before forking a process
    - default is 0, don't wait
    - useful in case there are some throttling policies for the system
      running the sip server (e.g., number of new db connections per second)
      -- you can introduce delays so that worker processes are not forked at
      once

commit 9d03ded788ebe9c1e58cdef13a613b862c327c19
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 11:50:43 2012 +0100

    textopsx: set the tcp clone rcvbuf on in mod init

commit 4ac086250809c7a805fe959361494e7effc91e01
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 11:50:04 2012 +0100

    topoh: set the tcp clone rcvbuf on in mod init

commit 786fc55ac3f8b9d39cccc935908202afb2c090ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 11:42:10 2012 +0100

    core: new cfg global parameter tcp_clone_rcvbuf
    
    - control cloning of tcp receive buffer, default is 0 (no cloning), set
      to 1 for cloning

commit 99c3f6c6ca2199ced1fce23fedd7b51951d47954
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 5 12:14:52 2012 +0100

    app_lua: don't start if a Lua API registered module is not found

commit 25d81332e5b61aa17f435db2da2faa3c76415743
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 5 10:51:56 2012 +0100

    auth: documented realm_prefix parameter

commit 3d734a8a267f60da763f7a8a4dded4e88bb616b2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 5 10:48:10 2012 +0100

    auth: re-introduced realm_prefix parameter
    
    - strip its value from realm, if parameter is set
    - reported by Kelvin Chua

commit 2dfdc5ad65af0ad62563efade0bd4a86210bd57d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 3 18:02:39 2012 +0100

    pua: is_dialog() returns 1 if there is a temporary dialog
    
    - reported by Laura Testi

commit 4b0f98de6348a3ce35477f35df602fdba8ba8224
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 2 23:44:09 2012 +0100

    Makefile: added app_mono module to exclude_modules list

commit 519fe26d13942d6fe931c1ac3c2bd6657ca2bb49
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 2 23:39:56 2012 +0100

    app_mono: new module to run managed code embedded
    
    - embeds the mono project interpreter
    - allows execution of manged code from config file, such as assemblies
      for C#/.NET, Java, a.s.o.
    - can load the assembly at startup or read it every time before
      execution

commit 853640715cee6b34365ae032377eeb8fb851bd84
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 16:22:28 2011 +0100

    pua: check if totag len >0 before comparing it
    
    - more on proper free of dlg_t structure
    - patch by Laura Testi

commit 3c3cc0d9f75561bfa137056a29d1ae2ef35c0bf9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 12:53:57 2011 +0100

    dispatcher: give faked msg to event routes execuition
    
    - some funtions may return prematurely if no msg exists
    - reported by Mino Haluz

commit 2bff9b3d5cf2314df0eb1f2c037f5915e89e3d36
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 10:10:26 2011 +0100

    mediaproxy: handle DLGCB_CONFIRMED event
    
    - ACKs may have SDP
    - patch by Jasmin Schnatterbeck (FS195)

commit 9eed2a4a5a23c4462e6192d941f6bfddf00ff245
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 09:40:07 2011 +0100

    pua_dialogingo: handle DLGCB_CONFIRMED_NA
    
    - patch by Tomek Kotecki (FS#187), Jasmin Schnatterbeck (FS#195)

commit 107d904874b4574ac17956592b6a443486dee0a9
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 09:36:48 2011 +0100

    mi_rpc: fixed warning of dereferencing type-punned pointer

commit fc9a175f0657ad1f55520d720fcda7a1841b0b9c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 27 11:46:37 2011 +0100

    modules: fixed several compile warnings
    
    - removed unused variables, initialized some

commit 2d0d9156335ce244762df0527d907babd57e50a0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 13:16:46 2011 +0100

    pua(k): use dedicated function to free tm dlg

commit a3bfedfeace3c52899e7326f5d8513d44c353a7d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 13:16:15 2011 +0100

    presence(k): renamed tm dlg functions to avoid potential conflicts

commit 576d0cbaf83b320e7f75a0bf36f4afd625fb8747
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 12:48:42 2011 +0100

    pua: free parsed rr when sending subscribes
    
    - reported by Laura Testi

commit 5344749074976f0168595b2d822e9fb24ab554a5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:35:25 2011 +0100

    srdb1: schema update for address table of permissions module
    
    - kamctl db scripts updated accordingly

commit b50e4b59dd246accbf68490d4904caa6e6871894
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:35:02 2011 +0100

    permissions(k): support for ipv6 in address-related functions

commit 4ec2dd2e81e22d852dfa9a33f218654fca751051
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:34:00 2011 +0100

    tm: rest the pointer of hash table after free to avoid double free on false start

commit 579497419bea843f356c2f88bc902f53e7ed6644
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:33:26 2011 +0100

    libsrdb1: macro to return unsigned it from db value

commit 42731af6da531e47f70346cb9574b42e36687e20
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:32:24 2011 +0100

    core: function to match ip address to net address with bitmask

commit b5bcac448ef4bfe38bbd48da9ebfdcaabc5fb437
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 22 14:06:08 2011 +0100

    core: log message about slow timer printed now as warning

commit ea68fbb70e1ad4d8b57f238404e764402906a66a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 22 14:00:52 2011 +0100

    kamctl: update db table definitions after change to mtrees key
    
    - reported by Andreas Granig

commit 73a93c3a3cef14d975d84337853af3da782ce9d2
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Thu Dec 22 11:47:41 2011 +0200

    Removed the constraint in siptrace to have the tm and sl modules loaded beforehand.
    
    The explicitly module specifies these dependencies as being optional.

commit 8765be515f3314226027ad456174ab895855676b
Author: Andreas Granig <agranig@sipwise.com>
Date:   Thu Dec 22 00:23:36 2011 +0100

    utils: Updated auto-generated db schema changes.
    
    - Generated schema files for lcr ip_addr changes.

commit cd696686a9e78cac71d3a3ff7ab52bbca1d08e28
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 17:42:23 2011 +0100

    sdpops: readme is updated with documentation of latest additions

commit c141441d30bcebbf1c02af367613e8ff32695672
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 15:15:25 2011 +0100

    sdpops: added sdp_remove_media(type)
    
    - remove the media streams matching the type
    - e.g., sdp_remove_media("video");

commit 6d7aabccd5acb4d93228d1a15eeeadf37a10f800
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 14:54:29 2011 +0100

    core: sdp parser - keep link to start and lenght of sdp content
    
    - useful in multi-part bodies and sdp operations

commit 5152a64d9aef2b6c20564ce69b22ddb1d4101973
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 14:18:51 2011 +0100

    sdpops: keep codecs functions can do filtering on media type
    
    - a second optional paramter with media type can be given to keep codecs
      function to avoid removing codecs from wrong media stream

commit afe9f974862a6ed87eee3b60110f612067215398
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 13:56:15 2011 +0100

    sdpops: added functions to test the presence of codecs
    
    - sdp_with_codecs_by_id(idlist)
    - sdp_with_codecs_by_name(namelist)

commit a5aca49165e97f91a820068efac001e260103fd5
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Dec 21 16:21:07 2011 +0100

    libsrdb1: Make IPv6 addresses fit into lcr_gw
    
    - Resize lcr_gw.ip_addr column to fit IPv6 addresses.

commit d1f44a95f6ca16fcf691981112e97a9dcf5ae26c
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Dec 21 16:19:31 2011 +0100

    lcr: added IPv6 support.
    
    - Support both IPv4 and IPv6 addresses as ip_addr.

commit c2429a58e6b6c23094c73a267004330a82404a5a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 12:06:02 2012 +0100

    core: new cfg parameter fork_delay
    
    - number of usecs to wait before forking a process
    - default is 0, don't wait
    - useful in case there are some throttling policies for the system
      running the sip server (e.g., number of new db connections per second)
      -- you can introduce delays so that worker processes are not forked at
      once

commit 843c3bf661cc64a5640f8a3aa9d7aab21115d5ff
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 11:50:43 2012 +0100

    textopsx: set the tcp clone rcvbuf on in mod init

commit f433198d66d1422bc34bf039df3fb20d35388ff2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 11:50:04 2012 +0100

    topoh: set the tcp clone rcvbuf on in mod init

commit 691a34390725b4a84d50d12b76bcb69c32a50071
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Jan 6 11:42:10 2012 +0100

    core: new cfg global parameter tcp_clone_rcvbuf
    
    - control cloning of tcp receive buffer, default is 0 (no cloning), set
      to 1 for cloning

commit 8b56ce5162f480a11d0b59a5de9a7c37e9e84d1b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 5 12:14:52 2012 +0100

    app_lua: don't start if a Lua API registered module is not found

commit 6f06566ab7f48162a01725e07c72649aeb4b5ecc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 5 10:51:56 2012 +0100

    auth: documented realm_prefix parameter

commit 00d758fbf7c7db97f15db061b67e0cfb49e28768
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Jan 5 10:48:10 2012 +0100

    auth: re-introduced realm_prefix parameter
    
    - strip its value from realm, if parameter is set
    - reported by Kelvin Chua

commit 5f1e2caac5e6d68629a1a0956861bf7da6e05e31
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Jan 3 18:02:39 2012 +0100

    pua: is_dialog() returns 1 if there is a temporary dialog
    
    - reported by Laura Testi

commit b2740f62d775de3bd2d5ae4a99ac43eea8c4927a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 2 23:44:09 2012 +0100

    Makefile: added app_mono module to exclude_modules list

commit fa893fb17b703c47be9437e114481f188c62aede
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Jan 2 23:39:56 2012 +0100

    app_mono: new module to run managed code embedded
    
    - embeds the mono project interpreter
    - allows execution of manged code from config file, such as assemblies
      for C#/.NET, Java, a.s.o.
    - can load the assembly at startup or read it every time before
      execution

commit e1128c45dacf5b622c18f1cb8db0c45d8e6c9600
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 16:22:28 2011 +0100

    pua: check if totag len >0 before comparing it
    
    - more on proper free of dlg_t structure
    - patch by Laura Testi

commit 412d4d254474be9d99602ca0f1d4c2aba6e7ffde
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 12:53:57 2011 +0100

    dispatcher: give faked msg to event routes execuition
    
    - some funtions may return prematurely if no msg exists
    - reported by Mino Haluz

commit e5ae5137ce6fef73f366b725f16c84dc15721141
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 10:10:26 2011 +0100

    mediaproxy: handle DLGCB_CONFIRMED event
    
    - ACKs may have SDP
    - patch by Jasmin Schnatterbeck (FS195)

commit 66d204b37b48127ac25632811e189b3af3b4fb14
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 09:40:07 2011 +0100

    pua_dialogingo: handle DLGCB_CONFIRMED_NA
    
    - patch by Tomek Kotecki (FS#187), Jasmin Schnatterbeck (FS#195)

commit 78a8bcd6030afc44c7c3cbc933278b1f2765b663
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 29 09:36:48 2011 +0100

    mi_rpc: fixed warning of dereferencing type-punned pointer

commit 7400516f1e301226136604c520291924a83dec8b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 27 11:46:37 2011 +0100

    modules: fixed several compile warnings
    
    - removed unused variables, initialized some

commit 464897bd3d4713e7a30c4e505449942e4251b328
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 13:16:46 2011 +0100

    pua(k): use dedicated function to free tm dlg

commit 57d3284f21b7ea6f78386ffbaface49dfa9cdcec
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 13:16:15 2011 +0100

    presence(k): renamed tm dlg functions to avoid potential conflicts

commit 1b3cfa60a5b5c7d435704d44b7c495b7e6aa84c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 12:48:42 2011 +0100

    pua: free parsed rr when sending subscribes
    
    - reported by Laura Testi

commit e593683639abe5192a5da0ac1f3b4a35c45e00f3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:35:25 2011 +0100

    srdb1: schema update for address table of permissions module
    
    - kamctl db scripts updated accordingly

commit 7d4536e28cc4d3487121be613046bbfc9c3005df
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:35:02 2011 +0100

    permissions(k): support for ipv6 in address-related functions

commit 7728464362af67eff4dc105f16a1d42c72407cca
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:34:00 2011 +0100

    tm: rest the pointer of hash table after free to avoid double free on false start

commit a75afdd69929eabf014ba5958898182ae2478dcb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:33:26 2011 +0100

    libsrdb1: macro to return unsigned it from db value

commit c1a4788cfd058e3eb52330eac04344be5fc93e35
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 23 09:32:24 2011 +0100

    core: function to match ip address to net address with bitmask

commit 566c30dd38f7e29903810472c5e1e9cde41297c7
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 22 14:06:08 2011 +0100

    core: log message about slow timer printed now as warning

commit 0036521d5ad043ba5f6c07463a67b61ae76720b0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 22 14:00:52 2011 +0100

    kamctl: update db table definitions after change to mtrees key
    
    - reported by Andreas Granig

commit 68d282e2898db7b00de473a943af900f6659ce54
Author: Marius Bucur <marius@marius-bucur.ro>
Date:   Thu Dec 22 11:47:41 2011 +0200

    Removed the constraint in siptrace to have the tm and sl modules loaded beforehand.
    
    The explicitly module specifies these dependencies as being optional.

commit b30267a4669a7621a4e9b86030d59b6ef9759517
Author: Andreas Granig <agranig@sipwise.com>
Date:   Thu Dec 22 00:23:36 2011 +0100

    utils: Updated auto-generated db schema changes.
    
    - Generated schema files for lcr ip_addr changes.

commit dfaee1cdfaaf33a0232bbb61cde018fadce500e7
Merge: 86a921a 7defb42
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Wed Dec 21 20:01:06 2011 +0100

    Merge branch 'master' into treimann/master_tm-extend-callbacks
    
    * master: (201 commits)
      modules: bunch of READMEs regenerated to be sync'ed with docbook
      modules: coherent naming of Statistics section in docbook
      sl: regenerated the readme
      sl: documented exported statistics
      core/tcp: define option TCP_CLONE_RCVBUF to turn off/on tcp rcv buffer cloning
      pdt(k): added rpc command pdt.reload
      pdt(k): MI commands can be disabled via define PDT_NO_MI
      pdt(k): updates to documentation
      pdt: refactored prefix-domain translation
      tcp: fix for ENOTCONN on newer FreeBSDs
      dialplan: added fnmatch (2) matching operator
      core/tcp: init max_tls_connections in tcp options check
      core/tcp: proper init of parameter tls_max_connections
      textopsx: added fnmatch(value, expr, flags) function
      core: added function to help fixup of PVE, string and expressions
      registrar(k): maintaining one contact per AoR has priority over max_contacts
      lib/srdb1: Enable non-pooled database connections to be defined.
      modules_k/presence: Added additional return value to pres_auth_status() for polite-block
      tls: new parameter 'renegotiation' to enable/disable client renegotiation
      tls: use pkg-config to get cflags and libs for compilation
      ...

commit 3f442da8cd9b02bd942a7a8098e6803e9c0b77e0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 17:42:23 2011 +0100

    sdpops: readme is updated with documentation of latest additions

commit ea6338ea145a393f147ea31739a4d7580c6e11da
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 15:15:25 2011 +0100

    sdpops: added sdp_remove_media(type)
    
    - remove the media streams matching the type
    - e.g., sdp_remove_media("video");

commit d768eb5cc535efa47164a26e021f6741d974760d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 14:54:29 2011 +0100

    core: sdp parser - keep link to start and lenght of sdp content
    
    - useful in multi-part bodies and sdp operations

commit 53d2ca58c013289e55a771ff69ad1448ef912aae
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 14:18:51 2011 +0100

    sdpops: keep codecs functions can do filtering on media type
    
    - a second optional paramter with media type can be given to keep codecs
      function to avoid removing codecs from wrong media stream

commit 0331f328d1dcdfc7f95fbe1181ec669421184ced
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 13:56:15 2011 +0100

    sdpops: added functions to test the presence of codecs
    
    - sdp_with_codecs_by_id(idlist)
    - sdp_with_codecs_by_name(namelist)

commit 0894cb4434d707f455a383f702ae60dbf76b9655
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Dec 21 16:21:07 2011 +0100

    libsrdb1: Make IPv6 addresses fit into lcr_gw
    
    - Resize lcr_gw.ip_addr column to fit IPv6 addresses.

commit d1ed60050d9c16b8b1b58559a5a1aea23f640b2d
Author: Richard Fuchs <rfuchs@sipwise.com>
Date:   Wed Dec 21 16:19:31 2011 +0100

    lcr: added IPv6 support.
    
    - Support both IPv4 and IPv6 addresses as ip_addr.

commit 7defb42e5f4b42a69a409eb316d325fc0c8bad16
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 00:46:25 2011 +0100

    modules: bunch of READMEs regenerated to be sync'ed with docbook

commit d18996bee12699c3b627e6de1ab1086974df88a5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 00:44:35 2011 +0100

    modules: coherent naming of Statistics section in docbook
    
    - it is easier to generate alphabetic indexes

commit a3041af64b0f7e5c7de33a90148e070088c2416a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 00:29:50 2011 +0100

    sl: regenerated the readme

commit 2f3903e79c5ec1b5aa48e8ca17cce94b3e2e1668
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 21 00:29:14 2011 +0100

    sl: documented exported statistics

commit a510d17d7005fa47d4f2a672b4ceb94fbda9c9ba
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 20 22:34:26 2011 +0100

    core/tcp: define option TCP_CLONE_RCVBUF to turn off/on tcp rcv buffer cloning
    
    - cloning is on by default, to be safe for topoh and msg_apply_changes()

commit 29ac2f12f5b475993c5e2be806ecc4c98696e270
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Dec 20 21:49:36 2011 +0100

    pdt(k): added rpc command pdt.reload
    
    - reload database records to pdt cache

commit 099852dfb53b922d74bccb17b3a81df012ad37f6
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Dec 20 21:39:05 2011 +0100

    pdt(k): MI commands can be disabled via define PDT_NO_MI

commit fd494bceb1e60e6bb15b5da6820cca4fcd030222
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Dec 20 18:09:49 2011 +0100

    pdt(k): updates to documentation
    
    - new function pd_translate(dsomain, rmode)

commit eaa899bc5ca5b0331e83a849b7ce0abf214eb364
Author: Elena-Ramona Modroiu <ramona@asipto.com>
Date:   Tue Dec 20 17:58:42 2011 +0100

    pdt: refactored prefix-domain translation
    
    - use internally a function that can take the source domain as parameter
    - new function to config pd_translate(sdomain, flags) to allow source
      domain to be given from config file

commit 3d4a59421a284afbf8bdf8e87357f07d9cd554e0
Author: Andrei Pelinescu-Onciul <andrei@iptel.org>
Date:   Tue Nov 22 12:55:39 2011 +0100

    tcp: fix for ENOTCONN on newer FreeBSDs
    
    Newer FreeBSDs return ENOTCONN instead of EAGAIN/EWOULDBLOCK when
    trying to send on a non-blocking socket which is not yet fully
    connected (the connect is still pending).
    
    Reported-by: Dmitry Petrakoff  dimon dprs-consulting com

commit a6da2035c27d1026357bd5ed54c0fce434b162ed
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 20 11:27:14 2011 +0100

    dialplan: added fnmatch (2) matching operator
    
    - if match_op=2, the matching of the rule is done using fnmatch function
      which does shell-like pattern matching

commit 3ab8db548c0f2aedf5bba4eae48da660defd510b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 20 09:20:40 2011 +0100

    core/tcp: init max_tls_connections in tcp options check

commit a38ff36df9e802b129f1b52427a9ed4959197d29
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 20 00:33:39 2011 +0100

    core/tcp: proper init of parameter tls_max_connections
    
    - the fixup function was setting to tcp value

commit 0c830402b517f3e4194dd28b0383e57b8a803d21
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 19 22:08:57 2011 +0100

    textopsx: added fnmatch(value, expr, flags) function
    
    - shell-style pattern matching (via file selection wildcards), using C
      function fnmatch()

commit 4c52cf0577636fe6a202c255c3872e45b841dc06
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 19 21:58:24 2011 +0100

    core: added function to help fixup of PVE, string and expressions
    
    - existing function could convert single pv PVE in PVAR, which can cause
      troubles as PVE value should be always zero terminated

commit 8f5183a3416cadad7d4afac36721b8f972e310b1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Dec 19 13:18:54 2011 +0100

    registrar(k): maintaining one contact per AoR has priority over max_contacts
    
    - when using save() with the flags to keep only one contact per AoR,
      max_contacts limit is no longer applied, as it is not matching the
      demants of save() when max_contacts=1
    - partch by Walter Doekes, closes FS#192

commit 2dad021502d0f931fabde0e4c220baf70898a877
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Dec 18 21:13:19 2011 +0000

    lib/srdb1: Enable non-pooled database connections to be defined.
    
    - Kamailio pools database connections, but sometimes this causes
      problems.  For example, we (Crocodile) observed an issue with
      many different queries happening on the same connection while
      using db_fetch_next().
    - This change enables you to specify a DB connection as non-pooled
      by putting a '*' at the start of the DB URL in kamailio.cfg.
    - Feature added by Paul Pankhurst @ Crocodile RCS

commit 27ab10b4c61593ae544b7c24633840d0deafff92
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Dec 18 21:08:45 2011 +0000

    modules_k/presence: Added additional return value to pres_auth_status() for polite-block
    
    - pres_auth_status() currently returns just the status of presence relationship.
    - However, polite-block consists of a combination of status and reason,
      a polite-blocked watcher has ACTIVE status but a reason of polite-block.
      This means that even though blocked, when just checking based on status,
      polite-blocked watchers appear to be authorised.
    - After this change pres_auth_status() returns a magic value of 5 when
      a watcher is polite-blocked.
    - Feature added by Hugh Waite @ Crocodile RCS.

commit 5731486ac973324f25b091367a573d710f4fe71f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 17 22:22:04 2011 +0100

    tls: new parameter 'renegotiation' to enable/disable client renegotiation
    
    - default is 0 (renegotiation disabled), to protect against SSL
      renegotiation attack
    - can be enabled by setting it to 1

commit 62b824b10b6ff9a18e336ff20c55d2d6ea6cba3c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Dec 17 21:32:22 2011 +0100

    tls: use pkg-config to get cflags and libs for compilation

commit 0fac4fb37ed2fdfeb388af0c67a80408f8b5d97e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 22:33:56 2011 +0100

    rtimer: updates to readme for interval attribute

commit d05746ee5bfb1dee1e7cd206bfa08765225358ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 22:30:08 2011 +0100

    textopsx: documented keep_hf() function

commit 1b6d53726362de49065bbfaf11e0a5d07dae6b22
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 20:50:50 2011 +0100

    textopsx: added keep_hf("regexp")
    
    - remove headers that don't match the regular expression regexp
    - several header are ignored always (thus not removed): Via, From, To,
      Call-ID, CSeq, Content-Lenght, Content-Type, Max-Forwards, Contact,
      Route, Record-Route -- these can be removed one by one with
      remove_hf()
    - the new function helps reducing the size of the sip message, by
      removing not mandatory headers

commit f67c75cd0450eead5fb9e50d63e8966129646a97
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 13:46:57 2011 +0100

    rtimer: exec interval can be in microsecods
    
    - value of interval parameter can be ended in 'u' to tell is a
      microsecond based interval
    - for each timer running on micro-seconds interval, a new micro-second
      timer process is started (no option to use an existing timer with same
      precision)

commit a8fa5a92d2e5b42e7e7238ecaf4898e491c6574d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 13:18:09 2011 +0100

    Makefile: devel version increased to 3.3.0-dev3

commit 304fe28c1f299db8a36fe6953da3c3b9afa24c12
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 13:17:22 2011 +0100

    lib/binrpc: fixed compile warnings
    
    - reported by Juha Heinanen

commit 0f598b1a5798ecd403ef588f7d4c6b38177883ce
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 16 13:10:57 2011 +0100

    pv: new transformation class 'line'
    
    - {line.count} - return number of lines in PV
    - {line.at,pos} - return the line at position pos
    - {line.sw,exp} - return the line starting with 'exp'

commit 3775eb7730b2cd5491864109945b31f15df28f1a
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 15 18:58:02 2011 +0100

    pv: use a pool of buffers for transformations
    
    - currently 4 slots - safer for chained string transformations that need
      the local buffer

commit dd39f8456269ae4c414704d4d0e25341be20a987
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 15 18:37:03 2011 +0100

    pv: take in cosideration escaped chars for s.rm transformation

commit c37efcf217148e9c1623a96c3cd2b54d52364078
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 15 17:54:21 2011 +0100

    pv: added s.rm transformation
    
    - {s.rm,match} - remove occurrences of 'match' from PV
    - 'match' can be static string or variable

commit 6ad59b21c54865e45144b84a3d0569553891da4c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 15 16:19:18 2011 +0100

    pv: added transformations for trim, right trim and left trim
    
    - remove whitespaces (' ', '\t', '\r', '\n') from start or end of a string value

commit a6c83dd424ba65bf5599f9bbd9e736a8d27a1128
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 15 13:03:00 2011 +0100

    core: added rpc commands to list listen sockets and name aliases
    
    - core.sockets_list
    - core.aliases_list

commit a077f5e104fe92a1b3ea51dbf00589fc77c9666c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 15 13:01:51 2011 +0100

    core: merged proto id to name functions

commit 2f38f2c316bc3c0410ac1bd61747ca8c69480937
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Dec 14 23:18:36 2011 +0100

    core/timer: added support for basic mili-second timers
    
    - renamed second-based timer functions from dummy to basic

commit 94204ce852d16c9c9d620b7bd194737519f59c0f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 13 23:08:50 2011 +0100

    tls: rpc tls.info prints the limit and opened tls connections

commit 61f8b970416124efcdae38943af6ec48bf27f751
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 13 23:01:48 2011 +0100

    core/tcp/tls: added tls_max_connections global parameter
    
    - set a limit to active tls connections
    - its management is done in tcp code, as tls is encryption layer over
      tcp
    - tls connections are still counted as tcp connections, thus this limit
      cannot exceed tcp_max_connections
    - default value 2048
    - core.tcp_options lists also the tls connections number

commit e567b3fde3165fd752d72a86de3b13d5bdf76ddd
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 13 15:02:02 2011 +0100

    core: added core.tcp_list rpc command
    
    - print details about tcp connections

commit 517d38ed02586bc9fc88ea0d3ceb8b81f510ade5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Dec 13 13:00:50 2011 +0100

    tls: do TLS pre-init operations at the time of loading module
    
    - makes sure that it sets the memory managing functions and the locks
      before other modules may start using libssl
    - reported by Øyvind Kolbu, FS#183

commit 667abaf034fd79b10e7c116e5afcfaf50b834145
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Dec 11 09:26:45 2011 +0200

    modules_k/siputils: removed unused sip_msg* param from is_uri_user_e164()

commit dcea57fb83b480a8d55e466a26e677a639bda6bb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 11 00:05:46 2011 +0100

    async: readme file was regenerated

commit 5176f66abb7c9f588431ba3a05a9b54d2d8e5093
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 11 00:04:47 2011 +0100

    async: fixed broken docbook crated in previous commit

commit 22278ed608d598ac353b32cd44517e961faa41b3
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sun Dec 11 00:02:14 2011 +0100

    async: cfg functions cannot be used in branch_route
    
    - that routing block is processing outgoing brnaches, not requests
    - reported by Jasmin Schnatterbeck, FS#190

commit 1c3b6dbf68efd8e5cc29c715cbb3917ef8f42f84
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 22:05:35 2011 +0000

    modules_k/pua: Some of the functions in pua_db.c did not completely replicate the behaviour of the original hash-table functions
    
    - This caused a variety of problems during RLS client testing.
    - Fixes by Paul Pankhurst @ Crocodile RCS

commit 464d6a353f1de7d7ca38cd856320b973f3341679
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 22:03:35 2011 +0000

    modules_k/pua: Temporary dialogs did not contain all of the required fields.
    
    - Temporary dialogs are created when a SUBSCRIBE is sent to handle the timing
      issue that means that NOTIFYs can be processed before 200 OKs (the real
      dialog is created on 200 OK).
    - Not every required field was filled in for the temporary dialogs so dialog
      searches were failing and duplicate dialogs created.

commit e9e6d51b87cea0d60c47200ab1f99948b1d9bc48
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 22:01:06 2011 +0000

    modules_k/presence, modules_k/pua, modules_k/rls: Changed rls_update_subs() to not send unnecessary back-end re-SUBSCRIBEs.
    
    - The initial implementation sent a re-SUBSCRIBE for each existing back-end
      dialog and create new back-end dialogs as required (depending on the contents
      of the updated resource-list) documents.
    - This was very wasteful, so this version only sends the new SUBSCRIBEs

commit 2780fa74515612a3698a73b81d76c8ddd8a39fe4
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:55:35 2011 +0000

    modules_k/pua: Fixed some dialog output levels

commit ca8f2211bd1c4bebe083a07b3afe7107254e6bea
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:50:05 2011 +0000

    modules_k/rls: Added lock for rls_update_subs() in DB only mode
    
    - If a client updates the same resource-list document multiple times in quick
      succession rls_update_subs() might overlap for the same dialogs.
    - This was causing problems in DB only mode so a lock has been added.
    - Not a problem when the hash-table is used as each row has locks.
    - Problem identified and fix defined by me.
    - Fix implemented by Hugh Waite @ Crocodile RCS

commit 0b6f0aec4b39e777ce11004917d77008cad225da
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:47:54 2011 +0000

    modules_k/rls: removed unnecessary waitn_time <= 0 check
    
    - This was checked twice one immediately after the other.  The second check
      would never fail.

commit 0c352ed5eb8baa6754f0e38cd04f5d365fb1c5bb
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:46:48 2011 +0000

    modules_k/rls: Fixed some diagnostics that had typos and were at the wrong levels

commit 0f79902f0e44f0cc3c01607a917121fbce8d30a3
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:40:20 2011 +0000

    modules_k/rls: Memory allocation problem for NOTIFY bodies
    
    - A few problems here:
      - The actual allocated buffer size was not used in the calculations in
        constr_multipart_body
      - The buffer pointer was copied to a local variable and not copied back after
        a realloc in constr_mulitpart_body().  This resulted in a double free when
        the realloc moved the buffer.
      - The length of the data in string buffer was never copied back to the str in
        constr_multipart_body().
      - In both constr_multipart_body() and resource_notify.c when the buffer does
        not contain enough space another 2048 bytes is allocated.  This is
        regardless of how much more space is actually needed.  So if 4096 bytes
        were needed 2048 bytes would be allocated and then the end of the buffer
        would be overwritten by 4096 bytes of data.
      - Problem found and diagnosed during testing at Crocodile RCS
      - Fix implemented by Hugh Waite @ Crocodile RCS

commit 754a5f470ecc45d976beeb33be0dc43b88510b5d
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:30:51 2011 +0000

    modules_k/presence: Authorisation requests not working in DB only mode
    
    - The code behind pres_update_watchers() seemed to be missed when the presence
      DB only work was done.
    - pres_update_watchers() continued to work when the hash-table was used but not
      in DB only mode.
    - Problem and fix identified during testing @ Crocodile RCS
    - Fix implemented by Paul Pankhurst @ Crocodile RCS

commit 80b8e30b8a8de950354c1e8b510a03ad9ed98992
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:23:12 2011 +0000

    modules_k/xcap_server: Changed the XCAP server so that existing documents are updated instead of deleted and inserted
    
    - Affects XCAP PUT and XCAP partial DELETE
    - Some RLS clients send multiple HTTP updates in very close succession.  One
      client has even been observed to upload an identical document several times
      in a row.
    - I use rls_update_subs() when any resource-list related document is uploaded.
      With Kamailio being multi-process and the client re-uploading an indentical
      document several times with no time between I was frequently hitting the
      window where rls_update_subs() was called after the DB delete for the second
      upload but before the insert happened.
    - Now the DB put operation checks for the presence of a document and does an
      insert only if the document does not exist.  It does an update if the
      document does exist.

commit 63250485d7acfc60237b2c368d66b0361c884d7d
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Thu Dec 8 21:19:25 2011 +0000

    modules_k/rr: Exported record_route_advertised_address function to config file
    
    - Exported the C API function to the config file
    - CHange by Hugh Waite @ Crocodile RCS

commit 3552f22bbe89124eedca268fcd16bc9097fbb0b1
Author: Jason Penton <jason.penton@gmail.com>
Date:   Wed Dec 7 14:32:45 2011 +0200

    xmlrpc: Removed define for Solaris compilations
     - This define breaks on Solaris and is not required

commit dfe367e8ddd51d28bb23265ad09169415ac2e145
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Dec 7 09:16:20 2011 +0200

    modules_k/msilo: removed debug statement

commit dc9f7a7fc8f5f5a7570f9e24c2f59ec77a7d6668
Author: Juha Heinanen <jh@tutpro.com>
Date:   Wed Dec 7 07:53:28 2011 +0200

    modules_k/msilo: added storage of extra SIP headers from AVP

commit 1226a51d817481e6ebde455e10e0949987fe45e9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sun Dec 4 13:42:16 2011 +0200

    modules_k/siputils: faster implementation of is_uri_user_e164 test

commit 6ebd0a6bf1cbacf73f45ff42d368f22304bff11b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 2 13:05:55 2011 +0100

    core/tcp: clone received message over tcp in local buffer
    
    - receive_msg() got pointer inside tcp stream as rcv buffer, linking it to
      msg->buf, but there are places where the content of msg->buf is
      changed (topoh, msg_apply_changes) which can result in corruption of
      tcp stream content
    - added a wrapper function receive_tcp_msg() to clone the content and
      have same behaviour as for udp or sctp
    - reported by Hugh Waite, FS#185

commit bb2e2477cbcd14ad5a4a7203ad6b59d5a705e555
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 2 11:55:28 2011 +0100

    tm: safety check to be sure t_release() is executed in request_route
    
    - t_release() is intended for request_route block, but can be executed
      from other types of root routing block via subroute, causing a crash
    - the fix ensures the root routing block is request_route
    - reported by Jose Luis Millan, closes FS#184

commit 577585de0a63737157e88d18007807f8f55f7904
Author: Jason Penton <jason.penton@gmail.com>
Date:   Fri Dec 2 08:41:29 2011 +0200

    core: Solaris fix for using libcurl
     - Require this fix on solaris for any dynamic loading of modules that use libcurl.
       See comment above fix for more details

commit fc0f544b25c157147f8b813be6ba594b20ee6757
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Dec 2 00:37:18 2011 +0100

    dialog(k): give dir parameter to get_dlg()
    
    - initialized to DLG_DIR_NONE to fix accessing NULL pointer for
      searching dialog by msg attributes
    - patch by Jasmin Schnatterbeck

commit 5cd8e582f833243884fa4daf891d24c4c0dcf1f9
Author: Juha Heinanen <jh@tutpro.com>
Date:   Thu Dec 1 12:00:32 2011 +0200

    modules/lcr: fixed testing of transport protocol by to_gw functions
    
    - Test failed when transport protocol is taken from Request-URI and
      there is not any.

commit cf17660d7bdd9d5ba94d73a4a06fab653369f227
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 09:55:57 2011 +0100

    rls(k): regenerated the readme file

commit 4f7d94fbfb4d5d93eabf2e256ffcfb936e138a2d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 09:55:33 2011 +0100

    presence(k): regenerated the readme

commit 20f71de9d02c31378011a931fde9cd1677c75621
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 09:55:10 2011 +0100

    presence(k): documented fetch_rows parameter

commit 50985d2cfc0e3bbe394cc7fe64f9ccd39dc5c962
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 09:54:42 2011 +0100

    rls(k): documented fetch_rows parameter

commit 3678ef86a542f93f13c39316b5be692875b459b2
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 09:49:22 2011 +0100

    rls(k): option load db records in chunks
    
    - cope better with large number of db records
    - new parameter fetch_rows (default value 500)

commit 5931a413c2e7be4aa0c8ec57f777c1f1805dc86e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Dec 1 09:20:01 2011 +0100

    presence(k): option to fetch records from db in chunks
    
    - can cope with large number of db records
    - new parameter fetch_rows (default value 500)

commit 521857609419050ee98a0220fb23cd5eed797dad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 19:00:30 2011 +0100

    pua: regenerated the readme file

commit e15dd7f7c75c0520a718a58dd541cdf1e874c249
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 19:00:11 2011 +0100

    pua: documente fetch_rows parameter

commit 880b447b43bb75328a3cd2f245d969272812ae42
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 18:57:21 2011 +0100

    dialog(k): disable unused functionunref_new_dialog()
    
    - get rid of compliler warning

commit b018f09abbecc6b057c6f9446406c6f20f43a235
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Nov 26 00:32:23 2011 +0100

    dialog(k): safety check for lookup in dialog table at shutdown
    (cherry picked from commit 017ea5779710223df8f5a28829f77eff8395affc)

commit 5bdee1ffe820d3e9e75898bb252d1660b4bbad60
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 21 23:52:43 2011 +0100

    dialog(k): refactored dlg ref counting
    
    - dlg pointer is no longer stored in tm callbacks parameter and ref
      counting for these kind of needs was removed
    - the internal id (hash entry, dlg id) is given now to tm callbacks. The
      callbacks will do dlg lookup to get the structure
    - there are longer-time persistent ref counting for:
      * storing dlg structure in dialog hash table
      * keeping dlg in timer list
      * waiting for the reply of BYE to destroy dialog structure
    - all the other ref countings are for short time, only for the period of
      doing specific processing
    - the new ref counting is safer in relation with tm callbacks and avoids
      tight dependecy which may have been easily broken by future tm changes
    (cherry picked from commit 9ba4ee25e32368a9c17c3f86784a52a97b748b93)

commit f65d060bb471070dca743905092afb60e5119bb6
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 15:19:35 2011 +0100

    parser: remove old URI parser and structure

commit 1970f091041474bf6633e6b4d90e753021d0cfff
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 15:18:23 2011 +0100

    pua: load records from database in chunks
    
    - use fetch result capability from database connector
    - new module parameter fetch_rows (default 500)
    - reported by Laura Testi

commit 09c9abb0f7907132d9afee4580f0475a2e46cadc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 30 15:17:46 2011 +0100

    lib/srdb1: helper functions to handle easier fetch capability

commit 21346f47f7712d08369e45e970a6ffec3eab0a3c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 29 11:58:45 2011 +0100

    tm: proper increment of lightweight parsing for call-id
    
    - a pretty much harmless fix to increment with 3 instead of 7 when
      parsing Call-ID name in lightweight parser
    - reported and patch by Walter Doekes, FS#168

commit 54c99da0de46c59cd85363dca1eed324dbb6b495
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 29 11:36:36 2011 +0100

    sanity: allow doing the checks in reply routes
    
    - use wrapper function for sending replies, to skip doing it for SIP
      replies
    - reported by Bayan Towfiq, FS#177

commit a6c2f847c87cb6f27caa244c123249795269c90e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Nov 26 09:51:18 2011 +0100

    doc/rpc: updated function prototypes and names

commit 2863cf5bb7c6498bb5c64954dda87d2e5e95efb0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Nov 26 00:21:53 2011 +0100

    doc/rpc_list: updates to the files with list of rpc commands

commit c45216e48960bc4262a507fad7ee0bb30b0241ef
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Sat Nov 26 00:20:29 2011 +0100

    doc/rpc_list: added note about duplicated names for modules

commit 0ea93171d5ff2ce34d9ea48a0fc9eeecde98468d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 25 23:49:45 2011 +0100

    doc/rpc_list: regenerated the files with the list of rpc commands

commit 4d6f1790baffc161d65dd9bae6709fa45d95e00f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 25 23:48:10 2011 +0100

    doc/rpc_list: take the C compile flags from core makefile

commit c7566f661584f1628e4c7beb30512b2301521d04
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 25 23:46:31 2011 +0100

    Makefile: option to print C compile flags
    
    - print with no EOL the module interface flag in Makefile.modules

commit a4550975f4e5d767039cf9ad731d4eeb4c631619
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 25 18:39:14 2011 +0100

    doc/rpc_list: get module interface to extract the list of rpc commands

commit 6fb2e27d0f9db5191b8939df69e23ef12f3b6d1d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 25 18:38:24 2011 +0100

    Makefile.modules: printmiface - new target to print module interface define

commit 6299704ebb280214f35fc86968d86be972219e51
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 17:22:26 2011 +0100

    parser: don't free on error To param linked in to_body struct
    
    - if a To header parameter was already linked in to_body struct, don't
      free if there is a parsing error for it later, it will be freed by
      free_to_params()
    - reported by Bayan Towfiq in FS#180

commit c22a3ec7366ad1a3cc0b5e8229fbabe2c179cca1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 15:30:15 2011 +0100

    textops(k): free only pkg body lumps for set_body()
    
    - if set_body() is used in failure_route, it should not destroy
      completely the lumps cloned in tm, just ignore them and free the ones
      added in failure_route before execution of itself
    - reported by Brandon Armstead, FS#181

commit b6d90904de590a3f6a95bca8f89cf2521d630902
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 15:28:04 2011 +0100

    tm: backup/restore lump lists for faked requests
    
    - some cfg functions that can be used in failure_route can destroy the
      head of lump lists, thus better backup before and restore after failure_route
      execution

commit 8652f5f5fb2b10210c65b04772064c452608c728
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 15:26:47 2011 +0100

    core: better check for cloned lumps in shared memory
    
    - bitwise test for LUMPFLAG_SHMEM

commit c5f101dfac9a50f428e3452893c402d8b1e0400b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 24 12:56:28 2011 +0100

    core: save and restore branch_iterator in print_dset
    
    - safe usage in branch_route where branch_interator is used to add the
      new brnaches, but some variables can change it if used in config
      branch_route
    - closes FS#182, reported by Pawel Sternal

commit 5949e296b7bafab42a4ac3261f453f286d98e41c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 22 11:30:56 2011 +0100

    dialog(k): destroy dlg structure first time ref counter gets to 0
    
    - reported by Bayan Towfix, FS#173

commit cc33486a8c17ae2cb4cbb5fce42f7a73646cd3c1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 22 11:30:02 2011 +0100

    pv: use msg pid to check the integrity of cached time
    
    - safer when dealing with async or failure processing

commit f6f42b24c2df7d3840ebe42be262b1dc5092b86a
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Mon Nov 21 07:10:21 2011 -0500

    Doc fixes for reg_timer_interval patch.  I'll try not to break things
    again.

commit 3097c7878d395988e137253d77f7fb30707929b0
Author: Alex Balashov <abalashov@evaristesys.com>
Date:   Mon Nov 21 06:21:24 2011 -0500

    Fixed equivocation of STR_PARAM / INT_PARAM for reg_timer_interval patch.

commit 455b64088b7ace99c767a3320b79f7069a3202b8
Author: Alex Balashov - Diminuendo-2 <evariste-admins@evaristesys.com>
Date:   Mon Nov 21 06:13:05 2011 -0500

    Added reg_timer_interval modparam to uac to allow user to regulate the
    frequency with which registrations are renewed and otherwise managed.
    Previously, this has been hardcoded to 90 seconds.

commit 5bdef817bdc2e3fcf4e68bf25bf1a97683f2269f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 22:09:57 2011 +0000

    modules_k/rr: Added new (C-API) function to add Record-Route based on advertised address
    
    - You can already do something similar with record_route_preset, but that
      function has some disadvantages.  Double record-routing doesn't work and you
      can't subsequently add parameters to the Record-Route header.  This new
      function doesn't have these disadvantages.
    - Currently this is not exported to the configuration file.  This may be worth
      doing in the future.
    - Feature added by Hugh Waite @ Crocodile RCS

commit fcbe9878c6f09adc000edaffb0f292b555eb6b48
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 22:05:14 2011 +0000

    modules/app_lua, modules_k/siputils, modules_k/uac: Added siputils.is_uri_user_e164 and uac.replace_from to app_lua

commit e5edc71fa4e2e53a135e206d9b07acdfe3694c02
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 21:55:28 2011 +0000

    modules_k/pua, modules_k/rls: Several debug, PostgreSQL, and DB only fixes to PUA and RLS
    
    - A number of small tweaks and fixes

commit 566347e893ac9c71942e2a5fe1d72e6426c58f0f
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 21:48:43 2011 +0000

    lib/binrpc, modules/mi_rpc: Added MI command to run RPC commands
    
    - Useful for things like running RPC commands from the Siremis MI command page
    - Feature added by Andrew Miller @ Crocodile RCS

commit a5c30f50d0db9b57954bd74643c6b130f10e233c
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 21:43:58 2011 +0000

    modules_k/msilo: Fixed a bad memcpy used for the storage of extra headers in MSilo
    - Problem found and fixed by Hugh Waite @ Crocodile RCS

commit f042a01c0af018bbfa3a53d132cb66c10f89a69a
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 21:42:14 2011 +0000

    modules_k/presence_xml: Fixed segmentation fault in pres_check_activities()

commit a201a33815edc968d48b9307282e9a5507664ee6
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sun Nov 20 21:04:52 2011 +0000

    modules_k/dispatcher: Added outbound_proxy modparam for use with dispatcher pings
    
    - When set the dispatcher pings are routed through an outbound proxy.
    - This modparam has no effect on real traffic.

commit 1a72ea1d450062e618eeab04655e7cbc742313f2
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Sat Nov 19 22:44:21 2011 +0000

    modules_k/xcap_server: xcaps_buf sometimes freed in w_xcaps_put()
    
    - The buffer is alloc'd at module startup so should not be freed here.
    - When freed here the buffer memory can be alloc'd for other things and then
      future XCAP server operations will trample over it causing segmentation
      faults.
    - Fix by Hugh Waite @ Crocodile RCS.

commit 950b1e52ed8a94462be17e206d6970fd13a41661
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 18 00:10:26 2011 +0100

    libkcore: set pid attribute for fake msg

commit 76f7847fe6245e06aa88d104b60245c7c03b04f0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 18 00:08:44 2011 +0100

    core: store pid per sip message
    
    - when a sip message is received, store pid in sip_msg_t structure
    - help identifying same sip msg across many processes

commit 55615d11ece77074ad779d1ad09361b1fd2b2bad
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Fri Nov 18 09:22:26 2011 +0100

    diversion: user anchor_lump2 to insert diversion header
    
    - remove the caching of anchor, is not save across many processes, when
      handling diversion in request_route and failure_route

commit 7b612d999e061d05b60054e7749052d0abdf514c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 17 23:14:32 2011 +0100

    tm: free path if set first time in a branch route

commit 37397c5ee04b91bf75cb92857d5bb47ce8f95a75
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 17 15:22:33 2011 +0100

    presence_profile: use ulink tag for http url to get it as link in html format
    
    - added few more details about the functionality provided by the module,
      based on summary of rfc6080

commit cd356bc0ffe4dc5ca75c07a230cfc2cbd3ddd852
Merge: 2396dde d3a2b22
Author: Mészáros Mihály <misi@niif.hu>
Date:   Thu Nov 17 14:02:56 2011 +0100

    Merge remote branch 'origin/misi/ua-profile'
    
    * origin/misi/ua-profile:
      modules_k/presence_profile: new modul for basic ua-profile event support
      parser: added ua-profile event type

commit 2396dde7230e04f853e6936cfff9059661c55635
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 16 07:50:42 2011 +0100

    core: at shutdown, first call the destroy module functions then free module exports structure
    
    - some modules may need access to other modules at shut down
    - reported by Juha Heinanen

commit da07d2a093a4aec9673ae2e5a0bd4bccb9d3cd70
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 15 09:27:46 2011 +0100

    ndb_redis: docs update - server parameter type is string
    
    - more details to server parameters to show that many redis servers can
      be used

commit 86a921a3a28d86eb66dc3c4e481b27ebb2cfff70
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Tue Nov 15 00:41:47 2011 +0100

    tm: Execute TMCB_ACK_NEG_IN callback on reception of a local ACK as
    well.

commit 958328f023cc5a150c7860d98bf5e682a0a5c1e9
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Tue Nov 15 00:37:48 2011 +0100

    tm: Pass transaction as parameter to callback for CANCEL request.

commit 29642534fa9ae12a74ffaabbf5a14349310ab32f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 14 22:43:28 2011 +0100

    Makefile: dev version increased to 3.3.0-dev2

commit ef6bb4541687862f2f2cc09a5a784a7b7045672f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 14 22:39:24 2011 +0100

    auth: new function auth_challenge()
    
    - combines www_challenge() and proxy_challenge() by calling the first
      for REGISTER and the second for the rest of request types
    - it is usefull to simplify the config file for default auth handling

commit 812e447be6174d2a4529325b0fac1e5a76151828
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 14 22:09:19 2011 +0100

    auth_db(k): new function auth_check()
    
    - the function offers www/proxy_authenticate() behaviour by using first
      for REGISTER and the second for the other requests
    - it can check auth user against from/to user
    - should simplify the config file for the common user authentication
      scenario

commit 7ea685c439f5081e9bf7f9e37c62cdcfb2638bcb
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 14 22:07:50 2011 +0100

    auth: added new error code to auth API
    
    - AUTH_USER_MISMATCH = -8 -- to be returned when auth user mistmach
      from/to header user

commit 96c35ff6afeca6320d7299cf9ecebc721d246e30
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Nov 14 22:07:08 2011 +0100

    pua: fixed wrong docbook tag name

commit 3097e5ec43acd130bfd55bc2e8fc1d962faec4d0
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Mon Nov 14 12:20:11 2011 -0500

    Makefile: add xhttp_rpc module to kstandard

commit 96c2f8d45973ba7e299b597a207eea68db70d427
Author: Ovidiu Sas <osas@voipembedded.com>
Date:   Fri Nov 11 18:54:15 2011 -0500

    xhttp_rpc: new module providing a web interface for RPC management interface

commit 378a6e03ac35000212ff0263a997807f6e178f01
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Tue Nov 8 23:46:37 2011 +0100

    dialog(k): Remove warning in docs regarding usage of stateless replies
    (resolved by now).

commit 8ca6de5604ee32076aea5924472f5081a48c99b7
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Mon Nov 7 23:36:36 2011 +0100

    dialog(k): Use correct logical operation to enable DLG_FLAG_CHANGED_VARS
    flag.

commit ae76e2183c9966cfe44c0519de7d5a53be08041c
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Sun Nov 6 02:21:08 2011 +0100

    dialog(k): When restoring dialog variables from database calculate and
    set variable string length.
    
    - Fixes Flyspray #172.

commit 456903d2b4775e3d968e2eaa08b46e64993f4053
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Sat Nov 5 02:41:19 2011 +0100

    acc(k): Define timersub macro for Solaris as it is not provided in
    <sys/time.h>.

commit 34fc972291e965a40086b59f077a4b34fba2d12d
Author: Timo Reimann <sr@foo-lounge.de>
Date:   Fri Nov 4 23:09:02 2011 +0100

    dialog(k): When restoring dialog variables from database, stop iterating
    through given dialog hash table bucket once matching dialog is found.
    
    - Fixes FS #171.
    - Credits to Daniel-Constantin Mierla.

commit 987c8a5fbfa0f23e1211e4253e7113f4ea79b22b
Author: Timo Reimann <timo.reimann@1und1.de>
Date:   Thu Nov 3 23:10:38 2011 +0100

    dialog(k): Set dialog parameters (timeout, etc.) before create callback
    is executed to provide these parameters to registered functions.

commit c22415ba7a65e0a054cb625440812aae292ea2d5
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 3 22:10:52 2011 +0100

    docbook: remove double quotes around XML_CATALOG_FILES

commit 60670bd00570adc5fff2de30929d88b7d956d3ea
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 3 21:12:46 2011 +0100

    dispatcher(k): sample cfg file updated
    
    - some clarifications added to faq

commit 1f63d8d3e619ec1e9a0d15f45c507547a72dc715
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Nov 3 11:48:30 2011 +0100

    dispatcher(k): fixed copy&paste typo of maintaining inactive state
    
    - instead of setting the inactive state, it was resetting it
    - restructured the usage of fake msg for running event routes for
      keepalive replies, so that it is generated only if event routes are
      defined

commit 26364a3c475370259569f9a5c9d8988a436be67f
Author: Jon Bonilla <manwe@aholab.ehu.es>
Date:   Wed Nov 2 12:20:54 2011 +0100

    pkg/deb Add libncurses to build-dep
    (cherry picked from commit abd0a077a626bd780e4719e38c9338d7ba6aa81b)

commit b589e42a06feba2382c2b4dbb9e0d56ebe4b6ed1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 2 10:42:52 2011 +0100

    dispatcher(k): added clarifications to ds_probing_mode parameter

commit d665458442aed734bf1831e37ccf666ab2846f25
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Nov 2 10:35:22 2011 +0100

    dispatcher(k): use defines for probing modes
    
    - it can be DS_PROBE_NONE (0), DS_PROBE_ALL (1) or DS_PROBE_INACTIVE (2)
    - when ds_probing_mode is set to 2, keep probing inactive gateways until
      they become active. Note that the gateway must be set to probing when
      it goes in trying or inactive state

commit d05616d81960e6b1647981d8d8b5e0dbe04a3dcb
Author: Michal Karas <largon@largon.net>
Date:   Mon Oct 17 11:18:51 2011 +0200

    app_python: fixing clone string for dirname and basename
    
    - variable tname replaced by dname_src and bname_src, because both
      dirname() and basename() requires it's argument not to change: "These
      functions may return pointers to statically allocated memory which may
      be overwritten by subsequent calls. Alternatively, they may return a
      pointer to some part of path, so that the string referred to by path
      should not be modified or freed until the pointer returned by the
      function is no longer required."
    - related to FS#137
    
    Signed-off-by: Daniel-Constantin Mierla <miconda@gmail.com>

commit fa9e7de6bbef15110cb4940769b27d90b2c000c8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:32:42 2011 +0100

    db_text(k): init DB API lib in mod_register()

commit d0ede402a4e5a9163405fa3da66b2cb38ab24552
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:30:15 2011 +0100

    db_oracle(k): init DB API lib in mod_register()

commit f122ee6e63087d15cee95642c4e8ac9249b4f958
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:28:26 2011 +0100

    db_unixodbc: init DB API lib in mod_register()

commit 4040fead1833abddee710d18e7c655ca53cfb0ed
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:26:37 2011 +0100

    db_sqlite: init DB API lib in mod_register()

commit 4578f6eba8b3539202dffa756cf0813dfa7eb328
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:26:07 2011 +0100

    db_postgres: use db_api_init() to initialize srdb1 lib

commit 41225392808b1e5462be40e37ba85700e8eab632
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:22:30 2011 +0100

    db_berkeley: init DB API lib in mod_register()

commit b3b34accb2f65ccef6045b083879166cb1a1e060
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:21:19 2011 +0100

    db_postgres: init DB API lib in mod_register()
    
    - this will initialize the sql buffer at module load time, avoiding
      crash at startup if a module using the DB driver is loaded before the
      db driver itself
    - reported by Timo Teras

commit cc88761be68212c7c08dcdef182fe2e16b42a3e1
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:20:38 2011 +0100

    db_flatstore: init DB API lib in mod_register()

commit 9a7e99d01e1c60dae8bec62037e8321c7d671c1d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:18:36 2011 +0100

    db_mysql: initialize DB API in mod_register() function
    
    - internal buffer sql_buf initialized in this function
    - renamed sql_buf to mysql_sql_buf to avoid potential conflict with
      global variable in srdb1 library

commit 86e28b07474e75582423f50f560cf6156022da86
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 20:15:50 2011 +0100

    srdb1: added db_api_init() function
    
    - to be executed to initialize internas of DB API library
    - calls internal function db_query_init() that initialize the buffer to
      print db queries

commit e4d2b647d1b0e8764b1eb0cfe07d446231af0df8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 16:18:34 2011 +0100

    sdpops: support for codecs with same name and many different ids
    
    - reported by Juha Heinanen

commit 83253d3a5cc08ce581fad88378de5eb3bd7fc784
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Nov 1 11:38:51 2011 +0100

    sdpops: fixed usage of delim param in sdp_codec_in_str()
    
    - matching codecs in a comma separated list should work now
    - reported by Juha Heinanen as part of testing keep_codecs_by_name()

commit 1b58b26b7ccf7b2c01185a22ad076a3655e43664
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 17:18:11 2011 +0100

    utils/sercmd: set SRNAME at compile time
    
    - it is set to sip server name (e.g., ser, kamailio)
    - it is used to build the default path to ctl file used to communicate
      with sip server via ctl module
    - reported by Henning Westerholt

commit b515ac33300f3c1d47195961409812d49fafb58f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 17:16:36 2011 +0100

    ctl: use SRNAME define to build default ctl file path
    
    - this define is set by sercmd comilation (NAME is set to sercmd in this
      case)
    - otherwise use NAME, which is set by sip server compilation
    - reported by Henning Westerholt

commit e1c6eafe29973a05f9f9358efbac9bf6be16a92d
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 11:43:28 2011 +0100

    parser/sdp: updated parse_sdp() description
    
    - reflect properly return codes

commit 50880207fe208df5de065e0f915c560ac255a9d8
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 11:22:37 2011 +0100

    snmpstats: removed c&p duplicated module parameter
    
    - reported by Klaus Darilion

commit 704c619f401b6286588c43c8dec9e04670f4ad43
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Mon Oct 31 11:20:05 2011 +0100

    sdpops: check for sdp structure after parse_sdp()
    
    - the function can return 1 in case of no body
    - reported by Juha Heinanen

commit f4f9bf6f33feee9efbd38944c45e4fad0db594ae
Author: Juha Heinanen <jh@tutpro.com>
Date:   Sat Oct 29 18:57:50 2011 +0300

    modules_k/textops: added missing in_list() implementation
    
    - For some reason merge from jh/32plus branch to master missed in_list()
      implementation.

commit 0b8f2ee4c128cd2b532356087272445519c1c08b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:45:17 2011 +0200

    dispatcher(k): clarification about trying transition state from active to inactive

commit 7330cbc114821732b4f8bed5a43893226a800198
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:44:44 2011 +0200

    dispatcher(k): default probing threshold set to 1

commit 3c45a4680f545c6a5c9041db52fa5f013dc19f48
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:11:14 2011 +0200

    man page: updated with the new -I command line option

commit 372b113b6bd4447dfd73b8b6da6a5672730a5636
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:07:33 2011 +0200

    dispatcher(k): docs update and rebuild readme file

commit cbe2e236846e6527a2fc9e6b40b80befe329825b
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 16:00:55 2011 +0200

    dispatcher(k): new state trying for destination addresses
    
    - the state trying (t) is a transition between active to inactive, when
      inactive state is wanted after a certain number of failures specified
      in probing threshold
    - when in trying state, the destination is still selected, but
      additional settings of trying state will increment an internal failure
      counter which results in setting inactive state when probing threshold
      is matched
    - the functionality was before based on probing mode, but since 3.2
      probing is not longer related to destination selection. This will
      provide back the lost functionality
    - ds_mark_dst(x) can have as parameter a combination between state and
      probing mode, such as 'ip' - inactive and probing, or ap - active and
      probing, or 'tp' - trying and probing

commit ad4cfe8a3410059bc5c0b4951e49a952c4b01dfe
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 07:17:52 2011 +0200

    dialog(k): postpone setting tm callbacks until T is created
    
    - add dialog in tm callbacks when transaction is created
    - when using dlg_manage(), if dialog does not makes it to transaction,
      clean it up
    - fixes case when stateless reply is used after dlg_manage() to create a
      new dialog

commit f5803916a37e0f2151335e65283060c6a88de9e0
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 05:09:03 2011 +0200

    core: new command line option -I
    
    - print details about default internal attributes

commit a5c9d7e4bfe5949177290671072616ab054722bc
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 04:21:24 2011 +0200

    docbook/Makefile: option to not use local catalog
    
    - if nocatalog=yes, the xsltproc is started without XML_CATALOG_FILES
      and the default ones from system are used

commit 5c1388c536a35d7cc8df3620b72b4eba0d31e10c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 04:20:56 2011 +0200

    dialog(k): regenerated readme

commit 1d917dac68bdaf3a6aabcb644e08c00fd2f9ae0f
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 03:50:56 2011 +0200

    dialog(k): removed invalid html tag for docbook source

commit 64d6ebf337ac2df7a2334c3d0e03770e7418ed67
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 27 03:10:00 2011 +0200

    Makefile: increased dev version

commit 511dc62e6a6ca74324f42b66a23bd9d80b377252
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 26 21:21:22 2011 +0200

    sdpops: find codec ids in sdp when not found in static table
    
    - functions to keep/remove codecs by name work now with dynamic ids for
      codecs
    - reported by Juha Heinanen

commit 9056b574f3df2d3358c3e726772d63bbbcd6dc23
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Wed Oct 26 18:59:39 2011 +0200

    dispatcher(k): clarified notes about probing mode

commit db308939b551a920b31bdebd76c28b5b104db68c
Author: Jason Penton <jason.penton@gmail.com>
Date:   Wed Oct 26 14:32:00 2011 +0200

    Dialog: Fixed lurking html tag in XML doc

commit 6e1af068c99e84d0bfd5f713ced1e5f484ff9c5c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 25 17:35:25 2011 +0200

    core/sdp: restore setting of IP address type
    
    - refactoring of extract_mediaip() skipped setting IPv4/IPv6 type in sdp
      structure
    - reported by Jason Penton

commit f08415ed7be6593921ce779a6d90c5a62b531196
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 21 15:58:09 2011 +0100

    modules_k/msilo: adding storage of MESSAGE headers to msilo broke some of the existing extra_headers stuff in the module
    
    - Now fixed.  Fix by Hugh Waite at Crocodile RCS

commit b48bc0977c98e3ee71f4bc44b3f7ed2e1eafce26
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 21 15:53:33 2011 +0100

    modules_k/rls: the checks on the number of records returned from the DB when updating RLS subscriptions from the configuration file while in db only mode were too strict

commit d2ca9a17add030a16645ddf17488555d044214bb
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 21 15:51:32 2011 +0100

    modules_k/presence, modules_k/pua, modules_k/rls: Fixed issues discovered while testing with PostgreSQL 9.0
    
    - Some of the fields in the DB have not null constraints that result
      in errors when using PostgreSQL but not MySQL.

commit da4e2976f0fc9f2217758c886a518e3406efafc3
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Fri Oct 21 15:45:56 2011 +0100

    lib/srdb1: Fixed problem with the new bitwise and DB operation
    
    - In MySQL you can do "select * from table where value&mask;" but that
      is not actually correct SQL and fails on other DBs (specifically
      PostgreSQL).  The correct SQL is
      "select * from table where value&mask=mask;"

commit 25bedcd991bc0225c50467abf0b6e48618893cbf
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 20 23:50:08 2011 +0200

    dispatcher(k): restore actve state via MI
    
    - resetting the state flags were not in effect for active state,
      reported by Asgaroth
    - added define to check whether a destionation addres should be skipped
      or not based on its state

commit 808a7b553f11a19ddbab1079a2719d706994522c
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Thu Oct 20 20:01:10 2011 +0200

    kamctl: version set to 3.3.0 for development

commit d3a2b22db7e8c7c77f8bdf8af25ff23fe1316076
Author: Mihály Mészáros <misi@niif.hu>
Date:   Thu Oct 20 17:49:51 2011 +0200

    modules_k/presence_profile: new modul for basic ua-profile event support
    
     - This is a new modul that is using sip event framework for endpoint config provisioining.
       Currently it has very basic functionality.

commit 081ed6600b3af2ae491aa9de50e83724f6be07e3
Author: Mihály Mészáros <misi@niif.hu>
Date:   Thu Oct 20 17:47:50 2011 +0200

    parser: added ua-profile event type

commit 3ac41f0ceb165de3050b69e33ed6ac9689d0977a
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 13:34:49 2011 +0100

    modules_k/rls: removed some debug that was left-over from the development

commit cd2b03bb1192bc0bc3ca43603cf65e2eb2bc0317
Merge: 4bf0c8a 8aa7982
Author: Henning Westerholt <hw@kamailio.org>
Date:   Wed Oct 19 14:05:38 2011 +0200

    Merge branch 'master' of ssh://git.sip-router.org/sip-router
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      modules/app_lua: added lots of new modules and functions

commit 4bf0c8ada7d5acf6743d0a7b18c163747c5af38a
Author: Henning Westerholt <hw@kamailio.org>
Date:   Wed Oct 19 14:04:54 2011 +0200

    srdb1: small spelling fix in doxygen

commit 8aa79820843e276083e582c2d0e17c88e81f5add
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 13:03:14 2011 +0100

    modules/app_lua: added lots of new modules and functions
    
    - Newly exported modules: textops, pua_usrloc, siputils, rls, alias_db,
      msilo.
    - Extra functions in existing modules: t_newtran, t_release,
      rr_add_param, registered, handle_publish, handle_subscribe
    - Changes by Peter Dunkley and Hugh Waite at Crocodile RCS

commit 7665c7947f839ade0e9decbad0c2db41ea29f924
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 12:52:21 2011 +0100

    modules_k/rls: added DB only mode to rls
    
    - By using DB only mode RLS can be distributed across many Kamailio
      servers for scaling and resilience.
    - This change has been in use internally at Crocodile RCS for some time,
      but it is extensive.
    - The DB only mode changes have been made in a way that changes the pre-
      existing (hash-table based) mode of operation as little as possible.
      This original mode of operation SHOULD be unaffected by this change.
    - This enhancement was made by Paul Pankhurst at Crocodile RCS.
    - Also contains a small bug-fix to RLS indices by Hugh Waite.
    - I have also exported the RLS API for use in app_lua

commit 90e9d7fc8fb339194c6be6eec2b1ec793e32af78
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 12:45:28 2011 +0100

    modules_k/pua: added DB only mode to PUA
    
    - By using DB only mode PUA (and modules that use PUA like RLS) can be
      distributed across many Kamailio servers for scaling and resilience.
    - This change has been in use internally at Crocodile RCS for some time,
      but it is extensive.
    - The DB only mode changes have been made in a way that changes the pre-
      existing (hash-table based) mode of operation as little as possible.
      This original mode of operation SHOULD be unaffected by this change.
    - This enhancement was made by Paul Pankhurst at Crocodile RCS.

commit 659fe4b6aef276f6925e1ba08b6e61ca40e838d3
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:58:43 2011 +0100

    lib/srdb1: added the ability to use bitwise-and in DB queries
    
    - This is used in the changes to add db only mode to pua
    - This enhancement was made by Paul Pankhurst at Crocodile RCS

commit f6149f8d960a8c46166d48d570ed2391e34f67c8
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:57:36 2011 +0100

    modules_k/presence: added db_only mode support for presentity table
    
    - This enhancement was made by Paul Pankhurst at Crocodile RCS

commit 8f00ae7a9b4e2d19bc49f62b0ab3507c283f74f4
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:56:15 2011 +0100

    modules/textopsx, modules_k/alias_db, modules_k/pua_usrloc: added missing api.h files from previous commits

commit c8fa3d8c28d4d1d918b09d0e9dc29ee59bd38928
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:48:22 2011 +0100

    modules_k/siputils: added has_totag() to exported API for use in app_lua

commit ccf3045d3d91d821081f0812336a9140856b7bf8
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:46:36 2011 +0100

    modules_k/rr: added record_route_preset() to exported API for use in app_lua
    
    - Enhancement made by Hugh Waite at Crocodile RCS

commit fc287bc74e838052914eeeee1af1857533cb4ab1
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:44:56 2011 +0100

    modules_k/registrar: added registered() to exported API for use in app_lua

commit e10ce584c7c6c8fe4a7d2422e92a436f7e8bf27a
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:43:34 2011 +0100

    modules_k/pua_usrloc: exported API for use in app_lua

commit a870c322638cbf89aa69fd289716414ed5adbf3a
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:41:33 2011 +0100

    modules_k/presence: added handle_publish() and handle_subscribe() to exported API for use in app_lua

commit ac560678f44064bffb263e199f66029da926162b
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:40:20 2011 +0100

    modules_k/alias_db: exported alias_db API for use in app_lua

commit 4945d6f77295233918752e5c06add2a607a60e79
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:33:16 2011 +0100

    modules/textopsx: exported textopsx API
    
    - This is so that I can use msg_apply_changes in app_lua

commit 46d67e70cc3077942802333d49aaef57d2e6d5d5
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:30:51 2011 +0100

    modules_k/textops: added is_privacy() to the exported textops API
    
    - For use in app_lua

commit 0e986a18dea2c6141669a3ddad0c17055ce97e32
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:25:36 2011 +0100

    modules_k/msilo: added missing file from previous commit

commit d0b4bc91ea0a24205e3dc1bb51c3bcbd3a4c3df1
Author: pd <peter.dunkley@crocodile-rcs.com>
Date:   Wed Oct 19 11:14:38 2011 +0100

    modules_k/msilo, lib/srdb1/schema: extra headers in MESSAGE requests can now be stored in the silo
    
    - Allows extra information relating to a MESSAGE to be preserved when it is stored
    - This enhancement was made by Hugh Waite at Crocodile RCS
    - Also exported the msilo API so that it can be used in app_lua

commit fa85359d63efd0ff97261a58d2b231e01c836dea
Merge: 5bd2add e3eb4e3
Author: Juha Heinanen <jh@tutpro.com>
Date:   Tue Oct 18 16:09:44 2011 +0300

    Merge branch 'master' of ssh://git.sip-router.org/sip-router into 32plus
    
    * 'master' of ssh://git.sip-router.org/sip-router:
      INSTALL: added short note about wiki site
      Makefile: version set to 3.3.0-dev0
      presence_xml: remove unecessary include
      core and modules: fix compile warnings on freebsd
      core and modules: fix compile warning

commit e3eb4e3e8471a3715f014a80adb79e0d93a88a5e
Author: Daniel-Constantin Mierla <miconda@gmail.com>
Date:   Tue Oct 18 13:39:20 2011 +0200

    INSTALL: added short note about wiki site


===================== 2011-10-18 Version 3.2.0 Released =====================

